import{c as Z,r as I,u as ee,j as s,e as K,H as te}from"./app-akdF0UQF.js";import{A as se}from"./app-layout-D-I8VZ2C.js";import{H as oe,S as re}from"./heading-small-_nLqpjR1.js";import{c as W,B as Q}from"./button-BdOT1yAC.js";import{I as ae}from"./input-Cs1fsYbE.js";import{L as ie}from"./label-CATpRmWc.js";import{I as le}from"./input-error-BzmJN1oy.js";import{A as P,a as U}from"./alert-Tus7UX5A.js";import{u as ne}from"./useTranslation-C6fWKkAI.js";import{L as $}from"./loader-circle-CJcm5ByM.js";import{S as ce}from"./shield-eVjY4jfl.js";/* empty css            */import"./index-DWathVxY.js";import"./index-DYJll8sb.js";import"./index-D6SAxgfg.js";import"./index-Cnj7nTTh.js";import"./index-CwlvpiCt.js";import"./index-C91kYN7g.js";import"./x-DN597F1n.js";import"./index-CjOEJVw9.js";import"./dropdown-menu-u_F1iKCr.js";import"./index-Duuv9Igk.js";import"./index-D_gUAlRl.js";import"./index-CtrMaZOQ.js";import"./index-mbkb6Dy8.js";import"./settings-DIMWCOz3.js";import"./credit-card-woI18zvf.js";const me=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],de=W("ShieldCheck",me);const fe=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],pe=W("ShieldOff",fe);function Ve(r){const e=Z.c(60),{twoFactorEnabled:o,requiresConfirmation:T}=r,{t}=ne();let i;e[0]!==t?(i=t("nav.settings"),e[0]=t,e[1]=i):i=e[1];let l;e[2]!==i?(l={title:i,href:"/settings/profile"},e[2]=i,e[3]=l):l=e[3];let n;e[4]!==t?(n=t("settings.twoFactor.title"),e[4]=t,e[5]=n):n=e[5];let c;e[6]!==n?(c={title:n,href:"/settings/two-factor"},e[6]=n,e[7]=c):c=e[7];let b;e[8]!==l||e[9]!==c?(b=[l,c],e[8]=l,e[9]=c,e[10]=b):b=e[10];const H=b,[v,V]=I.useState(!1),[S,G]=I.useState(!1),[y,D]=I.useState(null);let F;e[11]===Symbol.for("react.memo_cache_sentinel")?(F=[],e[11]=F):F=e[11];const[N,J]=I.useState(F);let _;e[12]===Symbol.for("react.memo_cache_sentinel")?(_={code:""},e[12]=_):_=e[12];const{data:M,setData:q,post:R,processing:C,errors:z,reset:B}=ee(_);let k;e[13]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{V(!0),K.post("/user/two-factor-authentication",{},{preserveScroll:!0,onSuccess:()=>{fetch("/user/two-factor-qr-code").then(xe).then(a=>D(a.svg)),fetch("/user/two-factor-recovery-codes").then(ue).then(a=>J(a))},onFinish:()=>V(!1)})},e[13]=k):k=e[13];const X=k;let L;e[14]!==R||e[15]!==B?(L=a=>{a.preventDefault(),R("/user/confirmed-two-factor-authentication",{preserveScroll:!0,onSuccess:()=>{B(),D(null)}})},e[14]=R,e[15]=B,e[16]=L):L=e[16];const O=L;let A;e[17]===Symbol.for("react.memo_cache_sentinel")?(A=()=>{G(!0),K.delete("/user/two-factor-authentication",{preserveScroll:!0,onFinish:()=>{G(!1),D(null),J([])}})},e[17]=A):A=e[17];const Y=A;let m;e[18]!==t?(m=t("settings.twoFactor.title"),e[18]=t,e[19]=m):m=e[19];let d;e[20]!==m?(d=s.jsx(te,{title:m}),e[20]=m,e[21]=d):d=e[21];let f;e[22]!==t?(f=t("settings.twoFactor.title"),e[22]=t,e[23]=f):f=e[23];let p;e[24]!==t?(p=t("settings.twoFactor.description"),e[24]=t,e[25]=p):p=e[25];let h;e[26]!==f||e[27]!==p?(h=s.jsx(oe,{title:f,description:p}),e[26]=f,e[27]=p,e[28]=h):h=e[28];let u;e[29]!==t||e[30]!==o?(u=o?s.jsxs(P,{className:"border-green-200 bg-green-50",children:[s.jsx(de,{className:"h-4 w-4 text-green-600"}),s.jsx(U,{className:"text-green-800",children:t("settings.twoFactor.enabled")})]}):s.jsxs(P,{children:[s.jsx(pe,{className:"h-4 w-4"}),s.jsx(U,{children:t("settings.twoFactor.disabled")})]}),e[29]=t,e[30]=o,e[31]=u):u=e[31];let x;e[32]!==O||e[33]!==M||e[34]!==z||e[35]!==C||e[36]!==y||e[37]!==T||e[38]!==q||e[39]!==t||e[40]!==o?(x=y&&!o&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.twoFactor.scanQr")}),s.jsx("div",{className:"inline-block bg-white p-4 rounded-lg",dangerouslySetInnerHTML:{__html:y}}),T&&s.jsxs("form",{onSubmit:O,className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-2 max-w-xs",children:[s.jsx(ie,{htmlFor:"code",children:t("settings.twoFactor.confirmCode")}),s.jsx(ae,{id:"code",value:M.code,onChange:a=>q("code",a.target.value),placeholder:"000000",maxLength:6}),s.jsx(le,{message:z.code})]}),s.jsxs(Q,{type:"submit",disabled:C,children:[C&&s.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),t("settings.twoFactor.confirm")]})]})]}),e[32]=O,e[33]=M,e[34]=z,e[35]=C,e[36]=y,e[37]=T,e[38]=q,e[39]=t,e[40]=o,e[41]=x):x=e[41];let g;e[42]!==N||e[43]!==t?(g=N.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.twoFactor.recoveryCodes")}),s.jsx("div",{className:"bg-muted p-4 rounded-lg font-mono text-sm",children:N.map(he)})]}),e[42]=N,e[43]=t,e[44]=g):g=e[44];let j;e[45]!==S||e[46]!==v||e[47]!==t||e[48]!==o?(j=s.jsx("div",{className:"flex gap-2",children:o?s.jsxs(Q,{variant:"destructive",onClick:Y,disabled:S,children:[S&&s.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),t("settings.twoFactor.disable")]}):s.jsxs(Q,{onClick:X,disabled:v,children:[v&&s.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),s.jsx(ce,{className:"mr-2 h-4 w-4"}),t("settings.twoFactor.enable")]})}),e[45]=S,e[46]=v,e[47]=t,e[48]=o,e[49]=j):j=e[49];let w;e[50]!==h||e[51]!==u||e[52]!==x||e[53]!==g||e[54]!==j?(w=s.jsx(re,{children:s.jsxs("div",{className:"space-y-6",children:[h,u,x,g,j]})}),e[50]=h,e[51]=u,e[52]=x,e[53]=g,e[54]=j,e[55]=w):w=e[55];let E;return e[56]!==H||e[57]!==d||e[58]!==w?(E=s.jsxs(se,{breadcrumbs:H,children:[d,w]}),e[56]=H,e[57]=d,e[58]=w,e[59]=E):E=e[59],E}function he(r,e){return s.jsx("div",{children:r},e)}function ue(r){return r.json()}function xe(r){return r.json()}export{Ve as default};
