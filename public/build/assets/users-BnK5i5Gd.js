import{c as v,j as t,d as I,g as Te,r as ee,e as q,H as Ne,L as ye}from"./app-Ca-1lP6U.js";import{A as Se,U as we,a as Ie}from"./app-layout-LiNhCU7R.js";import{b as qe,C as Re,a as Oe,d as Ce,c as ke}from"./card-CE_uWCMY.js";import{c as Ee,b as _,B as E}from"./button-DQmxDJGb.js";import{B as L}from"./badge-C6Gf6SGw.js";import{I as Le}from"./input-Dqugp59B.js";import{S as Ae,a as Ge,b as Fe,c as $e,d as R}from"./select-B3nMjnzV.js";import{S as Pe}from"./search-JoHGppWG.js";import{E as Be}from"./external-link-BdeK6fcU.js";/* empty css            */import"./index-Bm2rkCA_.js";import"./index-BHG_0skQ.js";import"./index-TtGJoqWm.js";import"./index-TMKe-ljc.js";import"./index-DpqQmGq9.js";import"./index-BBBh_BKV.js";import"./x-b3P3YIRf.js";import"./index-5GJ5rWZR.js";import"./dropdown-menu-gzv1CmV2.js";import"./index-Clrh2rzt.js";import"./index-C-TfOxr3.js";import"./index-mbkb6Dy8.js";import"./settings-he3wfqqm.js";import"./credit-card-CdjOZcxD.js";import"./shield-C4_23gpi.js";import"./index-CfiwGkxB.js";import"./check-DN2gl3-u.js";const Ue=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],He=Ee("ChevronLeft",Ue);function We(a){const e=v.c(8);let r,n;e[0]!==a?({className:r,...n}=a,e[0]=a,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let i;e[3]!==r?(i=_("w-full caption-bottom text-sm",r),e[3]=r,e[4]=i):i=e[4];let s;return e[5]!==n||e[6]!==i?(s=t.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:t.jsx("table",{"data-slot":"table",className:i,...n})}),e[5]=n,e[6]=i,e[7]=s):s=e[7],s}function De(a){const e=v.c(8);let r,n;e[0]!==a?({className:r,...n}=a,e[0]=a,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let i;e[3]!==r?(i=_("[&_tr]:border-b",r),e[3]=r,e[4]=i):i=e[4];let s;return e[5]!==n||e[6]!==i?(s=t.jsx("thead",{"data-slot":"table-header",className:i,...n}),e[5]=n,e[6]=i,e[7]=s):s=e[7],s}function ze(a){const e=v.c(8);let r,n;e[0]!==a?({className:r,...n}=a,e[0]=a,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let i;e[3]!==r?(i=_("[&_tr:last-child]:border-0",r),e[3]=r,e[4]=i):i=e[4];let s;return e[5]!==n||e[6]!==i?(s=t.jsx("tbody",{"data-slot":"table-body",className:i,...n}),e[5]=n,e[6]=i,e[7]=s):s=e[7],s}function A(a){const e=v.c(8);let r,n;e[0]!==a?({className:r,...n}=a,e[0]=a,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let i;e[3]!==r?(i=_("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),e[3]=r,e[4]=i):i=e[4];let s;return e[5]!==n||e[6]!==i?(s=t.jsx("tr",{"data-slot":"table-row",className:i,...n}),e[5]=n,e[6]=i,e[7]=s):s=e[7],s}function g(a){const e=v.c(8);let r,n;e[0]!==a?({className:r,...n}=a,e[0]=a,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let i;e[3]!==r?(i=_("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),e[3]=r,e[4]=i):i=e[4];let s;return e[5]!==n||e[6]!==i?(s=t.jsx("th",{"data-slot":"table-head",className:i,...n}),e[5]=n,e[6]=i,e[7]=s):s=e[7],s}function p(a){const e=v.c(8);let r,n;e[0]!==a?({className:r,...n}=a,e[0]=a,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let i;e[3]!==r?(i=_("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),e[3]=r,e[4]=i):i=e[4];let s;return e[5]!==n||e[6]!==i?(s=t.jsx("td",{"data-slot":"table-cell",className:i,...n}),e[5]=n,e[6]=i,e[7]=s):s=e[7],s}var G,te;function be(){if(te)return G;te=1;function a(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return G=a,G}var F,re;function Me(){if(re)return F;re=1;var a=typeof I=="object"&&I&&I.Object===Object&&I;return F=a,F}var $,ae;function xe(){if(ae)return $;ae=1;var a=Me(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=a||e||Function("return this")();return $=r,$}var P,ne;function Ve(){if(ne)return P;ne=1;var a=xe(),e=function(){return a.Date.now()};return P=e,P}var B,ie;function Xe(){if(ie)return B;ie=1;var a=/\s/;function e(r){for(var n=r.length;n--&&a.test(r.charAt(n)););return n}return B=e,B}var U,se;function Je(){if(se)return U;se=1;var a=Xe(),e=/^\s+/;function r(n){return n&&n.slice(0,a(n)+1).replace(e,"")}return U=r,U}var H,le;function pe(){if(le)return H;le=1;var a=xe(),e=a.Symbol;return H=e,H}var W,oe;function Ke(){if(oe)return W;oe=1;var a=pe(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,i=a?a.toStringTag:void 0;function s(u){var d=r.call(u,i),l=u[i];try{u[i]=void 0;var o=!0}catch{}var m=n.call(u);return o&&(d?u[i]=l:delete u[i]),m}return W=s,W}var D,ce;function Qe(){if(ce)return D;ce=1;var a=Object.prototype,e=a.toString;function r(n){return e.call(n)}return D=r,D}var z,de;function Ye(){if(de)return z;de=1;var a=pe(),e=Ke(),r=Qe(),n="[object Null]",i="[object Undefined]",s=a?a.toStringTag:void 0;function u(d){return d==null?d===void 0?i:n:s&&s in Object(d)?e(d):r(d)}return z=u,z}var M,ue;function Ze(){if(ue)return M;ue=1;function a(e){return e!=null&&typeof e=="object"}return M=a,M}var V,me;function et(){if(me)return V;me=1;var a=Ye(),e=Ze(),r="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&a(i)==r}return V=n,V}var X,fe;function tt(){if(fe)return X;fe=1;var a=Je(),e=be(),r=et(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt;function l(o){if(typeof o=="number")return o;if(r(o))return n;if(e(o)){var m=typeof o.valueOf=="function"?o.valueOf():o;o=e(m)?m+"":m}if(typeof o!="string")return o===0?o:+o;o=a(o);var h=s.test(o);return h||u.test(o)?d(o.slice(2),h?2:8):i.test(o)?n:+o}return X=l,X}var J,he;function rt(){if(he)return J;he=1;var a=be(),e=Ve(),r=tt(),n="Expected a function",i=Math.max,s=Math.min;function u(d,l,o){var m,h,S,j,f,x,T=0,K=!1,N=!1,O=!0;if(typeof d!="function")throw new TypeError(n);l=r(l)||0,a(o)&&(K=!!o.leading,N="maxWait"in o,S=N?i(r(o.maxWait)||0,l):S,O="trailing"in o?!!o.trailing:O);function C(c){var b=m,y=h;return m=h=void 0,T=c,j=d.apply(y,b),j}function je(c){return T=c,f=setTimeout(w,l),K?C(c):j}function ge(c){var b=c-x,y=c-T,Z=l-b;return N?s(Z,S-y):Z}function Q(c){var b=c-x,y=c-T;return x===void 0||b>=l||b<0||N&&y>=S}function w(){var c=e();if(Q(c))return Y(c);f=setTimeout(w,ge(c))}function Y(c){return f=void 0,O&&m?C(c):(m=h=void 0,j)}function ve(){f!==void 0&&clearTimeout(f),T=0,m=x=h=f=void 0}function _e(){return f===void 0?j:Y(e())}function k(){var c=e(),b=Q(c);if(m=arguments,h=this,x=c,b){if(f===void 0)return je(x);if(N)return clearTimeout(f),f=setTimeout(w,l),C(x)}return f===void 0&&(f=setTimeout(w,l)),j}return k.cancel=ve,k.flush=_e,k}return J=u,J}var at=rt();const nt=Te(at),it=[{title:"Admin",href:"/admin"},{title:"Utilisateurs",href:"/admin/users"}];function Et({users:a,filters:e}){const[r,n]=ee.useState(e.search||""),i=ee.useCallback(nt(l=>{q.get("/admin/users",{filter:e.filter,search:l||void 0},{preserveState:!0,replace:!0})},300),[e.filter]),s=l=>{n(l.target.value),i(l.target.value)},u=l=>{q.get("/admin/users",{filter:l,search:e.search||void 0},{preserveState:!0,replace:!0})},d=l=>new Intl.NumberFormat("fr-FR").format(l);return t.jsxs(Se,{breadcrumbs:it,children:[t.jsx(Ne,{title:"Utilisateurs"}),t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[t.jsx(we,{className:"h-6 w-6"}),"Utilisateurs"]}),t.jsxs(L,{variant:"secondary",children:[d(a.total)," total"]})]}),t.jsxs(qe,{children:[t.jsx(Re,{children:t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx(Oe,{children:"Liste des utilisateurs"}),t.jsx(Ce,{children:"Gérez les comptes et abonnements"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Pe,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),t.jsx(Le,{type:"search",placeholder:"Rechercher par email...",className:"pl-8 w-[250px]",value:r,onChange:s})]}),t.jsxs(Ae,{value:e.filter,onValueChange:u,children:[t.jsx(Ge,{className:"w-[150px]",children:t.jsx(Fe,{placeholder:"Filtrer"})}),t.jsxs($e,{children:[t.jsx(R,{value:"all",children:"Tous"}),t.jsx(R,{value:"pro",children:"Pro"}),t.jsx(R,{value:"free",children:"Free"}),t.jsx(R,{value:"canceled",children:"Annulés"})]})]})]})]})}),t.jsxs(ke,{children:[t.jsxs(We,{children:[t.jsx(De,{children:t.jsxs(A,{children:[t.jsx(g,{children:"Email"}),t.jsx(g,{children:"Plan"}),t.jsx(g,{children:"Statut"}),t.jsx(g,{className:"text-right",children:"Images/mois"}),t.jsx(g,{children:"Inscrit le"}),t.jsx(g,{className:"w-12"})]})}),t.jsx(ze,{children:a.data.length===0?t.jsx(A,{children:t.jsx(p,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"Aucun utilisateur trouvé."})}):a.data.map(l=>t.jsxs(A,{children:[t.jsx(p,{children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium",children:l.email}),t.jsx("span",{className:"text-xs text-muted-foreground",children:l.name})]})}),t.jsx(p,{children:t.jsx(L,{variant:l.plan==="pro"?"default":"secondary",children:l.plan==="pro"?"Pro":"Free"})}),t.jsx(p,{children:t.jsxs(L,{variant:l.subscription_status==="active"?"default":l.subscription_status==="canceled"?"destructive":"outline",children:[l.subscription_status==="active"&&"Actif",l.subscription_status==="canceled"&&"Annulé",l.subscription_status==="none"&&"-",!["active","canceled","none"].includes(l.subscription_status)&&l.subscription_status]})}),t.jsx(p,{className:"text-right font-mono",children:d(l.images_this_month)}),t.jsx(p,{className:"text-muted-foreground",children:l.registered_at}),t.jsx(p,{children:t.jsx(ye,{href:`/admin/users/${l.id}`,children:t.jsx(E,{size:"sm",variant:"ghost",children:t.jsx(Be,{className:"h-4 w-4"})})})})]},l.id))})]}),a.last_page>1&&t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",a.current_page," sur ",a.last_page]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(E,{variant:"outline",size:"sm",disabled:a.current_page===1,onClick:()=>q.get("/admin/users",{...e,page:a.current_page-1}),children:t.jsx(He,{className:"h-4 w-4"})}),t.jsx(E,{variant:"outline",size:"sm",disabled:a.current_page===a.last_page,onClick:()=>q.get("/admin/users",{...e,page:a.current_page+1}),children:t.jsx(Ie,{className:"h-4 w-4"})})]})]})]})]})]})]})}export{Et as default};
