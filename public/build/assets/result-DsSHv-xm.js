import{r as d,j as s,c as _e,h as ye,f as ws,e as cs}from"./app-akdF0UQF.js";import{c as Z,d as Cs,b as Fe,e as _s,B as L}from"./button-BdOT1yAC.js";import{S as ks}from"./seo-head-DktdDTso.js";import{b as N,C as S,a as T,d as ke,c as y}from"./card-CDiYXeb9.js";import{u as Ss,c as Ke,P as Ts}from"./index-D6SAxgfg.js";import{I as Ms,R as Fs,c as ds}from"./index-Duuv9Igk.js";import{u as Ps,a as Is}from"./index-Cnj7nTTh.js";import{I as ms}from"./image-card-2oIMfsjJ.js";import{B as K}from"./badge-DYF6X-zs.js";import{L as ss}from"./lock-CsK3Em9R.js";import{C as Es}from"./crown-BqGY5dte.js";import{C as we}from"./check-BKV3Fl0E.js";import{D as ts}from"./download-BaJrsnO6.js";import{I as Ne}from"./image-BdZwaCyV.js";import{L as Me}from"./loader-circle-CJcm5ByM.js";import{P as rs}from"./progress-DmsJ_EE7.js";import{G as Se,C as $s}from"./gauge-DWtrkCuN.js";import{Z as zs}from"./zap-fMsk8lO_.js";import{T as Qe}from"./triangle-alert-CZs1nMlt.js";import{G as As}from"./globe-Dx598pwx.js";import{u as Ls}from"./use-conversion-D7EJU42S.js";import{u as Rs}from"./useTranslation-C6fWKkAI.js";import{R as ls}from"./refresh-cw-Cd8FkgG_.js";import{A as Bs}from"./arrow-left-DlH8pV6o.js";import{H as Vs}from"./house-DGcJ7lRx.js";import{F as Os}from"./file-text-BYx2x2y0.js";/* empty css            */import"./x-DN597F1n.js";import"./index-DWathVxY.js";import"./index-CtrMaZOQ.js";const Ds=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],xs=Z("CodeXml",Ds);const Gs=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Hs=Z("Code",Gs);const qs=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ce=Z("Copy",qs);const Ws=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Zs=Z("EyeOff",Ws);const Js=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Us=Z("Eye",Js);const Ks=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],be=Z("FileJson",Ks);const Qs=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Xs=Z("FileSpreadsheet",Qs);const Ys=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],ns=Z("Palette",Ys);const et=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],st=Z("Twitter",et);function tt(t,e=[]){let l=[];function r(c,i){const o=d.createContext(i),n=l.length;l=[...l,i];const x=m=>{const{scope:p,children:j,...w}=m,u=p?.[t]?.[n]||o,g=d.useMemo(()=>w,Object.values(w));return s.jsx(u.Provider,{value:g,children:j})};x.displayName=c+"Provider";function h(m,p){const j=p?.[t]?.[n]||o,w=d.useContext(j);if(w)return w;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${c}\``)}return[x,h]}const a=()=>{const c=l.map(i=>d.createContext(i));return function(o){const n=o?.[t]||c;return d.useMemo(()=>({[`__scope${t}`]:{...o,[t]:n}}),[o,n])}};return a.scopeName=t,[r,at(a,...e)]}function at(...t){const e=t[0];if(t.length===1)return e;const l=()=>{const r=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(c){const i=r.reduce((o,{useScope:n,scopeName:x})=>{const m=n(c)[`__scope${x}`];return{...o,...m}},{});return d.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return l.scopeName=e.scopeName,l}function rt(t){const e=lt(t),l=d.forwardRef((r,a)=>{const{children:c,...i}=r,o=d.Children.toArray(c),n=o.find(it);if(n){const x=n.props.children,h=o.map(m=>m===n?d.Children.count(x)>1?d.Children.only(null):d.isValidElement(x)?x.props.children:null:m);return s.jsx(e,{...i,ref:a,children:d.isValidElement(x)?d.cloneElement(x,void 0,h):null})}return s.jsx(e,{...i,ref:a,children:c})});return l.displayName=`${t}.Slot`,l}function lt(t){const e=d.forwardRef((l,r)=>{const{children:a,...c}=l;if(d.isValidElement(a)){const i=ct(a),o=ot(c,a.props);return a.type!==d.Fragment&&(o.ref=r?Cs(r,i):i),d.cloneElement(a,o)}return d.Children.count(a)>1?d.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var nt=Symbol("radix.slottable");function it(t){return d.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nt}function ot(t,e){const l={...e};for(const r in e){const a=t[r],c=e[r];/^on[A-Z]/.test(r)?a&&c?l[r]=(...o)=>{const n=c(...o);return a(...o),n}:a&&(l[r]=a):r==="style"?l[r]={...a,...c}:r==="className"&&(l[r]=[a,c].filter(Boolean).join(" "))}return{...t,...l}}function ct(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,l=e&&"isReactWarning"in e&&e.isReactWarning;return l?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,l=e&&"isReactWarning"in e&&e.isReactWarning,l?t.props.ref:t.props.ref||t.ref)}var dt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Oe=dt.reduce((t,e)=>{const l=rt(`Primitive.${e}`),r=d.forwardRef((a,c)=>{const{asChild:i,...o}=a,n=i?l:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(n,{...o,ref:c})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),De="Tabs",[mt]=tt(De,[ds]),us=ds(),[xt,as]=mt(De),hs=d.forwardRef((t,e)=>{const{__scopeTabs:l,value:r,onValueChange:a,defaultValue:c,orientation:i="horizontal",dir:o,activationMode:n="automatic",...x}=t,h=Ps(o),[m,p]=Ss({prop:r,onChange:a,defaultProp:c??"",caller:De});return s.jsx(xt,{scope:l,baseId:Is(),value:m,onValueChange:p,orientation:i,dir:h,activationMode:n,children:s.jsx(Oe.div,{dir:h,"data-orientation":i,...x,ref:e})})});hs.displayName=De;var ps="TabsList",fs=d.forwardRef((t,e)=>{const{__scopeTabs:l,loop:r=!0,...a}=t,c=as(ps,l),i=us(l);return s.jsx(Fs,{asChild:!0,...i,orientation:c.orientation,dir:c.dir,loop:r,children:s.jsx(Oe.div,{role:"tablist","aria-orientation":c.orientation,...a,ref:e})})});fs.displayName=ps;var gs="TabsTrigger",js=d.forwardRef((t,e)=>{const{__scopeTabs:l,value:r,disabled:a=!1,...c}=t,i=as(gs,l),o=us(l),n=Ns(i.baseId,r),x=ys(i.baseId,r),h=r===i.value;return s.jsx(Ms,{asChild:!0,...o,focusable:!a,active:h,children:s.jsx(Oe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:n,...c,ref:e,onMouseDown:Ke(t.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?i.onValueChange(r):m.preventDefault()}),onKeyDown:Ke(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&i.onValueChange(r)}),onFocus:Ke(t.onFocus,()=>{const m=i.activationMode!=="manual";!h&&!a&&m&&i.onValueChange(r)})})})});js.displayName=gs;var vs="TabsContent",bs=d.forwardRef((t,e)=>{const{__scopeTabs:l,value:r,forceMount:a,children:c,...i}=t,o=as(vs,l),n=Ns(o.baseId,r),x=ys(o.baseId,r),h=r===o.value,m=d.useRef(h);return d.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),s.jsx(Ts,{present:a||h,children:({present:p})=>s.jsx(Oe.div,{"data-state":h?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":n,hidden:!p,id:x,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:m.current?"0s":void 0},children:p&&c})})});bs.displayName=vs;function Ns(t,e){return`${t}-trigger-${e}`}function ys(t,e){return`${t}-content-${e}`}var ut=hs,ht=fs,pt=js,ft=bs;function Ge(t){const e=_e.c(10);let l,r,a;e[0]!==t?({className:l,orientation:a,...r}=t,e[0]=t,e[1]=l,e[2]=r,e[3]=a):(l=e[1],r=e[2],a=e[3]);const c=a===void 0?"horizontal":a;let i;e[4]!==l?(i=Fe("group/tabs flex gap-2 data-[orientation=horizontal]:flex-col",l),e[4]=l,e[5]=i):i=e[5];let o;return e[6]!==c||e[7]!==r||e[8]!==i?(o=s.jsx(ut,{"data-slot":"tabs","data-orientation":c,orientation:c,className:i,...r}),e[6]=c,e[7]=r,e[8]=i,e[9]=o):o=e[9],o}const gt=_s("rounded-lg p-[3px] group-data-[orientation=horizontal]/tabs:h-9 data-[variant=line]:rounded-none group/tabs-list text-muted-foreground inline-flex w-fit items-center justify-center group-data-[orientation=vertical]/tabs:h-fit group-data-[orientation=vertical]/tabs:flex-col",{variants:{variant:{default:"bg-muted",line:"gap-1 bg-transparent"}},defaultVariants:{variant:"default"}});function He(t){const e=_e.c(11);let l,r,a;e[0]!==t?({className:l,variant:a,...r}=t,e[0]=t,e[1]=l,e[2]=r,e[3]=a):(l=e[1],r=e[2],a=e[3]);const c=a===void 0?"default":a;let i;e[4]!==l||e[5]!==c?(i=Fe(gt({variant:c}),l),e[4]=l,e[5]=c,e[6]=i):i=e[6];let o;return e[7]!==r||e[8]!==i||e[9]!==c?(o=s.jsx(ht,{"data-slot":"tabs-list","data-variant":c,className:i,...r}),e[7]=r,e[8]=i,e[9]=c,e[10]=o):o=e[10],o}function D(t){const e=_e.c(8);let l,r;e[0]!==t?({className:l,...r}=t,e[0]=t,e[1]=l,e[2]=r):(l=e[1],r=e[2]);let a;e[3]!==l?(a=Fe("focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring text-foreground/60 hover:text-foreground dark:text-muted-foreground dark:hover:text-foreground relative inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-all group-data-[orientation=vertical]/tabs:w-full group-data-[orientation=vertical]/tabs:justify-start focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 group-data-[variant=default]/tabs-list:data-[state=active]:shadow-sm group-data-[variant=line]/tabs-list:data-[state=active]:shadow-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4","group-data-[variant=line]/tabs-list:bg-transparent group-data-[variant=line]/tabs-list:data-[state=active]:bg-transparent dark:group-data-[variant=line]/tabs-list:data-[state=active]:border-transparent dark:group-data-[variant=line]/tabs-list:data-[state=active]:bg-transparent","data-[state=active]:bg-background dark:data-[state=active]:text-foreground dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 data-[state=active]:text-foreground","after:bg-foreground after:absolute after:opacity-0 after:transition-opacity group-data-[orientation=horizontal]/tabs:after:inset-x-0 group-data-[orientation=horizontal]/tabs:after:bottom-[-5px] group-data-[orientation=horizontal]/tabs:after:h-0.5 group-data-[orientation=vertical]/tabs:after:inset-y-0 group-data-[orientation=vertical]/tabs:after:-right-1 group-data-[orientation=vertical]/tabs:after:w-0.5 group-data-[variant=line]/tabs-list:data-[state=active]:after:opacity-100",l),e[3]=l,e[4]=a):a=e[4];let c;return e[5]!==r||e[6]!==a?(c=s.jsx(pt,{"data-slot":"tabs-trigger",className:a,...r}),e[5]=r,e[6]=a,e[7]=c):c=e[7],c}function G(t){const e=_e.c(8);let l,r;e[0]!==t?({className:l,...r}=t,e[0]=t,e[1]=l,e[2]=r):(l=e[1],r=e[2]);let a;e[3]!==l?(a=Fe("flex-1 outline-none",l),e[3]=l,e[4]=a):a=e[4];let c;return e[5]!==r||e[6]!==a?(c=s.jsx(ft,{"data-slot":"tabs-content",className:a,...r}),e[5]=r,e[6]=a,e[7]=c):c=e[7],c}const U={picture:{label:"<picture>",language:"html",description:"Tag HTML5 avec support AVIF, WebP et fallback",pro:!1},img:{label:"<img>",language:"html",description:"Tag img basique avec attributs SEO",pro:!1},img_srcset:{label:"srcset",language:"html",description:"Tag img avec images responsive",pro:!0},react:{label:"React",language:"jsx",description:"Composant React fonctionnel",pro:!0},vue:{label:"Vue",language:"vue",description:"Composant Vue 3 avec script setup",pro:!0},nextjs:{label:"Next.js",language:"jsx",description:"Composant next/image optimisé",pro:!0},css:{label:"CSS",language:"css",description:"Background-image avec image-set()",pro:!0},lazy:{label:"LQIP",language:"html",description:"Chargement progressif avec placeholder",pro:!0}};function jt({image:t,isPro:e=!1,className:l}){const[r,a]=d.useState("picture"),[c,i]=d.useState({}),[o,n]=d.useState({}),[x,h]=d.useState(null),m=d.useCallback(async u=>{if(!(c[u]||o[u])&&!(U[u].pro&&!e)){n(g=>({...g,[u]:!0}));try{const g=await ye.get(`/api/optiseo/images/${t.id}/code/${u}`);i(f=>({...f,[u]:g.data.code}))}catch(g){console.error("Failed to fetch code:",g)}finally{n(g=>({...g,[u]:!1}))}}},[t.id,c,o,e]),p=u=>{const g=u;a(g),m(g)},j=async u=>{const g=c[u];if(g)try{await navigator.clipboard.writeText(g),h(u),setTimeout(()=>h(null),2e3)}catch(f){console.error("Failed to copy:",f)}};d.useState(()=>{m("picture")});const w=u=>U[u].pro&&!e;return s.jsxs(N,{className:l,children:[s.jsxs(S,{children:[s.jsxs(T,{className:"flex items-center gap-2",children:[s.jsx(xs,{className:"h-5 w-5"}),"Génération de code"]}),s.jsx(ke,{children:"Copiez le code HTML, React, Vue ou CSS pour intégrer cette image"})]}),s.jsx(y,{children:s.jsxs(Ge,{value:r,onValueChange:p,children:[s.jsx(He,{className:"grid w-full grid-cols-4 lg:grid-cols-8",children:Object.keys(U).map(u=>s.jsxs(D,{value:u,className:"text-xs gap-1",disabled:w(u),children:[U[u].label,U[u].pro&&!e&&s.jsx(ss,{className:"h-3 w-3 text-muted-foreground"})]},u))}),Object.keys(U).map(u=>s.jsx(G,{value:u,className:"mt-4",children:w(u)?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(Es,{className:"mb-4 h-12 w-12 text-yellow-500"}),s.jsx("p",{className:"mb-2 font-medium",children:"Fonctionnalité Pro"}),s.jsxs("p",{className:"mb-4 text-sm text-muted-foreground",children:["La génération de code ",U[u].label," est réservée aux abonnés Pro"]}),s.jsxs(K,{variant:"secondary",className:"gap-1",children:[s.jsx(ss,{className:"h-3 w-3"}),"Passez à Pro pour débloquer"]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:U[u].description}),s.jsx(L,{variant:"outline",size:"sm",onClick:()=>j(u),disabled:!c[u],className:"gap-2",children:x===u?s.jsxs(s.Fragment,{children:[s.jsx(we,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ce,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("div",{className:"relative",children:o[u]?s.jsx("div",{className:"flex h-48 items-center justify-center rounded-lg border bg-muted",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"Génération en cours..."})}):c[u]?s.jsx("pre",{className:"max-h-96 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-sm whitespace-pre-wrap break-words",children:c[u]})}):s.jsx("div",{className:"flex h-48 items-center justify-center rounded-lg border bg-muted",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"Cliquez sur l'onglet pour générer le code"})})})]})},u))]})})]})}const vt=[{format:"zip",label:"Archive ZIP",description:"Images converties + fichiers de métadonnées",icon:s.jsx(ts,{className:"h-5 w-5"})},{format:"csv",label:"Fichier CSV",description:"Métadonnées SEO au format tableur",icon:s.jsx(Xs,{className:"h-5 w-5"})},{format:"json",label:"Fichier JSON",description:"Données structurées pour intégration CMS",icon:s.jsx(be,{className:"h-5 w-5"})},{format:"html",label:"Snippets HTML",description:"Balises <img> et <picture> prêtes à copier",icon:s.jsx(Hs,{className:"h-5 w-5"})}];function bt({batch:t,className:e}){const[l,r]=d.useState(null),a=d.useCallback(async o=>{r(o);try{const n=`/api/optiseo/export/${t.id}/${o}`;if(o!=="json"){const x=document.createElement("a");x.href=n,x.download=`optiseo-${t.id}.${o==="html"?"html":o}`,document.body.appendChild(x),x.click(),document.body.removeChild(x)}else window.open(n,"_blank")}catch(n){console.error("Export error:",n)}finally{r(null)}},[t.id]),c=t.images?.filter(o=>o.status==="completed").length??0,i=t.images?.reduce((o,n)=>n.size_saved&&n.size_saved>0?o+n.size_saved:o,0)??0;return s.jsxs("div",{className:Fe("space-y-6",e),children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[s.jsx(N,{children:s.jsxs(y,{className:"pt-4",children:[s.jsx("p",{className:"text-2xl font-bold",children:c}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Images converties"})]})}),s.jsx(N,{children:s.jsxs(y,{className:"pt-4",children:[s.jsx("p",{className:"text-2xl font-bold",children:i>0?Nt(i):"—"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Espace économisé"})]})}),s.jsx(N,{children:s.jsxs(y,{className:"pt-4",children:[s.jsx("p",{className:"text-2xl font-bold",children:t.settings?.format?.toUpperCase()??"—"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Format de sortie"})]})}),s.jsx(N,{children:s.jsxs(y,{className:"pt-4",children:[s.jsxs("p",{className:"text-2xl font-bold",children:[t.settings?.quality??80,"%"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Qualité"})]})})]}),s.jsxs(N,{children:[s.jsxs(S,{children:[s.jsx(T,{children:"Télécharger vos images"}),s.jsx(ke,{children:"Choisissez le format d'export adapté à vos besoins"})]}),s.jsx(y,{children:s.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:vt.map(o=>s.jsxs(L,{variant:"outline",className:"h-auto flex-col items-start gap-2 p-4 text-left",onClick:()=>a(o.format),disabled:l!==null,children:[s.jsxs("div",{className:"flex w-full items-center gap-3",children:[l===o.format?s.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-primary border-t-transparent"}):o.icon,s.jsx("span",{className:"font-medium",children:o.label})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:o.description})]},o.format))})})]}),t.keywords&&t.keywords.length>0&&s.jsxs(N,{children:[s.jsx(S,{children:s.jsx(T,{className:"text-base",children:"Mots-clés utilisés"})}),s.jsx(y,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:t.keywords.map((o,n)=>s.jsx("span",{className:"rounded-full bg-muted px-3 py-1 text-sm",children:o},n))})})]})]})}function Nt(t){if(t===0)return"0 B";const e=1024,l=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(1))+" "+l[r]}const is={"favicon-16x16":{label:"16×16",description:"Onglet navigateur"},"favicon-32x32":{label:"32×32",description:"Raccourci bureau"},"apple-touch-icon":{label:"180×180",description:"Apple Touch Icon"},"android-chrome-192x192":{label:"192×192",description:"PWA Android"},"android-chrome-512x512":{label:"512×512",description:"PWA Splash"},"mstile-150x150":{label:"150×150",description:"Windows Tile"}};function yt(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:`${(t/(1024*1024)).toFixed(1)} MB`}function wt({image:t,className:e}){const[l,r]=d.useState(null),[a,c]=d.useState(!1),[i,o]=d.useState(!1),[n,x]=d.useState(null),[h,m]=d.useState(null),p=t.favicons&&t.favicons.length>0,j=d.useCallback(async()=>{if(!l){c(!0),m(null);try{const[f,_]=await Promise.all([ye.get(`/api/optiseo/images/${t.id}/favicons`),ye.get(`/api/optiseo/images/${t.id}/favicons/html`)]);r({favicons:f.data.favicons,html_relative:_.data.html_relative,html_absolute:_.data.html_absolute,manifest:_.data.manifest})}catch(f){console.error("Failed to load favicons:",f),m("Erreur lors du chargement des favicons")}finally{c(!1)}}},[t.id,l]),w=d.useCallback(async()=>{o(!0),m(null);try{await ye.post(`/api/optiseo/images/${t.id}/favicons`),r(null),await j()}catch(f){f.response?.status===429?m("Limite quotidienne atteinte. Passez à Pro pour un accès illimité."):m("Erreur lors de la génération des favicons")}finally{o(!1)}},[t.id,j]),u=d.useCallback(()=>{window.open(`/api/optiseo/images/${t.id}/favicons/download`,"_blank")},[t.id]),g=d.useCallback(async(f,_)=>{try{await navigator.clipboard.writeText(f),x(_),setTimeout(()=>x(null),2e3)}catch(C){console.error("Failed to copy:",C)}},[]);return d.useState(()=>{p&&j()}),s.jsxs(N,{className:e,children:[s.jsxs(S,{children:[s.jsxs(T,{className:"flex items-center gap-2",children:[s.jsx(Ne,{className:"h-5 w-5"}),"Favicons & Icônes App"]}),s.jsx(ke,{children:"Générez tous les formats de favicons pour votre site web et PWA"})]}),s.jsx(y,{children:p?a?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):l?s.jsxs(Ge,{defaultValue:"preview",className:"w-full",children:[s.jsxs(He,{className:"grid w-full grid-cols-3",children:[s.jsx(D,{value:"preview",children:"Aperçu"}),s.jsx(D,{value:"html",children:"Code HTML"}),s.jsx(D,{value:"manifest",children:"Manifest"})]}),s.jsxs(G,{value:"preview",className:"mt-4 space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:l.favicons.map(f=>s.jsxs("div",{className:"flex flex-col items-center rounded-lg border p-4",children:[s.jsx("img",{src:f.url,alt:f.size_name,className:"mb-2 rounded",style:{width:Math.min(f.size,64),height:Math.min(f.size,64)}}),s.jsx("p",{className:"text-sm font-medium",children:is[f.size_name]?.label||f.size_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:is[f.size_name]?.description}),s.jsx(K,{variant:"outline",className:"mt-1 text-xs",children:yt(f.file_size)})]},f.id))}),s.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[s.jsxs(L,{onClick:u,variant:"outline",className:"gap-2",children:[s.jsx(ts,{className:"h-4 w-4"}),"Télécharger ZIP"]}),s.jsxs(L,{onClick:w,variant:"outline",disabled:i,className:"gap-2",children:[i?s.jsx(Me,{className:"h-4 w-4 animate-spin"}):s.jsx(Ne,{className:"h-4 w-4"}),"Regénérer"]})]})]}),s.jsxs(G,{value:"html",className:"mt-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium",children:"Code HTML à ajouter dans <head>"}),s.jsx(L,{variant:"outline",size:"sm",onClick:()=>g(l.html_relative,"html"),className:"gap-2",children:n==="html"?s.jsxs(s.Fragment,{children:[s.jsx(we,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ce,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("pre",{className:"max-h-64 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-sm whitespace-pre-wrap break-words",children:l.html_relative})})]}),s.jsxs("div",{className:"rounded-lg border bg-amber-50 dark:bg-amber-950/20 p-3 text-sm",children:[s.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Instructions :"}),s.jsxs("ol",{className:"mt-2 list-decimal list-inside space-y-1 text-amber-700 dark:text-amber-300",children:[s.jsx("li",{children:"Téléchargez le fichier ZIP"}),s.jsx("li",{children:"Extrayez tous les fichiers à la racine de votre site"}),s.jsx("li",{children:"Ajoutez le code HTML ci-dessus dans votre <head>"})]})]})]}),s.jsx(G,{value:"manifest",className:"mt-4 space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium",children:"site.webmanifest (PWA)"}),s.jsx(L,{variant:"outline",size:"sm",onClick:()=>g(JSON.stringify(l.manifest,null,2),"manifest"),className:"gap-2",children:n==="manifest"?s.jsxs(s.Fragment,{children:[s.jsx(we,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ce,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("pre",{className:"max-h-64 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-sm whitespace-pre-wrap break-words",children:JSON.stringify(l.manifest,null,2)})})]})})]}):null:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(Ne,{className:"mb-4 h-12 w-12 text-muted-foreground"}),s.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"Aucun favicon généré pour cette image"}),s.jsx(L,{onClick:w,disabled:i,className:"gap-2",children:i?s.jsxs(s.Fragment,{children:[s.jsx(Me,{className:"h-4 w-4 animate-spin"}),"Génération en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ne,{className:"h-4 w-4"}),"Générer les favicons"]})}),h&&s.jsx("p",{className:"mt-4 text-sm text-destructive",children:h})]})})]})}const Ct={excellent:"bg-green-500",good:"bg-green-400","needs-improvement":"bg-yellow-500",poor:"bg-red-500"},_t={excellent:"Excellent",good:"Bon","needs-improvement":"À améliorer",poor:"Mauvais"};function kt({image:t,isPro:e=!1,className:l}){const[r,a]=d.useState(null),[c,i]=d.useState(!1),[o,n]=d.useState(null);return d.useEffect(()=>{if(!e)return;(async()=>{i(!0),n(null);try{const h=await ye.get(`/api/optiseo/images/${t.id}/performance`);a(h.data.analysis)}catch(h){n(h.response?.data?.message||"Erreur lors de l'analyse")}finally{i(!1)}})()},[t.id,e]),e?c?s.jsxs(N,{className:l,children:[s.jsx(S,{children:s.jsxs(T,{className:"flex items-center gap-2",children:[s.jsx(Se,{className:"h-5 w-5"}),"Analyse de performance"]})}),s.jsx(y,{children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Me,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})]}):o||!r?s.jsxs(N,{className:l,children:[s.jsx(S,{children:s.jsxs(T,{className:"flex items-center gap-2",children:[s.jsx(Se,{className:"h-5 w-5"}),"Analyse de performance"]})}),s.jsx(y,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(Qe,{className:"mb-4 h-12 w-12 text-destructive/50"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:o||"Analyse non disponible"})]})})]}):s.jsxs(N,{className:l,children:[s.jsxs(S,{children:[s.jsxs(T,{className:"flex items-center gap-2",children:[s.jsx(Se,{className:"h-5 w-5"}),"Analyse de performance"]}),s.jsx(ke,{children:"Impact sur les Core Web Vitals et recommandations"})]}),s.jsxs(y,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"relative h-24 w-24",children:[s.jsxs("svg",{className:"h-24 w-24 -rotate-90 transform",children:[s.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-muted"}),s.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:`${r.score/100*251.2} 251.2`,className:r.score>=90?"text-green-500":r.score>=70?"text-green-400":r.score>=50?"text-yellow-500":"text-red-500"})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("span",{className:"text-2xl font-bold",children:r.score})})]}),s.jsxs("div",{children:[s.jsx(K,{variant:"secondary",className:`${Ct[r.rating]} text-white`,children:_t[r.rating]}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Score de performance global basé sur la taille, le format et les optimisations"})]})]}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"LCP Impact"}),s.jsxs(K,{variant:"outline",className:r.lcp_impact.rating==="good"?"border-green-500 text-green-600":r.lcp_impact.rating==="needs-improvement"?"border-yellow-500 text-yellow-600":"border-red-500 text-red-600",children:[r.lcp_impact.estimated_ms," ms"]})]}),s.jsx(rs,{value:Math.min(100,r.lcp_impact.estimated_ms/r.lcp_impact.threshold_poor*100),className:"h-2"}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:r.lcp_impact.rating==="good"?"Bon temps de chargement":r.lcp_impact.rating==="needs-improvement"?"Temps de chargement acceptable":"Temps de chargement trop long"})]}),s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"CLS Impact"}),s.jsx(K,{variant:"outline",className:r.cls_impact.rating==="good"?"border-green-500 text-green-600":"border-red-500 text-red-600",children:r.cls_impact.score.toFixed(2)})]}),s.jsx(rs,{value:Math.min(100,r.cls_impact.score*400),className:"h-2"}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:r.cls_impact.reason})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-3 text-sm font-medium",children:"Temps de chargement estimé"}),s.jsx("div",{className:"grid gap-2 sm:grid-cols-3",children:Object.entries(r.load_times).map(([x,h])=>s.jsxs("div",{className:"flex items-center justify-between rounded-lg border px-3 py-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:h.label}),s.jsxs("span",{className:"text-sm font-medium",children:[h.time_ms," ms"]})]},x))})]}),r.recommendations.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"mb-3 text-sm font-medium",children:"Recommandations"}),s.jsx("div",{className:"space-y-2",children:r.recommendations.map((x,h)=>s.jsx("div",{className:`rounded-lg border p-3 ${x.priority==="high"?"border-red-200 bg-red-50 dark:border-red-900 dark:bg-red-950":x.priority==="medium"?"border-yellow-200 bg-yellow-50 dark:border-yellow-900 dark:bg-yellow-950":"border-muted bg-muted/30"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[x.priority==="high"?s.jsx(Qe,{className:"mt-0.5 h-4 w-4 text-red-500"}):x.priority==="medium"?s.jsx(Qe,{className:"mt-0.5 h-4 w-4 text-yellow-500"}):s.jsx($s,{className:"mt-0.5 h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:x.title}),s.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:x.description})]})]})},h))})]})]})]}):s.jsxs(N,{className:l,children:[s.jsx(S,{children:s.jsxs(T,{className:"flex items-center gap-2",children:[s.jsx(Se,{className:"h-5 w-5"}),"Analyse de performance"]})}),s.jsx(y,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(zs,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),s.jsx("p",{className:"mb-2 font-medium",children:"Fonctionnalité Pro"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"L'analyse de performance est réservée aux utilisateurs Pro"})]})})]})}var St=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Te=t=>{let e=0;for(let l=0;l<t.length;l++){let r=t[l],a=St.indexOf(r);e=e*83+a}return e},Xe=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Ye=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},Tt=t=>t<0?-1:1,es=(t,e)=>Tt(t)*Math.pow(Math.abs(t),e),os=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},Mt=t=>{if(!t||t.length<6)throw new os("The blurhash string must be at least 6 characters");let e=Te(t[0]),l=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*l)throw new os(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*l}`)},Ft=t=>{let e=t>>16,l=t>>8&255,r=t&255;return[Xe(e),Xe(l),Xe(r)]},Pt=(t,e)=>{let l=Math.floor(t/361),r=Math.floor(t/19)%19,a=t%19;return[es((l-9)/9,2)*e,es((r-9)/9,2)*e,es((a-9)/9,2)*e]},It=(t,e,l,r)=>{Mt(t),r=r|1;let a=Te(t[0]),c=Math.floor(a/9)+1,i=a%9+1,o=(Te(t[1])+1)/166,n=new Array(i*c);for(let m=0;m<n.length;m++)if(m===0){let p=Te(t.substring(2,6));n[m]=Ft(p)}else{let p=Te(t.substring(4+m*2,6+m*2));n[m]=Pt(p,o*r)}let x=e*4,h=new Uint8ClampedArray(x*l);for(let m=0;m<l;m++)for(let p=0;p<e;p++){let j=0,w=0,u=0;for(let C=0;C<c;C++)for(let M=0;M<i;M++){let F=Math.cos(Math.PI*p*M/e)*Math.cos(Math.PI*m*C/l),P=n[M+C*i];j+=P[0]*F,w+=P[1]*F,u+=P[2]*F}let g=Ye(j),f=Ye(w),_=Ye(u);h[4*p+0+m*x]=g,h[4*p+1+m*x]=f,h[4*p+2+m*x]=_,h[4*p+3+m*x]=255}return h},Et=It;function $t(t){const e=_e.c(55),{image:l,className:r}=t,[a,c]=d.useState(!1),[i,o]=d.useState(null),n=l.performance,x=n?.blur_hash||n?.dominant_color;let h;e[0]!==n?(h=()=>{if(n?.blur_hash)try{const z=Et(n.blur_hash,32,32),I=document.createElement("canvas");I.width=32,I.height=32;const A=I.getContext("2d");if(A){const W=A.createImageData(32,32);W.data.set(z),A.putImageData(W,0,0),o(I.toDataURL())}}catch(z){console.error("Failed to decode BlurHash:",z)}},e[0]=n,e[1]=h):h=e[1];const m=n?.blur_hash;let p;if(e[2]!==m?(p=[m],e[2]=m,e[3]=p):p=e[3],d.useEffect(h,p),!x){let z;e[4]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(S,{children:s.jsxs(T,{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-5 w-5"}),"Placeholders & Couleurs"]})}),e[4]=z):z=e[4];let I;e[5]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(y,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(Ne,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les données de performance ne sont pas encore générées pour cette image"})]})}),e[5]=I):I=e[5];let A;return e[6]!==r?(A=s.jsxs(N,{className:r,children:[z,I]}),e[6]=r,e[7]=A):A=e[7],A}let j;e[8]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsxs(S,{children:[s.jsxs(T,{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-5 w-5"}),"Placeholders & Couleurs"]}),s.jsx(ke,{children:"Utilisez ces données pour améliorer le chargement perçu"})]}),e[8]=j):j=e[8];let w;e[9]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("span",{className:"text-sm font-medium",children:"Comparaison"}),e[9]=w):w=e[9];let u;e[10]!==a?(u=()=>c(!a),e[10]=a,e[11]=u):u=e[11];let g;e[12]!==a?(g=a?s.jsxs(s.Fragment,{children:[s.jsx(Zs,{className:"h-4 w-4"}),"Voir placeholder"]}):s.jsxs(s.Fragment,{children:[s.jsx(Us,{className:"h-4 w-4"}),"Voir original"]}),e[12]=a,e[13]=g):g=e[13];let f;e[14]!==u||e[15]!==g?(f=s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[w,s.jsx(L,{variant:"outline",size:"sm",onClick:u,className:"gap-2",children:g})]}),e[14]=u,e[15]=g,e[16]=f):f=e[16];let _;e[17]!==l.converted?.url||e[18]!==l.original||e[19]!==n||e[20]!==a?(_=n?.lqip_data_uri&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"LQIP (Low Quality Image Placeholder)"}),s.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg border bg-muted",children:s.jsx("img",{src:a?l.converted?.url??l.original.url??"":n.lqip_data_uri,alt:"LQIP preview",className:"h-full w-full object-cover",style:a?void 0:{filter:"blur(10px)",transform:"scale(1.1)"}})})]}),e[17]=l.converted?.url,e[18]=l.original,e[19]=n,e[20]=a,e[21]=_):_=e[21];let C;e[22]!==i||e[23]!==l.converted?.url||e[24]!==l.original||e[25]!==a?(C=i&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"BlurHash"}),s.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg border bg-muted",children:s.jsx("img",{src:a?l.converted?.url??l.original.url??"":i,alt:"BlurHash preview",className:"h-full w-full object-cover",style:a?void 0:{filter:"blur(0px)"}})})]}),e[22]=i,e[23]=l.converted?.url,e[24]=l.original,e[25]=a,e[26]=C):C=e[26];let M;e[27]!==C||e[28]!==_?(M=s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[_,C]}),e[27]=C,e[28]=_,e[29]=M):M=e[29];let F;e[30]!==M||e[31]!==f?(F=s.jsxs("div",{children:[f,M]}),e[30]=M,e[31]=f,e[32]=F):F=e[32];let P;e[33]!==n?(P=n?.blur_hash&&s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm font-medium",children:"BlurHash"}),s.jsx("code",{className:"block rounded-lg border bg-muted p-3 text-xs break-all",children:n.blur_hash})]}),e[33]=n,e[34]=P):P=e[34];let R;e[35]!==n?(R=n?.dominant_color&&s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm font-medium",children:"Couleur dominante"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg border shadow-sm",style:{backgroundColor:n.dominant_color}}),s.jsx("code",{className:"text-sm",children:n.dominant_color})]})]}),e[35]=n,e[36]=R):R=e[36];let B;e[37]!==n?(B=n?.color_palette&&n.color_palette.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm font-medium",children:"Palette de couleurs"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.color_palette.map(zt)})]}),e[37]=n,e[38]=B):B=e[38];let V;e[39]!==n?.has_transparency?(V=n?.has_transparency&&s.jsx(K,{variant:"secondary",children:"Transparence"}),e[39]=n?.has_transparency,e[40]=V):V=e[40];let E;e[41]!==n?(E=n?.aspect_ratio&&s.jsxs(K,{variant:"outline",children:["Ratio: ",n.aspect_ratio]}),e[41]=n,e[42]=E):E=e[42];let O;e[43]!==V||e[44]!==E?(O=s.jsxs("div",{className:"flex flex-wrap gap-2",children:[V,E]}),e[43]=V,e[44]=E,e[45]=O):O=e[45];let $;e[46]!==F||e[47]!==P||e[48]!==R||e[49]!==B||e[50]!==O?($=s.jsxs(y,{className:"space-y-6",children:[F,P,R,B,O]}),e[46]=F,e[47]=P,e[48]=R,e[49]=B,e[50]=O,e[51]=$):$=e[51];let H;return e[52]!==r||e[53]!==$?(H=s.jsxs(N,{className:r,children:[j,$]}),e[52]=r,e[53]=$,e[54]=H):H=e[54],H}function zt(t,e){return s.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-muted/50 px-2 py-1",children:[s.jsx("div",{className:"h-6 w-6 rounded border shadow-sm",style:{backgroundColor:t}}),s.jsx("code",{className:"text-xs",children:t})]},e)}function At({image:t,isPro:e=!1,className:l}){const[r,a]=d.useState(null),[c,i]=d.useState(!1),[o,n]=d.useState(null),[x,h]=d.useState(null);d.useEffect(()=>{if(!e)return;(async()=>{i(!0),n(null);try{const j=await ye.get(`/api/optiseo/images/${t.id}/schema`,{params:{base_url:window.location.origin}});a(j.data.schemas)}catch(j){n(j.response?.data?.message||"Erreur lors du chargement")}finally{i(!1)}})()},[t.id,e]);const m=d.useCallback(async(p,j)=>{try{await navigator.clipboard.writeText(p),h(j),setTimeout(()=>h(null),2e3)}catch(w){console.error("Failed to copy:",w)}},[]);return e?c?s.jsxs(N,{className:l,children:[s.jsx(S,{children:s.jsxs(T,{className:"flex items-center gap-2",children:[s.jsx(be,{className:"h-5 w-5"}),"Schema Markup"]})}),s.jsx(y,{children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Me,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})]}):o||!r?s.jsxs(N,{className:l,children:[s.jsx(S,{children:s.jsxs(T,{className:"flex items-center gap-2",children:[s.jsx(be,{className:"h-5 w-5"}),"Schema Markup"]})}),s.jsx(y,{children:s.jsx("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:o||"Schema non disponible"})})})]}):s.jsxs(N,{className:l,children:[s.jsxs(S,{children:[s.jsxs(T,{className:"flex items-center gap-2",children:[s.jsx(be,{className:"h-5 w-5"}),"Schema Markup"]}),s.jsx(ke,{children:"Données structurées pour les moteurs de recherche et réseaux sociaux"})]}),s.jsx(y,{children:s.jsxs(Ge,{defaultValue:"jsonld",children:[s.jsxs(He,{className:"grid w-full grid-cols-3",children:[s.jsxs(D,{value:"jsonld",className:"gap-2",children:[s.jsx(be,{className:"h-4 w-4"}),"JSON-LD"]}),s.jsxs(D,{value:"opengraph",className:"gap-2",children:[s.jsx(As,{className:"h-4 w-4"}),"Open Graph"]}),s.jsxs(D,{value:"twitter",className:"gap-2",children:[s.jsx(st,{className:"h-4 w-4"}),"Twitter"]})]}),s.jsxs(G,{value:"jsonld",className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez ce script dans le <head> de votre page"}),s.jsx(L,{variant:"outline",size:"sm",onClick:()=>m(r.json_ld_script,"jsonld"),className:"gap-2",children:x==="jsonld"?s.jsxs(s.Fragment,{children:[s.jsx(we,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ce,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(r.json_ld,null,2)})})]}),s.jsxs(G,{value:"opengraph",className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Meta tags Open Graph pour Facebook, LinkedIn, etc."}),s.jsx(L,{variant:"outline",size:"sm",onClick:()=>m(r.open_graph_html,"og"),className:"gap-2",children:x==="og"?s.jsxs(s.Fragment,{children:[s.jsx(we,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ce,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-xs whitespace-pre-wrap",children:r.open_graph_html})}),s.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4",children:[s.jsx("p",{className:"mb-2 text-xs font-medium text-muted-foreground",children:"Aperçu"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("img",{src:t.converted?.url??t.original.url??"",alt:t.seo.alt_text??"",className:"h-16 w-16 rounded object-cover"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"truncate text-sm font-medium",children:r.open_graph["og:image:alt"]||t.seo.alt_text}),s.jsx("p",{className:"truncate text-xs text-muted-foreground",children:t.converted?.url??t.original.url})]})]})]})]}),s.jsxs(G,{value:"twitter",className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Meta tags Twitter Card"}),s.jsx(L,{variant:"outline",size:"sm",onClick:()=>m(r.twitter_card_html,"twitter"),className:"gap-2",children:x==="twitter"?s.jsxs(s.Fragment,{children:[s.jsx(we,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ce,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-xs whitespace-pre-wrap",children:r.twitter_card_html})})]})]})})]}):s.jsxs(N,{className:l,children:[s.jsx(S,{children:s.jsxs(T,{className:"flex items-center gap-2",children:[s.jsx(be,{className:"h-5 w-5"}),"Schema Markup"]})}),s.jsx(y,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(ss,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),s.jsx("p",{className:"mb-2 font-medium",children:"Fonctionnalité Pro"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Le schema markup est réservé aux utilisateurs Pro"})]})})]})}function ja(t){const e=_e.c(132),{batchId:l,initialBatch:r}=t,{t:a}=Rs(),{batch:c,pollProgress:i}=Ls(),{auth:o}=ws().props,n=o?.isPro??!1,[x,h]=d.useState(null);let m,p;e[0]!==l||e[1]!==r||e[2]!==i?(m=()=>{r||i(l)},p=[l,r,i],e[0]=l,e[1]=r,e[2]=i,e[3]=m,e[4]=p):(m=e[3],p=e[4]),d.useEffect(m,p);const j=c??r,w=Ot;let u;e[5]!==l?(u=()=>{cs.visit(`/convert/${l}`)},e[5]=l,e[6]=u):u=e[6];const g=u;if(!j){let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx(ls,{className:"mx-auto h-8 w-8 animate-spin text-muted-foreground"}),e[7]=b):b=e[7];let q;e[8]!==a?(q=a("result.loading"),e[8]=a,e[9]=q):q=e[9];let k;return e[10]!==q?(k=s.jsx("div",{className:"flex min-h-screen items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[b,s.jsx("p",{className:"mt-4 text-muted-foreground",children:q})]})}),e[10]=q,e[11]=k):k=e[11],k}let f,_,C,M,F,P,R,B,V,E,O,$,H,z,I,A,W,J;if(e[12]!==j||e[13]!==g||e[14]!==n||e[15]!==x||e[16]!==a){const b=j.images?.filter(Vt)??[],q=j.images?.filter(Bt)??[],k=x??b[0]??null;e[35]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(ks,{page:"result",noindex:!0}),e[35]=$):$=e[35],O="min-h-screen bg-gradient-to-b from-background to-muted/30",V="container mx-auto px-4 py-8";let Ee;e[36]===Symbol.for("react.memo_cache_sentinel")?(Ee=s.jsx(Bs,{className:"mr-2 h-4 w-4"}),e[36]=Ee):Ee=e[36];let re;e[37]!==a?(re=a("result.backToSettings"),e[37]=a,e[38]=re):re=e[38];let le;e[39]!==g||e[40]!==re?(le=s.jsxs(L,{variant:"ghost",onClick:g,children:[Ee,re]}),e[39]=g,e[40]=re,e[41]=le):le=e[41];let $e;e[42]===Symbol.for("react.memo_cache_sentinel")?($e=s.jsx(Vs,{className:"mr-2 h-4 w-4"}),e[42]=$e):$e=e[42];let ne;e[43]!==a?(ne=a("result.newConversion"),e[43]=a,e[44]=ne):ne=e[44];let ie;e[45]!==ne?(ie=s.jsxs(L,{variant:"outline",onClick:w,children:[$e,ne]}),e[45]=ne,e[46]=ie):ie=e[46],e[47]!==le||e[48]!==ie?(E=s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[le,ie]}),e[47]=le,e[48]=ie,e[49]=E):E=e[49],R="mx-auto max-w-6xl space-y-8";let oe;e[50]!==a?(oe=a("result.title"),e[50]=a,e[51]=oe):oe=e[51];let ze;e[52]!==oe?(ze=s.jsx("h1",{className:"mb-2 text-3xl font-bold",children:oe}),e[52]=oe,e[53]=ze):ze=e[53],B=s.jsxs("div",{className:"text-center",children:[ze,s.jsx("p",{className:"text-muted-foreground",children:a("result.subtitle",{count:b.length})})]}),_=Ge,A="export",W="w-full";let Ae;e[54]===Symbol.for("react.memo_cache_sentinel")?(Ae=s.jsx(ts,{className:"h-4 w-4"}),e[54]=Ae):Ae=e[54];let ce;e[55]!==a?(ce=a("result.tabs.download"),e[55]=a,e[56]=ce):ce=e[56];let de;e[57]!==ce?(de=s.jsxs(D,{value:"export",className:"gap-2",children:[Ae,s.jsx("span",{className:"hidden sm:inline",children:ce})]}),e[57]=ce,e[58]=de):de=e[58];let Le;e[59]===Symbol.for("react.memo_cache_sentinel")?(Le=s.jsx(Os,{className:"h-4 w-4"}),e[59]=Le):Le=e[59];let me;e[60]!==a?(me=a("result.tabs.seo"),e[60]=a,e[61]=me):me=e[61];let xe;e[62]!==me?(xe=s.jsxs(D,{value:"seo",className:"gap-2",children:[Le,s.jsx("span",{className:"hidden sm:inline",children:me})]}),e[62]=me,e[63]=xe):xe=e[63];let Re;e[64]===Symbol.for("react.memo_cache_sentinel")?(Re=s.jsx(xs,{className:"h-4 w-4"}),e[64]=Re):Re=e[64];let ue;e[65]!==a?(ue=a("result.tabs.code"),e[65]=a,e[66]=ue):ue=e[66];let he;e[67]!==ue?(he=s.jsxs(D,{value:"code",className:"gap-2",children:[Re,s.jsx("span",{className:"hidden sm:inline",children:ue})]}),e[67]=ue,e[68]=he):he=e[68];let Be;e[69]===Symbol.for("react.memo_cache_sentinel")?(Be=s.jsx(Ne,{className:"h-4 w-4"}),e[69]=Be):Be=e[69];let pe;e[70]!==a?(pe=a("result.tabs.favicons"),e[70]=a,e[71]=pe):pe=e[71];let fe;e[72]!==pe?(fe=s.jsxs(D,{value:"favicons",className:"gap-2",children:[Be,s.jsx("span",{className:"hidden sm:inline",children:pe})]}),e[72]=pe,e[73]=fe):fe=e[73];let Ve;e[74]===Symbol.for("react.memo_cache_sentinel")?(Ve=s.jsx(Se,{className:"h-4 w-4"}),e[74]=Ve):Ve=e[74];let ge;e[75]!==a?(ge=a("result.tabs.performance"),e[75]=a,e[76]=ge):ge=e[76];let je;e[77]!==ge?(je=s.jsxs(D,{value:"performance",className:"gap-2",children:[Ve,s.jsx("span",{className:"hidden sm:inline",children:ge})]}),e[77]=ge,e[78]=je):je=e[78],e[79]!==de||e[80]!==xe||e[81]!==he||e[82]!==fe||e[83]!==je?(J=s.jsxs(He,{className:"grid w-full grid-cols-5",children:[de,xe,he,fe,je]}),e[79]=de,e[80]=xe,e[81]=he,e[82]=fe,e[83]=je,e[84]=J):J=e[84];let ve;e[85]!==j?(ve=s.jsx(bt,{batch:j}),e[85]=j,e[86]=ve):ve=e[86];const qe=b.length>0&&s.jsxs(N,{children:[s.jsx(S,{children:s.jsx(T,{children:a("result.convertedImages")})}),s.jsx(y,{children:s.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:b.map(Rt)})})]}),We=q.length>0&&s.jsxs(N,{className:"border-destructive/50",children:[s.jsx(S,{children:s.jsx(T,{className:"text-destructive",children:a("result.failedImages",{count:q.length})})}),s.jsx(y,{children:s.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:q.map(Lt)})})]});e[87]!==ve||e[88]!==qe||e[89]!==We?(C=s.jsxs(G,{value:"export",className:"mt-6 space-y-6",children:[ve,qe,We]}),e[87]=ve,e[88]=qe,e[89]=We,e[90]=C):C=e[90];const Ze=b.length>0&&s.jsxs(s.Fragment,{children:[b.length>1&&s.jsxs(N,{children:[s.jsx(S,{children:s.jsx(T,{className:"text-base",children:a("result.selectImage")})}),s.jsx(y,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(v=>s.jsx("button",{onClick:()=>h(v),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(x?.id??b[0]?.id)===v.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:s.jsx("img",{src:v.converted?.url??v.original.url??"",alt:v.seo.alt_text??"",className:"h-16 w-16 object-cover"})},v.id))})})]}),s.jsxs(N,{children:[s.jsx(S,{children:s.jsx(T,{children:a("result.seoGenerated")})}),s.jsx(y,{children:k&&s.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4",children:[s.jsx("p",{className:"mb-2 font-medium text-sm",children:k.seo.filename}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"alt:"})," ",s.jsxs("span",{className:"text-foreground",children:['"',k.seo.alt_text,'"']})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"title:"})," ",s.jsxs("span",{className:"text-foreground",children:['"',k.seo.title_text,'"']})]}),k.seo.meta_description&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"meta:"})," ",s.jsxs("span",{className:"text-foreground",children:['"',k.seo.meta_description,'"']})]})]})]})})]}),k&&s.jsx(At,{image:k,isPro:n})]});e[91]!==Ze?(M=s.jsx(G,{value:"seo",className:"mt-6 space-y-6",children:Ze}),e[91]=Ze,e[92]=M):M=e[92];const Je=b.length>0&&s.jsxs(s.Fragment,{children:[b.length>1&&s.jsxs(N,{children:[s.jsx(S,{children:s.jsx(T,{className:"text-base",children:a("result.selectImage")})}),s.jsx(y,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(v=>s.jsx("button",{onClick:()=>h(v),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(x?.id??b[0]?.id)===v.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:s.jsx("img",{src:v.converted?.url??v.original.url??"",alt:v.seo.alt_text??"",className:"h-16 w-16 object-cover"})},v.id))})})]}),k&&s.jsx(jt,{image:k,isPro:n})]});e[93]!==Je?(F=s.jsx(G,{value:"code",className:"mt-6 space-y-6",children:Je}),e[93]=Je,e[94]=F):F=e[94];const Ue=b.length>0&&s.jsxs(s.Fragment,{children:[b.length>1&&s.jsxs(N,{children:[s.jsx(S,{children:s.jsx(T,{className:"text-base",children:a("result.selectImage")})}),s.jsx(y,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(v=>s.jsx("button",{onClick:()=>h(v),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(x?.id??b[0]?.id)===v.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:s.jsx("img",{src:v.converted?.url??v.original.url??"",alt:v.seo.alt_text??"",className:"h-16 w-16 object-cover"})},v.id))})})]}),k&&s.jsx(wt,{image:k})]});e[95]!==Ue?(P=s.jsx(G,{value:"favicons",className:"mt-6 space-y-6",children:Ue}),e[95]=Ue,e[96]=P):P=e[96],f=G,H="performance",z="mt-6 space-y-6",I=b.length>0&&s.jsxs(s.Fragment,{children:[b.length>1&&s.jsxs(N,{children:[s.jsx(S,{children:s.jsx(T,{className:"text-base",children:a("result.selectImage")})}),s.jsx(y,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(v=>s.jsx("button",{onClick:()=>h(v),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(x?.id??b[0]?.id)===v.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:s.jsx("img",{src:v.converted?.url??v.original.url??"",alt:v.seo.alt_text??"",className:"h-16 w-16 object-cover"})},v.id))})})]}),k&&s.jsx($t,{image:k}),k&&s.jsx(kt,{image:k,isPro:n})]}),e[12]=j,e[13]=g,e[14]=n,e[15]=x,e[16]=a,e[17]=f,e[18]=_,e[19]=C,e[20]=M,e[21]=F,e[22]=P,e[23]=R,e[24]=B,e[25]=V,e[26]=E,e[27]=O,e[28]=$,e[29]=H,e[30]=z,e[31]=I,e[32]=A,e[33]=W,e[34]=J}else f=e[17],_=e[18],C=e[19],M=e[20],F=e[21],P=e[22],R=e[23],B=e[24],V=e[25],E=e[26],O=e[27],$=e[28],H=e[29],z=e[30],I=e[31],A=e[32],W=e[33],J=e[34];let Q;e[97]!==f||e[98]!==H||e[99]!==z||e[100]!==I?(Q=s.jsx(f,{value:H,className:z,children:I}),e[97]=f,e[98]=H,e[99]=z,e[100]=I,e[101]=Q):Q=e[101];let X;e[102]!==_||e[103]!==C||e[104]!==M||e[105]!==F||e[106]!==P||e[107]!==Q||e[108]!==A||e[109]!==W||e[110]!==J?(X=s.jsxs(_,{defaultValue:A,className:W,children:[J,C,M,F,P,Q]}),e[102]=_,e[103]=C,e[104]=M,e[105]=F,e[106]=P,e[107]=Q,e[108]=A,e[109]=W,e[110]=J,e[111]=X):X=e[111];let Pe;e[112]===Symbol.for("react.memo_cache_sentinel")?(Pe=s.jsx(ls,{className:"h-5 w-5"}),e[112]=Pe):Pe=e[112];let Y;e[113]!==a?(Y=a("result.convertMore"),e[113]=a,e[114]=Y):Y=e[114];let ee;e[115]!==Y?(ee=s.jsx("div",{className:"text-center",children:s.jsxs(L,{size:"lg",onClick:w,className:"gap-2",children:[Pe,Y]})}),e[115]=Y,e[116]=ee):ee=e[116];let se;e[117]!==R||e[118]!==B||e[119]!==X||e[120]!==ee?(se=s.jsxs("div",{className:R,children:[B,X,ee]}),e[117]=R,e[118]=B,e[119]=X,e[120]=ee,e[121]=se):se=e[121];let te;e[122]!==V||e[123]!==E||e[124]!==se?(te=s.jsxs("div",{className:V,children:[E,se]}),e[122]=V,e[123]=E,e[124]=se,e[125]=te):te=e[125];let ae;e[126]!==O||e[127]!==te?(ae=s.jsx("div",{className:O,children:te}),e[126]=O,e[127]=te,e[128]=ae):ae=e[128];let Ie;return e[129]!==$||e[130]!==ae?(Ie=s.jsxs(s.Fragment,{children:[$,ae]}),e[129]=$,e[130]=ae,e[131]=Ie):Ie=e[131],Ie}function Lt(t){return s.jsx(ms,{image:t},t.id)}function Rt(t){return s.jsx(ms,{image:t},t.id)}function Bt(t){return t.status==="failed"}function Vt(t){return t.status==="completed"}function Ot(){cs.visit("/")}export{ja as default};
