import{r as d,j as e,c as ie,h as re,f as ls,e as qe}from"./app-Ca-1lP6U.js";import{c as W,d as ns,b as xe,e as is,B as L}from"./button-DQmxDJGb.js";import{S as os,a as cs}from"./seo-head-BsS9gMHC.js";import{b as y,C as k,a as S,d as oe,c as w}from"./card-CE_uWCMY.js";import{u as ds,c as Ie,P as ms}from"./index-TtGJoqWm.js";import{I as xs,R as us,c as We}from"./index-Clrh2rzt.js";import{u as hs,a as ps}from"./index-TMKe-ljc.js";import{I as Ze}from"./image-card-DWmghVCh.js";import{B as J}from"./badge-C6Gf6SGw.js";import{L as Le}from"./lock-D1IQ2MKe.js";import{C as fs}from"./crown-BMrbQBU-.js";import{C as le}from"./check-DN2gl3-u.js";import{D as Re}from"./download-BqGhB5xH.js";import{I as ae}from"./image-wosSS2DU.js";import{L as me}from"./loader-circle-oLLZgQFI.js";import{P as Be}from"./progress-YjwLjUeA.js";import{G as ce,C as gs}from"./gauge-CgsATsKo.js";import{Z as js}from"./zap-C1dzlNha.js";import{T as Ee}from"./triangle-alert-DbqmDJXV.js";import{G as vs}from"./globe-DXclfcd8.js";import{u as bs}from"./use-conversion-_rpsezZJ.js";import{R as Ve}from"./refresh-cw-E1Mwepes.js";import{A as Ns}from"./arrow-left-CMoEIKr7.js";import{H as ys}from"./house-sLjDbSlF.js";import{F as ws}from"./file-text-4EbC-Uoc.js";/* empty css            */import"./x-b3P3YIRf.js";import"./index-Bm2rkCA_.js";const Cs=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],Je=W("CodeXml",Cs);const _s=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],ks=W("Code",_s);const Ss=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ne=W("Copy",Ss);const Ts=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ms=W("EyeOff",Ts);const Fs=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ps=W("Eye",Fs);const Is=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],te=W("FileJson",Is);const Es=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],zs=W("FileSpreadsheet",Es);const $s=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],De=W("Palette",$s);const As=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],Ls=W("Twitter",As);function Rs(t,s=[]){let r=[];function a(o,c){const i=d.createContext(c),n=r.length;r=[...r,c];const x=m=>{const{scope:p,children:b,...N}=m,u=p?.[t]?.[n]||i,g=d.useMemo(()=>N,Object.values(N));return e.jsx(u.Provider,{value:g,children:b})};x.displayName=o+"Provider";function h(m,p){const b=p?.[t]?.[n]||i,N=d.useContext(b);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[x,h]}const l=()=>{const o=r.map(c=>d.createContext(c));return function(i){const n=i?.[t]||o;return d.useMemo(()=>({[`__scope${t}`]:{...i,[t]:n}}),[i,n])}};return l.scopeName=t,[a,Os(l,...s)]}function Os(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const a=t.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(o){const c=a.reduce((i,{useScope:n,scopeName:x})=>{const m=n(o)[`__scope${x}`];return{...i,...m}},{});return d.useMemo(()=>({[`__scope${s.scopeName}`]:c}),[c])}};return r.scopeName=s.scopeName,r}function Bs(t){const s=Vs(t),r=d.forwardRef((a,l)=>{const{children:o,...c}=a,i=d.Children.toArray(o),n=i.find(Gs);if(n){const x=n.props.children,h=i.map(m=>m===n?d.Children.count(x)>1?d.Children.only(null):d.isValidElement(x)?x.props.children:null:m);return e.jsx(s,{...c,ref:l,children:d.isValidElement(x)?d.cloneElement(x,void 0,h):null})}return e.jsx(s,{...c,ref:l,children:o})});return r.displayName=`${t}.Slot`,r}function Vs(t){const s=d.forwardRef((r,a)=>{const{children:l,...o}=r;if(d.isValidElement(l)){const c=qs(l),i=Hs(o,l.props);return l.type!==d.Fragment&&(i.ref=a?ns(a,c):c),d.cloneElement(l,i)}return d.Children.count(l)>1?d.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Ds=Symbol("radix.slottable");function Gs(t){return d.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ds}function Hs(t,s){const r={...s};for(const a in s){const l=t[a],o=s[a];/^on[A-Z]/.test(a)?l&&o?r[a]=(...i)=>{const n=o(...i);return l(...i),n}:l&&(r[a]=l):a==="style"?r[a]={...l,...o}:a==="className"&&(r[a]=[l,o].filter(Boolean).join(" "))}return{...t,...r}}function qs(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Ws=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ye=Ws.reduce((t,s)=>{const r=Bs(`Primitive.${s}`),a=d.forwardRef((l,o)=>{const{asChild:c,...i}=l,n=c?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(n,{...i,ref:o})});return a.displayName=`Primitive.${s}`,{...t,[s]:a}},{}),we="Tabs",[Zs]=Rs(we,[We]),Ue=We(),[Js,Oe]=Zs(we),Ke=d.forwardRef((t,s)=>{const{__scopeTabs:r,value:a,onValueChange:l,defaultValue:o,orientation:c="horizontal",dir:i,activationMode:n="automatic",...x}=t,h=hs(i),[m,p]=ds({prop:a,onChange:l,defaultProp:o??"",caller:we});return e.jsx(Js,{scope:r,baseId:ps(),value:m,onValueChange:p,orientation:c,dir:h,activationMode:n,children:e.jsx(ye.div,{dir:h,"data-orientation":c,...x,ref:s})})});Ke.displayName=we;var Qe="TabsList",Xe=d.forwardRef((t,s)=>{const{__scopeTabs:r,loop:a=!0,...l}=t,o=Oe(Qe,r),c=Ue(r);return e.jsx(us,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:a,children:e.jsx(ye.div,{role:"tablist","aria-orientation":o.orientation,...l,ref:s})})});Xe.displayName=Qe;var Ye="TabsTrigger",es=d.forwardRef((t,s)=>{const{__scopeTabs:r,value:a,disabled:l=!1,...o}=t,c=Oe(Ye,r),i=Ue(r),n=as(c.baseId,a),x=rs(c.baseId,a),h=a===c.value;return e.jsx(xs,{asChild:!0,...i,focusable:!l,active:h,children:e.jsx(ye.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:n,...o,ref:s,onMouseDown:Ie(t.onMouseDown,m=>{!l&&m.button===0&&m.ctrlKey===!1?c.onValueChange(a):m.preventDefault()}),onKeyDown:Ie(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&c.onValueChange(a)}),onFocus:Ie(t.onFocus,()=>{const m=c.activationMode!=="manual";!h&&!l&&m&&c.onValueChange(a)})})})});es.displayName=Ye;var ss="TabsContent",ts=d.forwardRef((t,s)=>{const{__scopeTabs:r,value:a,forceMount:l,children:o,...c}=t,i=Oe(ss,r),n=as(i.baseId,a),x=rs(i.baseId,a),h=a===i.value,m=d.useRef(h);return d.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),e.jsx(ms,{present:l||h,children:({present:p})=>e.jsx(ye.div,{"data-state":h?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":n,hidden:!p,id:x,tabIndex:0,...c,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:p&&o})})});ts.displayName=ss;function as(t,s){return`${t}-trigger-${s}`}function rs(t,s){return`${t}-content-${s}`}var Us=Ke,Ks=Xe,Qs=es,Xs=ts;function Ce(t){const s=ie.c(10);let r,a,l;s[0]!==t?({className:r,orientation:l,...a}=t,s[0]=t,s[1]=r,s[2]=a,s[3]=l):(r=s[1],a=s[2],l=s[3]);const o=l===void 0?"horizontal":l;let c;s[4]!==r?(c=xe("group/tabs flex gap-2 data-[orientation=horizontal]:flex-col",r),s[4]=r,s[5]=c):c=s[5];let i;return s[6]!==o||s[7]!==a||s[8]!==c?(i=e.jsx(Us,{"data-slot":"tabs","data-orientation":o,orientation:o,className:c,...a}),s[6]=o,s[7]=a,s[8]=c,s[9]=i):i=s[9],i}const Ys=is("rounded-lg p-[3px] group-data-[orientation=horizontal]/tabs:h-9 data-[variant=line]:rounded-none group/tabs-list text-muted-foreground inline-flex w-fit items-center justify-center group-data-[orientation=vertical]/tabs:h-fit group-data-[orientation=vertical]/tabs:flex-col",{variants:{variant:{default:"bg-muted",line:"gap-1 bg-transparent"}},defaultVariants:{variant:"default"}});function _e(t){const s=ie.c(11);let r,a,l;s[0]!==t?({className:r,variant:l,...a}=t,s[0]=t,s[1]=r,s[2]=a,s[3]=l):(r=s[1],a=s[2],l=s[3]);const o=l===void 0?"default":l;let c;s[4]!==r||s[5]!==o?(c=xe(Ys({variant:o}),r),s[4]=r,s[5]=o,s[6]=c):c=s[6];let i;return s[7]!==a||s[8]!==c||s[9]!==o?(i=e.jsx(Ks,{"data-slot":"tabs-list","data-variant":o,className:c,...a}),s[7]=a,s[8]=c,s[9]=o,s[10]=i):i=s[10],i}function D(t){const s=ie.c(8);let r,a;s[0]!==t?({className:r,...a}=t,s[0]=t,s[1]=r,s[2]=a):(r=s[1],a=s[2]);let l;s[3]!==r?(l=xe("focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring text-foreground/60 hover:text-foreground dark:text-muted-foreground dark:hover:text-foreground relative inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-all group-data-[orientation=vertical]/tabs:w-full group-data-[orientation=vertical]/tabs:justify-start focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 group-data-[variant=default]/tabs-list:data-[state=active]:shadow-sm group-data-[variant=line]/tabs-list:data-[state=active]:shadow-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4","group-data-[variant=line]/tabs-list:bg-transparent group-data-[variant=line]/tabs-list:data-[state=active]:bg-transparent dark:group-data-[variant=line]/tabs-list:data-[state=active]:border-transparent dark:group-data-[variant=line]/tabs-list:data-[state=active]:bg-transparent","data-[state=active]:bg-background dark:data-[state=active]:text-foreground dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 data-[state=active]:text-foreground","after:bg-foreground after:absolute after:opacity-0 after:transition-opacity group-data-[orientation=horizontal]/tabs:after:inset-x-0 group-data-[orientation=horizontal]/tabs:after:bottom-[-5px] group-data-[orientation=horizontal]/tabs:after:h-0.5 group-data-[orientation=vertical]/tabs:after:inset-y-0 group-data-[orientation=vertical]/tabs:after:-right-1 group-data-[orientation=vertical]/tabs:after:w-0.5 group-data-[variant=line]/tabs-list:data-[state=active]:after:opacity-100",r),s[3]=r,s[4]=l):l=s[4];let o;return s[5]!==a||s[6]!==l?(o=e.jsx(Qs,{"data-slot":"tabs-trigger",className:l,...a}),s[5]=a,s[6]=l,s[7]=o):o=s[7],o}function G(t){const s=ie.c(8);let r,a;s[0]!==t?({className:r,...a}=t,s[0]=t,s[1]=r,s[2]=a):(r=s[1],a=s[2]);let l;s[3]!==r?(l=xe("flex-1 outline-none",r),s[3]=r,s[4]=l):l=s[4];let o;return s[5]!==a||s[6]!==l?(o=e.jsx(Xs,{"data-slot":"tabs-content",className:l,...a}),s[5]=a,s[6]=l,s[7]=o):o=s[7],o}const Z={picture:{label:"<picture>",language:"html",description:"Tag HTML5 avec support AVIF, WebP et fallback",pro:!1},img:{label:"<img>",language:"html",description:"Tag img basique avec attributs SEO",pro:!1},img_srcset:{label:"srcset",language:"html",description:"Tag img avec images responsive",pro:!0},react:{label:"React",language:"jsx",description:"Composant React fonctionnel",pro:!0},vue:{label:"Vue",language:"vue",description:"Composant Vue 3 avec script setup",pro:!0},nextjs:{label:"Next.js",language:"jsx",description:"Composant next/image optimisé",pro:!0},css:{label:"CSS",language:"css",description:"Background-image avec image-set()",pro:!0},lazy:{label:"LQIP",language:"html",description:"Chargement progressif avec placeholder",pro:!0}};function et({image:t,isPro:s=!1,className:r}){const[a,l]=d.useState("picture"),[o,c]=d.useState({}),[i,n]=d.useState({}),[x,h]=d.useState(null),m=d.useCallback(async u=>{if(!(o[u]||i[u])&&!(Z[u].pro&&!s)){n(g=>({...g,[u]:!0}));try{const g=await re.get(`/api/optiseo/images/${t.id}/code/${u}`);c(f=>({...f,[u]:g.data.code}))}catch(g){console.error("Failed to fetch code:",g)}finally{n(g=>({...g,[u]:!1}))}}},[t.id,o,i,s]),p=u=>{const g=u;l(g),m(g)},b=async u=>{const g=o[u];if(g)try{await navigator.clipboard.writeText(g),h(u),setTimeout(()=>h(null),2e3)}catch(f){console.error("Failed to copy:",f)}};d.useState(()=>{m("picture")});const N=u=>Z[u].pro&&!s;return e.jsxs(y,{className:r,children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-5 w-5"}),"Génération de code"]}),e.jsx(oe,{children:"Copiez le code HTML, React, Vue ou CSS pour intégrer cette image"})]}),e.jsx(w,{children:e.jsxs(Ce,{value:a,onValueChange:p,children:[e.jsx(_e,{className:"grid w-full grid-cols-4 lg:grid-cols-8",children:Object.keys(Z).map(u=>e.jsxs(D,{value:u,className:"text-xs gap-1",disabled:N(u),children:[Z[u].label,Z[u].pro&&!s&&e.jsx(Le,{className:"h-3 w-3 text-muted-foreground"})]},u))}),Object.keys(Z).map(u=>e.jsx(G,{value:u,className:"mt-4",children:N(u)?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(fs,{className:"mb-4 h-12 w-12 text-yellow-500"}),e.jsx("p",{className:"mb-2 font-medium",children:"Fonctionnalité Pro"}),e.jsxs("p",{className:"mb-4 text-sm text-muted-foreground",children:["La génération de code ",Z[u].label," est réservée aux abonnés Pro"]}),e.jsxs(J,{variant:"secondary",className:"gap-1",children:[e.jsx(Le,{className:"h-3 w-3"}),"Passez à Pro pour débloquer"]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:Z[u].description}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>b(u),disabled:!o[u],className:"gap-2",children:x===u?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4"}),"Copié !"]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4"}),"Copier"]})})]}),e.jsx("div",{className:"relative",children:i[u]?e.jsx("div",{className:"flex h-48 items-center justify-center rounded-lg border bg-muted",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:"Génération en cours..."})}):o[u]?e.jsx("pre",{className:"max-h-96 overflow-auto rounded-lg border bg-muted p-4",children:e.jsx("code",{className:"text-sm whitespace-pre-wrap break-words",children:o[u]})}):e.jsx("div",{className:"flex h-48 items-center justify-center rounded-lg border bg-muted",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:"Cliquez sur l'onglet pour générer le code"})})})]})},u))]})})]})}const st=[{format:"zip",label:"Archive ZIP",description:"Images converties + fichiers de métadonnées",icon:e.jsx(Re,{className:"h-5 w-5"})},{format:"csv",label:"Fichier CSV",description:"Métadonnées SEO au format tableur",icon:e.jsx(zs,{className:"h-5 w-5"})},{format:"json",label:"Fichier JSON",description:"Données structurées pour intégration CMS",icon:e.jsx(te,{className:"h-5 w-5"})},{format:"html",label:"Snippets HTML",description:"Balises <img> et <picture> prêtes à copier",icon:e.jsx(ks,{className:"h-5 w-5"})}];function tt({batch:t,className:s}){const[r,a]=d.useState(null),l=d.useCallback(async i=>{a(i);try{const n=`/api/optiseo/export/${t.id}/${i}`;if(i!=="json"){const x=document.createElement("a");x.href=n,x.download=`optiseo-${t.id}.${i==="html"?"html":i}`,document.body.appendChild(x),x.click(),document.body.removeChild(x)}else window.open(n,"_blank")}catch(n){console.error("Export error:",n)}finally{a(null)}},[t.id]),o=t.images?.filter(i=>i.status==="completed").length??0,c=t.images?.reduce((i,n)=>n.size_saved&&n.size_saved>0?i+n.size_saved:i,0)??0;return e.jsxs("div",{className:xe("space-y-6",s),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[e.jsx(y,{children:e.jsxs(w,{className:"pt-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:o}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Images converties"})]})}),e.jsx(y,{children:e.jsxs(w,{className:"pt-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:c>0?at(c):"—"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Espace économisé"})]})}),e.jsx(y,{children:e.jsxs(w,{className:"pt-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:t.settings?.format?.toUpperCase()??"—"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Format de sortie"})]})}),e.jsx(y,{children:e.jsxs(w,{className:"pt-4",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[t.settings?.quality??80,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Qualité"})]})})]}),e.jsxs(y,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Télécharger vos images"}),e.jsx(oe,{children:"Choisissez le format d'export adapté à vos besoins"})]}),e.jsx(w,{children:e.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:st.map(i=>e.jsxs(L,{variant:"outline",className:"h-auto flex-col items-start gap-2 p-4 text-left",onClick:()=>l(i.format),disabled:r!==null,children:[e.jsxs("div",{className:"flex w-full items-center gap-3",children:[r===i.format?e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-primary border-t-transparent"}):i.icon,e.jsx("span",{className:"font-medium",children:i.label})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:i.description})]},i.format))})})]}),t.keywords&&t.keywords.length>0&&e.jsxs(y,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-base",children:"Mots-clés utilisés"})}),e.jsx(w,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:t.keywords.map((i,n)=>e.jsx("span",{className:"rounded-full bg-muted px-3 py-1 text-sm",children:i},n))})})]})]})}function at(t){if(t===0)return"0 B";const s=1024,r=["B","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(s));return parseFloat((t/Math.pow(s,a)).toFixed(1))+" "+r[a]}const Ge={"favicon-16x16":{label:"16×16",description:"Onglet navigateur"},"favicon-32x32":{label:"32×32",description:"Raccourci bureau"},"apple-touch-icon":{label:"180×180",description:"Apple Touch Icon"},"android-chrome-192x192":{label:"192×192",description:"PWA Android"},"android-chrome-512x512":{label:"512×512",description:"PWA Splash"},"mstile-150x150":{label:"150×150",description:"Windows Tile"}};function rt(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:`${(t/(1024*1024)).toFixed(1)} MB`}function lt({image:t,className:s}){const[r,a]=d.useState(null),[l,o]=d.useState(!1),[c,i]=d.useState(!1),[n,x]=d.useState(null),[h,m]=d.useState(null),p=t.favicons&&t.favicons.length>0,b=d.useCallback(async()=>{if(!r){o(!0),m(null);try{const[f,C]=await Promise.all([re.get(`/api/optiseo/images/${t.id}/favicons`),re.get(`/api/optiseo/images/${t.id}/favicons/html`)]);a({favicons:f.data.favicons,html_relative:C.data.html_relative,html_absolute:C.data.html_absolute,manifest:C.data.manifest})}catch(f){console.error("Failed to load favicons:",f),m("Erreur lors du chargement des favicons")}finally{o(!1)}}},[t.id,r]),N=d.useCallback(async()=>{i(!0),m(null);try{await re.post(`/api/optiseo/images/${t.id}/favicons`),a(null),await b()}catch(f){f.response?.status===429?m("Limite quotidienne atteinte. Passez à Pro pour un accès illimité."):m("Erreur lors de la génération des favicons")}finally{i(!1)}},[t.id,b]),u=d.useCallback(()=>{window.open(`/api/optiseo/images/${t.id}/favicons/download`,"_blank")},[t.id]),g=d.useCallback(async(f,C)=>{try{await navigator.clipboard.writeText(f),x(C),setTimeout(()=>x(null),2e3)}catch(_){console.error("Failed to copy:",_)}},[]);return d.useState(()=>{p&&b()}),e.jsxs(y,{className:s,children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5"}),"Favicons & Icônes App"]}),e.jsx(oe,{children:"Générez tous les formats de favicons pour votre site web et PWA"})]}),e.jsx(w,{children:p?l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):r?e.jsxs(Ce,{defaultValue:"preview",className:"w-full",children:[e.jsxs(_e,{className:"grid w-full grid-cols-3",children:[e.jsx(D,{value:"preview",children:"Aperçu"}),e.jsx(D,{value:"html",children:"Code HTML"}),e.jsx(D,{value:"manifest",children:"Manifest"})]}),e.jsxs(G,{value:"preview",className:"mt-4 space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:r.favicons.map(f=>e.jsxs("div",{className:"flex flex-col items-center rounded-lg border p-4",children:[e.jsx("img",{src:f.url,alt:f.size_name,className:"mb-2 rounded",style:{width:Math.min(f.size,64),height:Math.min(f.size,64)}}),e.jsx("p",{className:"text-sm font-medium",children:Ge[f.size_name]?.label||f.size_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Ge[f.size_name]?.description}),e.jsx(J,{variant:"outline",className:"mt-1 text-xs",children:rt(f.file_size)})]},f.id))}),e.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[e.jsxs(L,{onClick:u,variant:"outline",className:"gap-2",children:[e.jsx(Re,{className:"h-4 w-4"}),"Télécharger ZIP"]}),e.jsxs(L,{onClick:N,variant:"outline",disabled:c,className:"gap-2",children:[c?e.jsx(me,{className:"h-4 w-4 animate-spin"}):e.jsx(ae,{className:"h-4 w-4"}),"Regénérer"]})]})]}),e.jsxs(G,{value:"html",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium",children:"Code HTML à ajouter dans <head>"}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>g(r.html_relative,"html"),className:"gap-2",children:n==="html"?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4"}),"Copié !"]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4"}),"Copier"]})})]}),e.jsx("pre",{className:"max-h-64 overflow-auto rounded-lg border bg-muted p-4",children:e.jsx("code",{className:"text-sm whitespace-pre-wrap break-words",children:r.html_relative})})]}),e.jsxs("div",{className:"rounded-lg border bg-amber-50 dark:bg-amber-950/20 p-3 text-sm",children:[e.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Instructions :"}),e.jsxs("ol",{className:"mt-2 list-decimal list-inside space-y-1 text-amber-700 dark:text-amber-300",children:[e.jsx("li",{children:"Téléchargez le fichier ZIP"}),e.jsx("li",{children:"Extrayez tous les fichiers à la racine de votre site"}),e.jsx("li",{children:"Ajoutez le code HTML ci-dessus dans votre <head>"})]})]})]}),e.jsx(G,{value:"manifest",className:"mt-4 space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium",children:"site.webmanifest (PWA)"}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>g(JSON.stringify(r.manifest,null,2),"manifest"),className:"gap-2",children:n==="manifest"?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4"}),"Copié !"]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4"}),"Copier"]})})]}),e.jsx("pre",{className:"max-h-64 overflow-auto rounded-lg border bg-muted p-4",children:e.jsx("code",{className:"text-sm whitespace-pre-wrap break-words",children:JSON.stringify(r.manifest,null,2)})})]})})]}):null:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(ae,{className:"mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"Aucun favicon généré pour cette image"}),e.jsx(L,{onClick:N,disabled:c,className:"gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-4 w-4 animate-spin"}),"Génération en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-4 w-4"}),"Générer les favicons"]})}),h&&e.jsx("p",{className:"mt-4 text-sm text-destructive",children:h})]})})]})}const nt={excellent:"bg-green-500",good:"bg-green-400","needs-improvement":"bg-yellow-500",poor:"bg-red-500"},it={excellent:"Excellent",good:"Bon","needs-improvement":"À améliorer",poor:"Mauvais"};function ot({image:t,isPro:s=!1,className:r}){const[a,l]=d.useState(null),[o,c]=d.useState(!1),[i,n]=d.useState(null);return d.useEffect(()=>{if(!s)return;(async()=>{c(!0),n(null);try{const h=await re.get(`/api/optiseo/images/${t.id}/performance`);l(h.data.analysis)}catch(h){n(h.response?.data?.message||"Erreur lors de l'analyse")}finally{c(!1)}})()},[t.id,s]),s?o?e.jsxs(y,{className:r,children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Analyse de performance"]})}),e.jsx(w,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})]}):i||!a?e.jsxs(y,{className:r,children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Analyse de performance"]})}),e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Ee,{className:"mb-4 h-12 w-12 text-destructive/50"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i||"Analyse non disponible"})]})})]}):e.jsxs(y,{className:r,children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Analyse de performance"]}),e.jsx(oe,{children:"Impact sur les Core Web Vitals et recommandations"})]}),e.jsxs(w,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative h-24 w-24",children:[e.jsxs("svg",{className:"h-24 w-24 -rotate-90 transform",children:[e.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-muted"}),e.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:`${a.score/100*251.2} 251.2`,className:a.score>=90?"text-green-500":a.score>=70?"text-green-400":a.score>=50?"text-yellow-500":"text-red-500"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold",children:a.score})})]}),e.jsxs("div",{children:[e.jsx(J,{variant:"secondary",className:`${nt[a.rating]} text-white`,children:it[a.rating]}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Score de performance global basé sur la taille, le format et les optimisations"})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"LCP Impact"}),e.jsxs(J,{variant:"outline",className:a.lcp_impact.rating==="good"?"border-green-500 text-green-600":a.lcp_impact.rating==="needs-improvement"?"border-yellow-500 text-yellow-600":"border-red-500 text-red-600",children:[a.lcp_impact.estimated_ms," ms"]})]}),e.jsx(Be,{value:Math.min(100,a.lcp_impact.estimated_ms/a.lcp_impact.threshold_poor*100),className:"h-2"}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:a.lcp_impact.rating==="good"?"Bon temps de chargement":a.lcp_impact.rating==="needs-improvement"?"Temps de chargement acceptable":"Temps de chargement trop long"})]}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"CLS Impact"}),e.jsx(J,{variant:"outline",className:a.cls_impact.rating==="good"?"border-green-500 text-green-600":"border-red-500 text-red-600",children:a.cls_impact.score.toFixed(2)})]}),e.jsx(Be,{value:Math.min(100,a.cls_impact.score*400),className:"h-2"}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:a.cls_impact.reason})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3 text-sm font-medium",children:"Temps de chargement estimé"}),e.jsx("div",{className:"grid gap-2 sm:grid-cols-3",children:Object.entries(a.load_times).map(([x,h])=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border px-3 py-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:h.label}),e.jsxs("span",{className:"text-sm font-medium",children:[h.time_ms," ms"]})]},x))})]}),a.recommendations.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3 text-sm font-medium",children:"Recommandations"}),e.jsx("div",{className:"space-y-2",children:a.recommendations.map((x,h)=>e.jsx("div",{className:`rounded-lg border p-3 ${x.priority==="high"?"border-red-200 bg-red-50 dark:border-red-900 dark:bg-red-950":x.priority==="medium"?"border-yellow-200 bg-yellow-50 dark:border-yellow-900 dark:bg-yellow-950":"border-muted bg-muted/30"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[x.priority==="high"?e.jsx(Ee,{className:"mt-0.5 h-4 w-4 text-red-500"}):x.priority==="medium"?e.jsx(Ee,{className:"mt-0.5 h-4 w-4 text-yellow-500"}):e.jsx(gs,{className:"mt-0.5 h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:x.title}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:x.description})]})]})},h))})]})]})]}):e.jsxs(y,{className:r,children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Analyse de performance"]})}),e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(js,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),e.jsx("p",{className:"mb-2 font-medium",children:"Fonctionnalité Pro"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"L'analyse de performance est réservée aux utilisateurs Pro"})]})})]})}var ct=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],de=t=>{let s=0;for(let r=0;r<t.length;r++){let a=t[r],l=ct.indexOf(a);s=s*83+l}return s},ze=t=>{let s=t/255;return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)},$e=t=>{let s=Math.max(0,Math.min(1,t));return s<=.0031308?Math.trunc(s*12.92*255+.5):Math.trunc((1.055*Math.pow(s,.4166666666666667)-.055)*255+.5)},dt=t=>t<0?-1:1,Ae=(t,s)=>dt(t)*Math.pow(Math.abs(t),s),He=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},mt=t=>{if(!t||t.length<6)throw new He("The blurhash string must be at least 6 characters");let s=de(t[0]),r=Math.floor(s/9)+1,a=s%9+1;if(t.length!==4+2*a*r)throw new He(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*a*r}`)},xt=t=>{let s=t>>16,r=t>>8&255,a=t&255;return[ze(s),ze(r),ze(a)]},ut=(t,s)=>{let r=Math.floor(t/361),a=Math.floor(t/19)%19,l=t%19;return[Ae((r-9)/9,2)*s,Ae((a-9)/9,2)*s,Ae((l-9)/9,2)*s]},ht=(t,s,r,a)=>{mt(t),a=a|1;let l=de(t[0]),o=Math.floor(l/9)+1,c=l%9+1,i=(de(t[1])+1)/166,n=new Array(c*o);for(let m=0;m<n.length;m++)if(m===0){let p=de(t.substring(2,6));n[m]=xt(p)}else{let p=de(t.substring(4+m*2,6+m*2));n[m]=ut(p,i*a)}let x=s*4,h=new Uint8ClampedArray(x*r);for(let m=0;m<r;m++)for(let p=0;p<s;p++){let b=0,N=0,u=0;for(let _=0;_<o;_++)for(let T=0;T<c;T++){let M=Math.cos(Math.PI*p*T/s)*Math.cos(Math.PI*m*_/r),F=n[T+_*c];b+=F[0]*M,N+=F[1]*M,u+=F[2]*M}let g=$e(b),f=$e(N),C=$e(u);h[4*p+0+m*x]=g,h[4*p+1+m*x]=f,h[4*p+2+m*x]=C,h[4*p+3+m*x]=255}return h},pt=ht;function ft(t){const s=ie.c(55),{image:r,className:a}=t,[l,o]=d.useState(!1),[c,i]=d.useState(null),n=r.performance,x=n?.blur_hash||n?.dominant_color;let h;s[0]!==n?(h=()=>{if(n?.blur_hash)try{const $=pt(n.blur_hash,32,32),P=document.createElement("canvas");P.width=32,P.height=32;const A=P.getContext("2d");if(A){const q=A.createImageData(32,32);q.data.set($),A.putImageData(q,0,0),i(P.toDataURL())}}catch($){console.error("Failed to decode BlurHash:",$)}},s[0]=n,s[1]=h):h=s[1];const m=n?.blur_hash;let p;if(s[2]!==m?(p=[m],s[2]=m,s[3]=p):p=s[3],d.useEffect(h,p),!x){let $;s[4]===Symbol.for("react.memo_cache_sentinel")?($=e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-5 w-5"}),"Placeholders & Couleurs"]})}),s[4]=$):$=s[4];let P;s[5]===Symbol.for("react.memo_cache_sentinel")?(P=e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(ae,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Les données de performance ne sont pas encore générées pour cette image"})]})}),s[5]=P):P=s[5];let A;return s[6]!==a?(A=e.jsxs(y,{className:a,children:[$,P]}),s[6]=a,s[7]=A):A=s[7],A}let b;s[8]===Symbol.for("react.memo_cache_sentinel")?(b=e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-5 w-5"}),"Placeholders & Couleurs"]}),e.jsx(oe,{children:"Utilisez ces données pour améliorer le chargement perçu"})]}),s[8]=b):b=s[8];let N;s[9]===Symbol.for("react.memo_cache_sentinel")?(N=e.jsx("span",{className:"text-sm font-medium",children:"Comparaison"}),s[9]=N):N=s[9];let u;s[10]!==l?(u=()=>o(!l),s[10]=l,s[11]=u):u=s[11];let g;s[12]!==l?(g=l?e.jsxs(e.Fragment,{children:[e.jsx(Ms,{className:"h-4 w-4"}),"Voir placeholder"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"h-4 w-4"}),"Voir original"]}),s[12]=l,s[13]=g):g=s[13];let f;s[14]!==u||s[15]!==g?(f=e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[N,e.jsx(L,{variant:"outline",size:"sm",onClick:u,className:"gap-2",children:g})]}),s[14]=u,s[15]=g,s[16]=f):f=s[16];let C;s[17]!==r.converted?.url||s[18]!==r.original||s[19]!==n||s[20]!==l?(C=n?.lqip_data_uri&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"LQIP (Low Quality Image Placeholder)"}),e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg border bg-muted",children:e.jsx("img",{src:l?r.converted?.url??r.original.url??"":n.lqip_data_uri,alt:"LQIP preview",className:"h-full w-full object-cover",style:l?void 0:{filter:"blur(10px)",transform:"scale(1.1)"}})})]}),s[17]=r.converted?.url,s[18]=r.original,s[19]=n,s[20]=l,s[21]=C):C=s[21];let _;s[22]!==c||s[23]!==r.converted?.url||s[24]!==r.original||s[25]!==l?(_=c&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"BlurHash"}),e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg border bg-muted",children:e.jsx("img",{src:l?r.converted?.url??r.original.url??"":c,alt:"BlurHash preview",className:"h-full w-full object-cover",style:l?void 0:{filter:"blur(0px)"}})})]}),s[22]=c,s[23]=r.converted?.url,s[24]=r.original,s[25]=l,s[26]=_):_=s[26];let T;s[27]!==_||s[28]!==C?(T=e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[C,_]}),s[27]=_,s[28]=C,s[29]=T):T=s[29];let M;s[30]!==T||s[31]!==f?(M=e.jsxs("div",{children:[f,T]}),s[30]=T,s[31]=f,s[32]=M):M=s[32];let F;s[33]!==n?(F=n?.blur_hash&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium",children:"BlurHash"}),e.jsx("code",{className:"block rounded-lg border bg-muted p-3 text-xs break-all",children:n.blur_hash})]}),s[33]=n,s[34]=F):F=s[34];let R;s[35]!==n?(R=n?.dominant_color&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium",children:"Couleur dominante"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg border shadow-sm",style:{backgroundColor:n.dominant_color}}),e.jsx("code",{className:"text-sm",children:n.dominant_color})]})]}),s[35]=n,s[36]=R):R=s[36];let O;s[37]!==n?(O=n?.color_palette&&n.color_palette.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium",children:"Palette de couleurs"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.color_palette.map(gt)})]}),s[37]=n,s[38]=O):O=s[38];let E;s[39]!==n?.has_transparency?(E=n?.has_transparency&&e.jsx(J,{variant:"secondary",children:"Transparence"}),s[39]=n?.has_transparency,s[40]=E):E=s[40];let B;s[41]!==n?(B=n?.aspect_ratio&&e.jsxs(J,{variant:"outline",children:["Ratio: ",n.aspect_ratio]}),s[41]=n,s[42]=B):B=s[42];let z;s[43]!==E||s[44]!==B?(z=e.jsxs("div",{className:"flex flex-wrap gap-2",children:[E,B]}),s[43]=E,s[44]=B,s[45]=z):z=s[45];let V;s[46]!==M||s[47]!==F||s[48]!==R||s[49]!==O||s[50]!==z?(V=e.jsxs(w,{className:"space-y-6",children:[M,F,R,O,z]}),s[46]=M,s[47]=F,s[48]=R,s[49]=O,s[50]=z,s[51]=V):V=s[51];let H;return s[52]!==a||s[53]!==V?(H=e.jsxs(y,{className:a,children:[b,V]}),s[52]=a,s[53]=V,s[54]=H):H=s[54],H}function gt(t,s){return e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-muted/50 px-2 py-1",children:[e.jsx("div",{className:"h-6 w-6 rounded border shadow-sm",style:{backgroundColor:t}}),e.jsx("code",{className:"text-xs",children:t})]},s)}function jt({image:t,isPro:s=!1,className:r}){const[a,l]=d.useState(null),[o,c]=d.useState(!1),[i,n]=d.useState(null),[x,h]=d.useState(null);d.useEffect(()=>{if(!s)return;(async()=>{c(!0),n(null);try{const b=await re.get(`/api/optiseo/images/${t.id}/schema`,{params:{base_url:window.location.origin}});l(b.data.schemas)}catch(b){n(b.response?.data?.message||"Erreur lors du chargement")}finally{c(!1)}})()},[t.id,s]);const m=d.useCallback(async(p,b)=>{try{await navigator.clipboard.writeText(p),h(b),setTimeout(()=>h(null),2e3)}catch(N){console.error("Failed to copy:",N)}},[]);return s?o?e.jsxs(y,{className:r,children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Schema Markup"]})}),e.jsx(w,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(me,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})]}):i||!a?e.jsxs(y,{className:r,children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Schema Markup"]})}),e.jsx(w,{children:e.jsx("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:i||"Schema non disponible"})})})]}):e.jsxs(y,{className:r,children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Schema Markup"]}),e.jsx(oe,{children:"Données structurées pour les moteurs de recherche et réseaux sociaux"})]}),e.jsx(w,{children:e.jsxs(Ce,{defaultValue:"jsonld",children:[e.jsxs(_e,{className:"grid w-full grid-cols-3",children:[e.jsxs(D,{value:"jsonld",className:"gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"JSON-LD"]}),e.jsxs(D,{value:"opengraph",className:"gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Open Graph"]}),e.jsxs(D,{value:"twitter",className:"gap-2",children:[e.jsx(Ls,{className:"h-4 w-4"}),"Twitter"]})]}),e.jsxs(G,{value:"jsonld",className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez ce script dans le <head> de votre page"}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>m(a.json_ld_script,"jsonld"),className:"gap-2",children:x==="jsonld"?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4"}),"Copié !"]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4"}),"Copier"]})})]}),e.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border bg-muted p-4",children:e.jsx("code",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(a.json_ld,null,2)})})]}),e.jsxs(G,{value:"opengraph",className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Meta tags Open Graph pour Facebook, LinkedIn, etc."}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>m(a.open_graph_html,"og"),className:"gap-2",children:x==="og"?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4"}),"Copié !"]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4"}),"Copier"]})})]}),e.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border bg-muted p-4",children:e.jsx("code",{className:"text-xs whitespace-pre-wrap",children:a.open_graph_html})}),e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4",children:[e.jsx("p",{className:"mb-2 text-xs font-medium text-muted-foreground",children:"Aperçu"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:t.converted?.url??t.original.url??"",alt:t.seo.alt_text??"",className:"h-16 w-16 rounded object-cover"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm font-medium",children:a.open_graph["og:image:alt"]||t.seo.alt_text}),e.jsx("p",{className:"truncate text-xs text-muted-foreground",children:t.converted?.url??t.original.url})]})]})]})]}),e.jsxs(G,{value:"twitter",className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Meta tags Twitter Card"}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>m(a.twitter_card_html,"twitter"),className:"gap-2",children:x==="twitter"?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4"}),"Copié !"]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4"}),"Copier"]})})]}),e.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border bg-muted p-4",children:e.jsx("code",{className:"text-xs whitespace-pre-wrap",children:a.twitter_card_html})})]})]})})]}):e.jsxs(y,{className:r,children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Schema Markup"]})}),e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Le,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),e.jsx("p",{className:"mb-2 font-medium",children:"Fonctionnalité Pro"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Le schema markup est réservé aux utilisateurs Pro"})]})})]})}function Xt(t){const s=ie.c(85),{batchId:r,initialBatch:a}=t,{batch:l,pollProgress:o}=bs(),{auth:c}=ls().props,i=c?.isPro??!1,[n,x]=d.useState(null);let h,m;s[0]!==r||s[1]!==a||s[2]!==o?(h=()=>{a||o(r)},m=[r,a,o],s[0]=r,s[1]=a,s[2]=o,s[3]=h,s[4]=m):(h=s[3],m=s[4]),d.useEffect(h,m);const p=l??a,b=wt;let N;s[5]!==r?(N=()=>{qe.visit(`/convert/${r}`)},s[5]=r,s[6]=N):N=s[6];const u=N;if(!p){let j;return s[7]===Symbol.for("react.memo_cache_sentinel")?(j=e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ve,{className:"mx-auto h-8 w-8 animate-spin text-muted-foreground"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement des résultats..."})]})}),s[7]=j):j=s[7],j}let g,f,C,_,T,M,F,R,O,E,B,z,V,H,$,P,A,q;if(s[8]!==p||s[9]!==u||s[10]!==i||s[11]!==n){const j=p.images?.filter(yt)??[],ke=p.images?.filter(Nt)??[],I=n??j[0]??null;s[30]===Symbol.for("react.memo_cache_sentinel")?(z=e.jsx(os,{...cs.result}),s[30]=z):z=s[30],B="min-h-screen bg-gradient-to-b from-background to-muted/30",O="container mx-auto px-4 py-8";let pe;s[31]===Symbol.for("react.memo_cache_sentinel")?(pe=e.jsx(Ns,{className:"mr-2 h-4 w-4"}),s[31]=pe):pe=s[31];let ee;s[32]!==u?(ee=e.jsxs(L,{variant:"ghost",onClick:u,children:[pe,"Paramètres"]}),s[32]=u,s[33]=ee):ee=s[33];let fe;s[34]===Symbol.for("react.memo_cache_sentinel")?(fe=e.jsxs(L,{variant:"outline",onClick:b,children:[e.jsx(ys,{className:"mr-2 h-4 w-4"}),"Nouvelle conversion"]}),s[34]=fe):fe=s[34],s[35]!==ee?(E=e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[ee,fe]}),s[35]=ee,s[36]=E):E=s[36],F="mx-auto max-w-6xl space-y-8";let ge;s[37]===Symbol.for("react.memo_cache_sentinel")?(ge=e.jsx("h1",{className:"mb-2 text-3xl font-bold",children:"Conversion terminée !"}),s[37]=ge):ge=s[37],R=e.jsxs("div",{className:"text-center",children:[ge,e.jsxs("p",{className:"text-muted-foreground",children:[j.length," image",j.length>1?"s":""," convertie",j.length>1?"s":""," avec succès"]})]}),f=Ce,P="export",A="w-full";let je;s[38]===Symbol.for("react.memo_cache_sentinel")?(je=e.jsxs(D,{value:"export",className:"gap-2",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Télécharger"})]}),s[38]=je):je=s[38];let ve;s[39]===Symbol.for("react.memo_cache_sentinel")?(ve=e.jsxs(D,{value:"seo",className:"gap-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"SEO"})]}),s[39]=ve):ve=s[39];let be;s[40]===Symbol.for("react.memo_cache_sentinel")?(be=e.jsxs(D,{value:"code",className:"gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Code"})]}),s[40]=be):be=s[40];let Ne;s[41]===Symbol.for("react.memo_cache_sentinel")?(Ne=e.jsxs(D,{value:"favicons",className:"gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Favicons"})]}),s[41]=Ne):Ne=s[41],s[42]===Symbol.for("react.memo_cache_sentinel")?(q=e.jsxs(_e,{className:"grid w-full grid-cols-5",children:[je,ve,be,Ne,e.jsxs(D,{value:"performance",className:"gap-2",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Performance"})]})]}),s[42]=q):q=s[42];let se;s[43]!==p?(se=e.jsx(tt,{batch:p}),s[43]=p,s[44]=se):se=s[44];const Se=j.length>0&&e.jsxs(y,{children:[e.jsx(k,{children:e.jsx(S,{children:"Images converties"})}),e.jsx(w,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:j.map(bt)})})]}),Te=ke.length>0&&e.jsxs(y,{className:"border-destructive/50",children:[e.jsx(k,{children:e.jsxs(S,{className:"text-destructive",children:["Images en échec (",ke.length,")"]})}),e.jsx(w,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:ke.map(vt)})})]});s[45]!==se||s[46]!==Se||s[47]!==Te?(C=e.jsxs(G,{value:"export",className:"mt-6 space-y-6",children:[se,Se,Te]}),s[45]=se,s[46]=Se,s[47]=Te,s[48]=C):C=s[48];const Me=j.length>0&&e.jsxs(e.Fragment,{children:[j.length>1&&e.jsxs(y,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-base",children:"Sélectionnez une image"})}),e.jsx(w,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(v=>e.jsx("button",{onClick:()=>x(v),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(n?.id??j[0]?.id)===v.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:e.jsx("img",{src:v.converted?.url??v.original.url??"",alt:v.seo.alt_text??"",className:"h-16 w-16 object-cover"})},v.id))})})]}),e.jsxs(y,{children:[e.jsx(k,{children:e.jsx(S,{children:"Métadonnées SEO générées"})}),e.jsx(w,{children:I&&e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4",children:[e.jsx("p",{className:"mb-2 font-medium text-sm",children:I.seo.filename}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"alt:"})," ",e.jsxs("span",{className:"text-foreground",children:['"',I.seo.alt_text,'"']})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"title:"})," ",e.jsxs("span",{className:"text-foreground",children:['"',I.seo.title_text,'"']})]}),I.seo.meta_description&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"meta:"})," ",e.jsxs("span",{className:"text-foreground",children:['"',I.seo.meta_description,'"']})]})]})]})})]}),I&&e.jsx(jt,{image:I,isPro:i})]});s[49]!==Me?(_=e.jsx(G,{value:"seo",className:"mt-6 space-y-6",children:Me}),s[49]=Me,s[50]=_):_=s[50];const Fe=j.length>0&&e.jsxs(e.Fragment,{children:[j.length>1&&e.jsxs(y,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-base",children:"Sélectionnez une image"})}),e.jsx(w,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(v=>e.jsx("button",{onClick:()=>x(v),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(n?.id??j[0]?.id)===v.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:e.jsx("img",{src:v.converted?.url??v.original.url??"",alt:v.seo.alt_text??"",className:"h-16 w-16 object-cover"})},v.id))})})]}),I&&e.jsx(et,{image:I,isPro:i})]});s[51]!==Fe?(T=e.jsx(G,{value:"code",className:"mt-6 space-y-6",children:Fe}),s[51]=Fe,s[52]=T):T=s[52];const Pe=j.length>0&&e.jsxs(e.Fragment,{children:[j.length>1&&e.jsxs(y,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-base",children:"Sélectionnez une image"})}),e.jsx(w,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(v=>e.jsx("button",{onClick:()=>x(v),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(n?.id??j[0]?.id)===v.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:e.jsx("img",{src:v.converted?.url??v.original.url??"",alt:v.seo.alt_text??"",className:"h-16 w-16 object-cover"})},v.id))})})]}),I&&e.jsx(lt,{image:I})]});s[53]!==Pe?(M=e.jsx(G,{value:"favicons",className:"mt-6 space-y-6",children:Pe}),s[53]=Pe,s[54]=M):M=s[54],g=G,V="performance",H="mt-6 space-y-6",$=j.length>0&&e.jsxs(e.Fragment,{children:[j.length>1&&e.jsxs(y,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-base",children:"Sélectionnez une image"})}),e.jsx(w,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(v=>e.jsx("button",{onClick:()=>x(v),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(n?.id??j[0]?.id)===v.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:e.jsx("img",{src:v.converted?.url??v.original.url??"",alt:v.seo.alt_text??"",className:"h-16 w-16 object-cover"})},v.id))})})]}),I&&e.jsx(ft,{image:I}),I&&e.jsx(ot,{image:I,isPro:i})]}),s[8]=p,s[9]=u,s[10]=i,s[11]=n,s[12]=g,s[13]=f,s[14]=C,s[15]=_,s[16]=T,s[17]=M,s[18]=F,s[19]=R,s[20]=O,s[21]=E,s[22]=B,s[23]=z,s[24]=V,s[25]=H,s[26]=$,s[27]=P,s[28]=A,s[29]=q}else g=s[12],f=s[13],C=s[14],_=s[15],T=s[16],M=s[17],F=s[18],R=s[19],O=s[20],E=s[21],B=s[22],z=s[23],V=s[24],H=s[25],$=s[26],P=s[27],A=s[28],q=s[29];let U;s[55]!==g||s[56]!==V||s[57]!==H||s[58]!==$?(U=e.jsx(g,{value:V,className:H,children:$}),s[55]=g,s[56]=V,s[57]=H,s[58]=$,s[59]=U):U=s[59];let K;s[60]!==f||s[61]!==C||s[62]!==_||s[63]!==T||s[64]!==M||s[65]!==U||s[66]!==P||s[67]!==A||s[68]!==q?(K=e.jsxs(f,{defaultValue:P,className:A,children:[q,C,_,T,M,U]}),s[60]=f,s[61]=C,s[62]=_,s[63]=T,s[64]=M,s[65]=U,s[66]=P,s[67]=A,s[68]=q,s[69]=K):K=s[69];let ue;s[70]===Symbol.for("react.memo_cache_sentinel")?(ue=e.jsx("div",{className:"text-center",children:e.jsxs(L,{size:"lg",onClick:b,className:"gap-2",children:[e.jsx(Ve,{className:"h-5 w-5"}),"Convertir d'autres images"]})}),s[70]=ue):ue=s[70];let Q;s[71]!==F||s[72]!==R||s[73]!==K?(Q=e.jsxs("div",{className:F,children:[R,K,ue]}),s[71]=F,s[72]=R,s[73]=K,s[74]=Q):Q=s[74];let X;s[75]!==O||s[76]!==E||s[77]!==Q?(X=e.jsxs("div",{className:O,children:[E,Q]}),s[75]=O,s[76]=E,s[77]=Q,s[78]=X):X=s[78];let Y;s[79]!==B||s[80]!==X?(Y=e.jsx("div",{className:B,children:X}),s[79]=B,s[80]=X,s[81]=Y):Y=s[81];let he;return s[82]!==z||s[83]!==Y?(he=e.jsxs(e.Fragment,{children:[z,Y]}),s[82]=z,s[83]=Y,s[84]=he):he=s[84],he}function vt(t){return e.jsx(Ze,{image:t},t.id)}function bt(t){return e.jsx(Ze,{image:t},t.id)}function Nt(t){return t.status==="failed"}function yt(t){return t.status==="completed"}function wt(){qe.visit("/")}export{Xt as default};
