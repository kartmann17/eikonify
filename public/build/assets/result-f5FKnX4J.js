import{r as x,j as s,c as ee,h as Me,f as Ye,e as Re}from"./app-B4MOq35b.js";import{c as H,d as es,b as ae,e as ss,B as G}from"./button-CxsBUnQw.js";import{S as ts,a as rs}from"./seo-head-Dr8YqPhG.js";import{b as j,C,a as _,d as le,c as v}from"./card-DZM7bfB2.js";import{u as as,c as Ce}from"./index-DDMaQtNZ.js";import{I as ls,R as ns,c as Le}from"./index-Cnf8hYrl.js";import{P as is}from"./index-LCcYOGVk.js";import{u as os}from"./index-CJPmBPF-.js";import{u as cs}from"./index-B2ZfnCfK.js";import{I as Oe}from"./image-card-C6f6Q7vk.js";import{C as pe}from"./check-jRbPaDh2.js";import{D as Ve}from"./download-DXC9WLu2.js";import{B as re}from"./badge-CMeIUBAB.js";import{P as $e}from"./progress-D60LEYvO.js";import{G as se,C as ds}from"./gauge-DB0Q-goE.js";import{Z as ms}from"./zap-pUkfiuz_.js";import{L as Be}from"./loader-circle-Wi5_1wlF.js";import{T as _e}from"./triangle-alert-D697BwTz.js";import{I as xs}from"./image-Dznv0gXY.js";import{L as us}from"./lock-DQ0nZWhL.js";import{G as hs}from"./globe-DG4gDj34.js";import{u as ps}from"./use-conversion-Br1XJCVF.js";import{R as Fe}from"./refresh-cw-Ck7-k6zc.js";import{A as fs}from"./arrow-left-tNC5SaG3.js";import{H as gs}from"./house-CH5oTiwg.js";import{F as js}from"./file-text-2wga7joC.js";/* empty css            */import"./x-Bw9THrat.js";import"./index-5f6hGpll.js";const vs=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],De=H("CodeXml",vs);const bs=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Ns=H("Code",bs);const ys=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],fe=H("Copy",ys);const ws=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Cs=H("EyeOff",ws);const _s=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ss=H("Eye",_s);const ks=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Y=H("FileJson",ks);const Ts=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Ms=H("FileSpreadsheet",Ts);const Ps=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],ze=H("Palette",Ps);const Es=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],Is=H("Twitter",Es);function $s(t,e=[]){let a=[];function r(c,o){const i=x.createContext(o),n=a.length;a=[...a,o];const m=d=>{const{scope:p,children:h,...f}=d,b=p?.[t]?.[n]||i,S=x.useMemo(()=>f,Object.values(f));return s.jsx(b.Provider,{value:S,children:h})};m.displayName=c+"Provider";function u(d,p){const h=p?.[t]?.[n]||i,f=x.useContext(h);if(f)return f;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${c}\``)}return[m,u]}const l=()=>{const c=a.map(o=>x.createContext(o));return function(i){const n=i?.[t]||c;return x.useMemo(()=>({[`__scope${t}`]:{...i,[t]:n}}),[i,n])}};return l.scopeName=t,[r,Fs(l,...e)]}function Fs(...t){const e=t[0];if(t.length===1)return e;const a=()=>{const r=t.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(c){const o=r.reduce((i,{useScope:n,scopeName:m})=>{const d=n(c)[`__scope${m}`];return{...i,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return a.scopeName=e.scopeName,a}function zs(t){const e=As(t),a=x.forwardRef((r,l)=>{const{children:c,...o}=r,i=x.Children.toArray(c),n=i.find(Ls);if(n){const m=n.props.children,u=i.map(d=>d===n?x.Children.count(m)>1?x.Children.only(null):x.isValidElement(m)?m.props.children:null:d);return s.jsx(e,{...o,ref:l,children:x.isValidElement(m)?x.cloneElement(m,void 0,u):null})}return s.jsx(e,{...o,ref:l,children:c})});return a.displayName=`${t}.Slot`,a}function As(t){const e=x.forwardRef((a,r)=>{const{children:l,...c}=a;if(x.isValidElement(l)){const o=Vs(l),i=Os(c,l.props);return l.type!==x.Fragment&&(i.ref=r?es(r,o):o),x.cloneElement(l,i)}return x.Children.count(l)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Rs=Symbol("radix.slottable");function Ls(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Rs}function Os(t,e){const a={...e};for(const r in e){const l=t[r],c=e[r];/^on[A-Z]/.test(r)?l&&c?a[r]=(...i)=>{const n=c(...i);return l(...i),n}:l&&(a[r]=l):r==="style"?a[r]={...l,...c}:r==="className"&&(a[r]=[l,c].filter(Boolean).join(" "))}return{...t,...a}}function Vs(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=e&&"isReactWarning"in e&&e.isReactWarning;return a?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=e&&"isReactWarning"in e&&e.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var Bs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ge=Bs.reduce((t,e)=>{const a=zs(`Primitive.${e}`),r=x.forwardRef((l,c)=>{const{asChild:o,...i}=l,n=o?a:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(n,{...i,ref:c})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),je="Tabs",[Ds]=$s(je,[Le]),Ge=Le(),[Gs,Pe]=Ds(je),He=x.forwardRef((t,e)=>{const{__scopeTabs:a,value:r,onValueChange:l,defaultValue:c,orientation:o="horizontal",dir:i,activationMode:n="automatic",...m}=t,u=os(i),[d,p]=as({prop:r,onChange:l,defaultProp:c??"",caller:je});return s.jsx(Gs,{scope:a,baseId:cs(),value:d,onValueChange:p,orientation:o,dir:u,activationMode:n,children:s.jsx(ge.div,{dir:u,"data-orientation":o,...m,ref:e})})});He.displayName=je;var qe="TabsList",We=x.forwardRef((t,e)=>{const{__scopeTabs:a,loop:r=!0,...l}=t,c=Pe(qe,a),o=Ge(a);return s.jsx(ns,{asChild:!0,...o,orientation:c.orientation,dir:c.dir,loop:r,children:s.jsx(ge.div,{role:"tablist","aria-orientation":c.orientation,...l,ref:e})})});We.displayName=qe;var Ue="TabsTrigger",Ze=x.forwardRef((t,e)=>{const{__scopeTabs:a,value:r,disabled:l=!1,...c}=t,o=Pe(Ue,a),i=Ge(a),n=Ke(o.baseId,r),m=Xe(o.baseId,r),u=r===o.value;return s.jsx(ls,{asChild:!0,...i,focusable:!l,active:u,children:s.jsx(ge.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":m,"data-state":u?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:n,...c,ref:e,onMouseDown:Ce(t.onMouseDown,d=>{!l&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Ce(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Ce(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!l&&d&&o.onValueChange(r)})})})});Ze.displayName=Ue;var Je="TabsContent",Qe=x.forwardRef((t,e)=>{const{__scopeTabs:a,value:r,forceMount:l,children:c,...o}=t,i=Pe(Je,a),n=Ke(i.baseId,r),m=Xe(i.baseId,r),u=r===i.value,d=x.useRef(u);return x.useEffect(()=>{const p=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(p)},[]),s.jsx(is,{present:l||u,children:({present:p})=>s.jsx(ge.div,{"data-state":u?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":n,hidden:!p,id:m,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:p&&c})})});Qe.displayName=Je;function Ke(t,e){return`${t}-trigger-${e}`}function Xe(t,e){return`${t}-content-${e}`}var Hs=He,qs=We,Ws=Ze,Us=Qe;function Ee(t){const e=ee.c(10);let a,r,l;e[0]!==t?({className:a,orientation:l,...r}=t,e[0]=t,e[1]=a,e[2]=r,e[3]=l):(a=e[1],r=e[2],l=e[3]);const c=l===void 0?"horizontal":l;let o;e[4]!==a?(o=ae("group/tabs flex gap-2 data-[orientation=horizontal]:flex-col",a),e[4]=a,e[5]=o):o=e[5];let i;return e[6]!==c||e[7]!==r||e[8]!==o?(i=s.jsx(Hs,{"data-slot":"tabs","data-orientation":c,orientation:c,className:o,...r}),e[6]=c,e[7]=r,e[8]=o,e[9]=i):i=e[9],i}const Zs=ss("rounded-lg p-[3px] group-data-[orientation=horizontal]/tabs:h-9 data-[variant=line]:rounded-none group/tabs-list text-muted-foreground inline-flex w-fit items-center justify-center group-data-[orientation=vertical]/tabs:h-fit group-data-[orientation=vertical]/tabs:flex-col",{variants:{variant:{default:"bg-muted",line:"gap-1 bg-transparent"}},defaultVariants:{variant:"default"}});function Ie(t){const e=ee.c(11);let a,r,l;e[0]!==t?({className:a,variant:l,...r}=t,e[0]=t,e[1]=a,e[2]=r,e[3]=l):(a=e[1],r=e[2],l=e[3]);const c=l===void 0?"default":l;let o;e[4]!==a||e[5]!==c?(o=ae(Zs({variant:c}),a),e[4]=a,e[5]=c,e[6]=o):o=e[6];let i;return e[7]!==r||e[8]!==o||e[9]!==c?(i=s.jsx(qs,{"data-slot":"tabs-list","data-variant":c,className:o,...r}),e[7]=r,e[8]=o,e[9]=c,e[10]=i):i=e[10],i}function q(t){const e=ee.c(8);let a,r;e[0]!==t?({className:a,...r}=t,e[0]=t,e[1]=a,e[2]=r):(a=e[1],r=e[2]);let l;e[3]!==a?(l=ae("focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring text-foreground/60 hover:text-foreground dark:text-muted-foreground dark:hover:text-foreground relative inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-all group-data-[orientation=vertical]/tabs:w-full group-data-[orientation=vertical]/tabs:justify-start focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 group-data-[variant=default]/tabs-list:data-[state=active]:shadow-sm group-data-[variant=line]/tabs-list:data-[state=active]:shadow-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4","group-data-[variant=line]/tabs-list:bg-transparent group-data-[variant=line]/tabs-list:data-[state=active]:bg-transparent dark:group-data-[variant=line]/tabs-list:data-[state=active]:border-transparent dark:group-data-[variant=line]/tabs-list:data-[state=active]:bg-transparent","data-[state=active]:bg-background dark:data-[state=active]:text-foreground dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 data-[state=active]:text-foreground","after:bg-foreground after:absolute after:opacity-0 after:transition-opacity group-data-[orientation=horizontal]/tabs:after:inset-x-0 group-data-[orientation=horizontal]/tabs:after:bottom-[-5px] group-data-[orientation=horizontal]/tabs:after:h-0.5 group-data-[orientation=vertical]/tabs:after:inset-y-0 group-data-[orientation=vertical]/tabs:after:-right-1 group-data-[orientation=vertical]/tabs:after:w-0.5 group-data-[variant=line]/tabs-list:data-[state=active]:after:opacity-100",a),e[3]=a,e[4]=l):l=e[4];let c;return e[5]!==r||e[6]!==l?(c=s.jsx(Ws,{"data-slot":"tabs-trigger",className:l,...r}),e[5]=r,e[6]=l,e[7]=c):c=e[7],c}function W(t){const e=ee.c(8);let a,r;e[0]!==t?({className:a,...r}=t,e[0]=t,e[1]=a,e[2]=r):(a=e[1],r=e[2]);let l;e[3]!==a?(l=ae("flex-1 outline-none",a),e[3]=a,e[4]=l):l=e[4];let c;return e[5]!==r||e[6]!==l?(c=s.jsx(Us,{"data-slot":"tabs-content",className:l,...r}),e[5]=r,e[6]=l,e[7]=c):c=e[7],c}const he={picture:{label:"<picture>",language:"html",description:"Tag HTML5 avec support AVIF, WebP et fallback"},img:{label:"<img>",language:"html",description:"Tag img basique avec attributs SEO"},img_srcset:{label:"srcset",language:"html",description:"Tag img avec images responsive"},react:{label:"React",language:"jsx",description:"Composant React fonctionnel"},vue:{label:"Vue",language:"vue",description:"Composant Vue 3 avec script setup"},nextjs:{label:"Next.js",language:"jsx",description:"Composant next/image optimisé"},css:{label:"CSS",language:"css",description:"Background-image avec image-set()"},lazy:{label:"LQIP",language:"html",description:"Chargement progressif avec placeholder"}};function Js({image:t,className:e}){const[a,r]=x.useState("picture"),[l,c]=x.useState({}),[o,i]=x.useState({}),[n,m]=x.useState(null),u=x.useCallback(async h=>{if(!(l[h]||o[h])){i(f=>({...f,[h]:!0}));try{const f=await Me.get(`/api/optiseo/images/${t.id}/code/${h}`);c(b=>({...b,[h]:f.data.code}))}catch(f){console.error("Failed to fetch code:",f)}finally{i(f=>({...f,[h]:!1}))}}},[t.id,l,o]),d=h=>{const f=h;r(f),u(f)},p=async h=>{const f=l[h];if(f)try{await navigator.clipboard.writeText(f),m(h),setTimeout(()=>m(null),2e3)}catch(b){console.error("Failed to copy:",b)}};return x.useState(()=>{u("picture")}),s.jsxs(j,{className:e,children:[s.jsxs(C,{children:[s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5"}),"Génération de code"]}),s.jsx(le,{children:"Copiez le code HTML, React, Vue ou CSS pour intégrer cette image"})]}),s.jsx(v,{children:s.jsxs(Ee,{value:a,onValueChange:d,children:[s.jsx(Ie,{className:"grid w-full grid-cols-4 lg:grid-cols-8",children:Object.keys(he).map(h=>s.jsx(q,{value:h,className:"text-xs",children:he[h].label},h))}),Object.keys(he).map(h=>s.jsx(W,{value:h,className:"mt-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:he[h].description}),s.jsx(G,{variant:"outline",size:"sm",onClick:()=>p(h),disabled:!l[h],className:"gap-2",children:n===h?s.jsxs(s.Fragment,{children:[s.jsx(pe,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(fe,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("div",{className:"relative",children:o[h]?s.jsx("div",{className:"flex h-48 items-center justify-center rounded-lg border bg-muted",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"Génération en cours..."})}):l[h]?s.jsx("pre",{className:"max-h-96 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-sm whitespace-pre-wrap break-words",children:l[h]})}):s.jsx("div",{className:"flex h-48 items-center justify-center rounded-lg border bg-muted",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"Cliquez sur l'onglet pour générer le code"})})})]})},h))]})})]})}const Qs=[{format:"zip",label:"Archive ZIP",description:"Images converties + fichiers de métadonnées",icon:s.jsx(Ve,{className:"h-5 w-5"})},{format:"csv",label:"Fichier CSV",description:"Métadonnées SEO au format tableur",icon:s.jsx(Ms,{className:"h-5 w-5"})},{format:"json",label:"Fichier JSON",description:"Données structurées pour intégration CMS",icon:s.jsx(Y,{className:"h-5 w-5"})},{format:"html",label:"Snippets HTML",description:"Balises <img> et <picture> prêtes à copier",icon:s.jsx(Ns,{className:"h-5 w-5"})}];function Ks({batch:t,className:e}){const[a,r]=x.useState(null),l=x.useCallback(async i=>{r(i);try{const n=`/api/optiseo/export/${t.id}/${i}`;if(i!=="json"){const m=document.createElement("a");m.href=n,m.download=`optiseo-${t.id}.${i==="html"?"html":i}`,document.body.appendChild(m),m.click(),document.body.removeChild(m)}else window.open(n,"_blank")}catch(n){console.error("Export error:",n)}finally{r(null)}},[t.id]),c=t.images?.filter(i=>i.status==="completed").length??0,o=t.images?.reduce((i,n)=>n.size_saved&&n.size_saved>0?i+n.size_saved:i,0)??0;return s.jsxs("div",{className:ae("space-y-6",e),children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[s.jsx(j,{children:s.jsxs(v,{className:"pt-4",children:[s.jsx("p",{className:"text-2xl font-bold",children:c}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Images converties"})]})}),s.jsx(j,{children:s.jsxs(v,{className:"pt-4",children:[s.jsx("p",{className:"text-2xl font-bold",children:o>0?Xs(o):"—"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Espace économisé"})]})}),s.jsx(j,{children:s.jsxs(v,{className:"pt-4",children:[s.jsx("p",{className:"text-2xl font-bold",children:t.settings?.format?.toUpperCase()??"—"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Format de sortie"})]})}),s.jsx(j,{children:s.jsxs(v,{className:"pt-4",children:[s.jsxs("p",{className:"text-2xl font-bold",children:[t.settings?.quality??80,"%"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Qualité"})]})})]}),s.jsxs(j,{children:[s.jsxs(C,{children:[s.jsx(_,{children:"Télécharger vos images"}),s.jsx(le,{children:"Choisissez le format d'export adapté à vos besoins"})]}),s.jsx(v,{children:s.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Qs.map(i=>s.jsxs(G,{variant:"outline",className:"h-auto flex-col items-start gap-2 p-4 text-left",onClick:()=>l(i.format),disabled:a!==null,children:[s.jsxs("div",{className:"flex w-full items-center gap-3",children:[a===i.format?s.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-primary border-t-transparent"}):i.icon,s.jsx("span",{className:"font-medium",children:i.label})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:i.description})]},i.format))})})]}),t.keywords&&t.keywords.length>0&&s.jsxs(j,{children:[s.jsx(C,{children:s.jsx(_,{className:"text-base",children:"Mots-clés utilisés"})}),s.jsx(v,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:t.keywords.map((i,n)=>s.jsx("span",{className:"rounded-full bg-muted px-3 py-1 text-sm",children:i},n))})})]})]})}function Xs(t){if(t===0)return"0 B";const e=1024,a=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(1))+" "+a[r]}const Ys={excellent:"bg-green-500",good:"bg-green-400","needs-improvement":"bg-yellow-500",poor:"bg-red-500"},et={excellent:"Excellent",good:"Bon","needs-improvement":"À améliorer",poor:"Mauvais"};function st({image:t,isPro:e=!1,className:a}){const[r,l]=x.useState(null),[c,o]=x.useState(!1),[i,n]=x.useState(null);return x.useEffect(()=>{if(!e)return;(async()=>{o(!0),n(null);try{const u=await Me.get(`/api/optiseo/images/${t.id}/performance`);l(u.data.analysis)}catch(u){n(u.response?.data?.message||"Erreur lors de l'analyse")}finally{o(!1)}})()},[t.id,e]),e?c?s.jsxs(j,{className:a,children:[s.jsx(C,{children:s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(se,{className:"h-5 w-5"}),"Analyse de performance"]})}),s.jsx(v,{children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})]}):i||!r?s.jsxs(j,{className:a,children:[s.jsx(C,{children:s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(se,{className:"h-5 w-5"}),"Analyse de performance"]})}),s.jsx(v,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(_e,{className:"mb-4 h-12 w-12 text-destructive/50"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i||"Analyse non disponible"})]})})]}):s.jsxs(j,{className:a,children:[s.jsxs(C,{children:[s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(se,{className:"h-5 w-5"}),"Analyse de performance"]}),s.jsx(le,{children:"Impact sur les Core Web Vitals et recommandations"})]}),s.jsxs(v,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"relative h-24 w-24",children:[s.jsxs("svg",{className:"h-24 w-24 -rotate-90 transform",children:[s.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-muted"}),s.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:`${r.score/100*251.2} 251.2`,className:r.score>=90?"text-green-500":r.score>=70?"text-green-400":r.score>=50?"text-yellow-500":"text-red-500"})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("span",{className:"text-2xl font-bold",children:r.score})})]}),s.jsxs("div",{children:[s.jsx(re,{variant:"secondary",className:`${Ys[r.rating]} text-white`,children:et[r.rating]}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Score de performance global basé sur la taille, le format et les optimisations"})]})]}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"LCP Impact"}),s.jsxs(re,{variant:"outline",className:r.lcp_impact.rating==="good"?"border-green-500 text-green-600":r.lcp_impact.rating==="needs-improvement"?"border-yellow-500 text-yellow-600":"border-red-500 text-red-600",children:[r.lcp_impact.estimated_ms," ms"]})]}),s.jsx($e,{value:Math.min(100,r.lcp_impact.estimated_ms/r.lcp_impact.threshold_poor*100),className:"h-2"}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:r.lcp_impact.rating==="good"?"Bon temps de chargement":r.lcp_impact.rating==="needs-improvement"?"Temps de chargement acceptable":"Temps de chargement trop long"})]}),s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"CLS Impact"}),s.jsx(re,{variant:"outline",className:r.cls_impact.rating==="good"?"border-green-500 text-green-600":"border-red-500 text-red-600",children:r.cls_impact.score.toFixed(2)})]}),s.jsx($e,{value:Math.min(100,r.cls_impact.score*400),className:"h-2"}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:r.cls_impact.reason})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-3 text-sm font-medium",children:"Temps de chargement estimé"}),s.jsx("div",{className:"grid gap-2 sm:grid-cols-3",children:Object.entries(r.load_times).map(([m,u])=>s.jsxs("div",{className:"flex items-center justify-between rounded-lg border px-3 py-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:u.label}),s.jsxs("span",{className:"text-sm font-medium",children:[u.time_ms," ms"]})]},m))})]}),r.recommendations.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"mb-3 text-sm font-medium",children:"Recommandations"}),s.jsx("div",{className:"space-y-2",children:r.recommendations.map((m,u)=>s.jsx("div",{className:`rounded-lg border p-3 ${m.priority==="high"?"border-red-200 bg-red-50 dark:border-red-900 dark:bg-red-950":m.priority==="medium"?"border-yellow-200 bg-yellow-50 dark:border-yellow-900 dark:bg-yellow-950":"border-muted bg-muted/30"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[m.priority==="high"?s.jsx(_e,{className:"mt-0.5 h-4 w-4 text-red-500"}):m.priority==="medium"?s.jsx(_e,{className:"mt-0.5 h-4 w-4 text-yellow-500"}):s.jsx(ds,{className:"mt-0.5 h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:m.title}),s.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:m.description})]})]})},u))})]})]})]}):s.jsxs(j,{className:a,children:[s.jsx(C,{children:s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(se,{className:"h-5 w-5"}),"Analyse de performance"]})}),s.jsx(v,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(ms,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),s.jsx("p",{className:"mb-2 font-medium",children:"Fonctionnalité Pro"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"L'analyse de performance est réservée aux utilisateurs Pro"})]})})]})}var tt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],te=t=>{let e=0;for(let a=0;a<t.length;a++){let r=t[a],l=tt.indexOf(r);e=e*83+l}return e},Se=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},ke=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},rt=t=>t<0?-1:1,Te=(t,e)=>rt(t)*Math.pow(Math.abs(t),e),Ae=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},at=t=>{if(!t||t.length<6)throw new Ae("The blurhash string must be at least 6 characters");let e=te(t[0]),a=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*a)throw new Ae(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*a}`)},lt=t=>{let e=t>>16,a=t>>8&255,r=t&255;return[Se(e),Se(a),Se(r)]},nt=(t,e)=>{let a=Math.floor(t/361),r=Math.floor(t/19)%19,l=t%19;return[Te((a-9)/9,2)*e,Te((r-9)/9,2)*e,Te((l-9)/9,2)*e]},it=(t,e,a,r)=>{at(t),r=r|1;let l=te(t[0]),c=Math.floor(l/9)+1,o=l%9+1,i=(te(t[1])+1)/166,n=new Array(o*c);for(let d=0;d<n.length;d++)if(d===0){let p=te(t.substring(2,6));n[d]=lt(p)}else{let p=te(t.substring(4+d*2,6+d*2));n[d]=nt(p,i*r)}let m=e*4,u=new Uint8ClampedArray(m*a);for(let d=0;d<a;d++)for(let p=0;p<e;p++){let h=0,f=0,b=0;for(let N=0;N<c;N++)for(let y=0;y<o;y++){let T=Math.cos(Math.PI*p*y/e)*Math.cos(Math.PI*d*N/a),M=n[y+N*o];h+=M[0]*T,f+=M[1]*T,b+=M[2]*T}let S=ke(h),I=ke(f),k=ke(b);u[4*p+0+d*m]=S,u[4*p+1+d*m]=I,u[4*p+2+d*m]=k,u[4*p+3+d*m]=255}return u},ot=it;function ct(t){const e=ee.c(55),{image:a,className:r}=t,[l,c]=x.useState(!1),[o,i]=x.useState(null),n=a.performance,m=n?.blur_hash||n?.dominant_color;let u;e[0]!==n?(u=()=>{if(n?.blur_hash)try{const z=ot(n.blur_hash,32,32),P=document.createElement("canvas");P.width=32,P.height=32;const E=P.getContext("2d");if(E){const D=E.createImageData(32,32);D.data.set(z),E.putImageData(D,0,0),i(P.toDataURL())}}catch(z){console.error("Failed to decode BlurHash:",z)}},e[0]=n,e[1]=u):u=e[1];const d=n?.blur_hash;let p;if(e[2]!==d?(p=[d],e[2]=d,e[3]=p):p=e[3],x.useEffect(u,p),!m){let z;e[4]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(C,{children:s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(ze,{className:"h-5 w-5"}),"Placeholders & Couleurs"]})}),e[4]=z):z=e[4];let P;e[5]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(v,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(xs,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les données de performance ne sont pas encore générées pour cette image"})]})}),e[5]=P):P=e[5];let E;return e[6]!==r?(E=s.jsxs(j,{className:r,children:[z,P]}),e[6]=r,e[7]=E):E=e[7],E}let h;e[8]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsxs(C,{children:[s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(ze,{className:"h-5 w-5"}),"Placeholders & Couleurs"]}),s.jsx(le,{children:"Utilisez ces données pour améliorer le chargement perçu"})]}),e[8]=h):h=e[8];let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx("span",{className:"text-sm font-medium",children:"Comparaison"}),e[9]=f):f=e[9];let b;e[10]!==l?(b=()=>c(!l),e[10]=l,e[11]=b):b=e[11];let S;e[12]!==l?(S=l?s.jsxs(s.Fragment,{children:[s.jsx(Cs,{className:"h-4 w-4"}),"Voir placeholder"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ss,{className:"h-4 w-4"}),"Voir original"]}),e[12]=l,e[13]=S):S=e[13];let I;e[14]!==b||e[15]!==S?(I=s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[f,s.jsx(G,{variant:"outline",size:"sm",onClick:b,className:"gap-2",children:S})]}),e[14]=b,e[15]=S,e[16]=I):I=e[16];let k;e[17]!==a.converted?.url||e[18]!==a.original||e[19]!==n||e[20]!==l?(k=n?.lqip_data_uri&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"LQIP (Low Quality Image Placeholder)"}),s.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg border bg-muted",children:s.jsx("img",{src:l?a.converted?.url??a.original.url??"":n.lqip_data_uri,alt:"LQIP preview",className:"h-full w-full object-cover",style:l?void 0:{filter:"blur(10px)",transform:"scale(1.1)"}})})]}),e[17]=a.converted?.url,e[18]=a.original,e[19]=n,e[20]=l,e[21]=k):k=e[21];let N;e[22]!==o||e[23]!==a.converted?.url||e[24]!==a.original||e[25]!==l?(N=o&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"BlurHash"}),s.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg border bg-muted",children:s.jsx("img",{src:l?a.converted?.url??a.original.url??"":o,alt:"BlurHash preview",className:"h-full w-full object-cover",style:l?void 0:{filter:"blur(0px)"}})})]}),e[22]=o,e[23]=a.converted?.url,e[24]=a.original,e[25]=l,e[26]=N):N=e[26];let y;e[27]!==N||e[28]!==k?(y=s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[k,N]}),e[27]=N,e[28]=k,e[29]=y):y=e[29];let T;e[30]!==y||e[31]!==I?(T=s.jsxs("div",{children:[I,y]}),e[30]=y,e[31]=I,e[32]=T):T=e[32];let M;e[33]!==n?(M=n?.blur_hash&&s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm font-medium",children:"BlurHash"}),s.jsx("code",{className:"block rounded-lg border bg-muted p-3 text-xs break-all",children:n.blur_hash})]}),e[33]=n,e[34]=M):M=e[34];let R;e[35]!==n?(R=n?.dominant_color&&s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm font-medium",children:"Couleur dominante"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg border shadow-sm",style:{backgroundColor:n.dominant_color}}),s.jsx("code",{className:"text-sm",children:n.dominant_color})]})]}),e[35]=n,e[36]=R):R=e[36];let $;e[37]!==n?($=n?.color_palette&&n.color_palette.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm font-medium",children:"Palette de couleurs"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.color_palette.map(dt)})]}),e[37]=n,e[38]=$):$=e[38];let L;e[39]!==n?.has_transparency?(L=n?.has_transparency&&s.jsx(re,{variant:"secondary",children:"Transparence"}),e[39]=n?.has_transparency,e[40]=L):L=e[40];let F;e[41]!==n?(F=n?.aspect_ratio&&s.jsxs(re,{variant:"outline",children:["Ratio: ",n.aspect_ratio]}),e[41]=n,e[42]=F):F=e[42];let O;e[43]!==L||e[44]!==F?(O=s.jsxs("div",{className:"flex flex-wrap gap-2",children:[L,F]}),e[43]=L,e[44]=F,e[45]=O):O=e[45];let V;e[46]!==T||e[47]!==M||e[48]!==R||e[49]!==$||e[50]!==O?(V=s.jsxs(v,{className:"space-y-6",children:[T,M,R,$,O]}),e[46]=T,e[47]=M,e[48]=R,e[49]=$,e[50]=O,e[51]=V):V=e[51];let B;return e[52]!==r||e[53]!==V?(B=s.jsxs(j,{className:r,children:[h,V]}),e[52]=r,e[53]=V,e[54]=B):B=e[54],B}function dt(t,e){return s.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-muted/50 px-2 py-1",children:[s.jsx("div",{className:"h-6 w-6 rounded border shadow-sm",style:{backgroundColor:t}}),s.jsx("code",{className:"text-xs",children:t})]},e)}function mt({image:t,isPro:e=!1,className:a}){const[r,l]=x.useState(null),[c,o]=x.useState(!1),[i,n]=x.useState(null),[m,u]=x.useState(null);x.useEffect(()=>{if(!e)return;(async()=>{o(!0),n(null);try{const h=await Me.get(`/api/optiseo/images/${t.id}/schema`,{params:{base_url:window.location.origin}});l(h.data.schemas)}catch(h){n(h.response?.data?.message||"Erreur lors du chargement")}finally{o(!1)}})()},[t.id,e]);const d=x.useCallback(async(p,h)=>{try{await navigator.clipboard.writeText(p),u(h),setTimeout(()=>u(null),2e3)}catch(f){console.error("Failed to copy:",f)}},[]);return e?c?s.jsxs(j,{className:a,children:[s.jsx(C,{children:s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(Y,{className:"h-5 w-5"}),"Schema Markup"]})}),s.jsx(v,{children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})]}):i||!r?s.jsxs(j,{className:a,children:[s.jsx(C,{children:s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(Y,{className:"h-5 w-5"}),"Schema Markup"]})}),s.jsx(v,{children:s.jsx("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:i||"Schema non disponible"})})})]}):s.jsxs(j,{className:a,children:[s.jsxs(C,{children:[s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(Y,{className:"h-5 w-5"}),"Schema Markup"]}),s.jsx(le,{children:"Données structurées pour les moteurs de recherche et réseaux sociaux"})]}),s.jsx(v,{children:s.jsxs(Ee,{defaultValue:"jsonld",children:[s.jsxs(Ie,{className:"grid w-full grid-cols-3",children:[s.jsxs(q,{value:"jsonld",className:"gap-2",children:[s.jsx(Y,{className:"h-4 w-4"}),"JSON-LD"]}),s.jsxs(q,{value:"opengraph",className:"gap-2",children:[s.jsx(hs,{className:"h-4 w-4"}),"Open Graph"]}),s.jsxs(q,{value:"twitter",className:"gap-2",children:[s.jsx(Is,{className:"h-4 w-4"}),"Twitter"]})]}),s.jsxs(W,{value:"jsonld",className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez ce script dans le <head> de votre page"}),s.jsx(G,{variant:"outline",size:"sm",onClick:()=>d(r.json_ld_script,"jsonld"),className:"gap-2",children:m==="jsonld"?s.jsxs(s.Fragment,{children:[s.jsx(pe,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(fe,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(r.json_ld,null,2)})})]}),s.jsxs(W,{value:"opengraph",className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Meta tags Open Graph pour Facebook, LinkedIn, etc."}),s.jsx(G,{variant:"outline",size:"sm",onClick:()=>d(r.open_graph_html,"og"),className:"gap-2",children:m==="og"?s.jsxs(s.Fragment,{children:[s.jsx(pe,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(fe,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-xs whitespace-pre-wrap",children:r.open_graph_html})}),s.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4",children:[s.jsx("p",{className:"mb-2 text-xs font-medium text-muted-foreground",children:"Aperçu"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("img",{src:t.converted?.url??t.original.url??"",alt:t.seo.alt_text??"",className:"h-16 w-16 rounded object-cover"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"truncate text-sm font-medium",children:r.open_graph["og:image:alt"]||t.seo.alt_text}),s.jsx("p",{className:"truncate text-xs text-muted-foreground",children:t.converted?.url??t.original.url})]})]})]})]}),s.jsxs(W,{value:"twitter",className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Meta tags Twitter Card"}),s.jsx(G,{variant:"outline",size:"sm",onClick:()=>d(r.twitter_card_html,"twitter"),className:"gap-2",children:m==="twitter"?s.jsxs(s.Fragment,{children:[s.jsx(pe,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(fe,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-xs whitespace-pre-wrap",children:r.twitter_card_html})})]})]})})]}):s.jsxs(j,{className:a,children:[s.jsx(C,{children:s.jsxs(_,{className:"flex items-center gap-2",children:[s.jsx(Y,{className:"h-5 w-5"}),"Schema Markup"]})}),s.jsx(v,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(us,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),s.jsx("p",{className:"mb-2 font-medium",children:"Fonctionnalité Pro"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Le schema markup est réservé aux utilisateurs Pro"})]})})]})}function Wt(t){const e=ee.c(80),{batchId:a,initialBatch:r}=t,{batch:l,pollProgress:c}=ps(),{auth:o}=Ye().props,i=o?.isPro??!1,[n,m]=x.useState(null);let u,d;e[0]!==a||e[1]!==r||e[2]!==c?(u=()=>{r||c(a)},d=[a,r,c],e[0]=a,e[1]=r,e[2]=c,e[3]=u,e[4]=d):(u=e[3],d=e[4]),x.useEffect(u,d);const p=l??r,h=ft;let f;e[5]!==a?(f=()=>{Re.visit(`/convert/${a}`)},e[5]=a,e[6]=f):f=e[6];const b=f;if(!p){let g;return e[7]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx("div",{className:"flex min-h-screen items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Fe,{className:"mx-auto h-8 w-8 animate-spin text-muted-foreground"}),s.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement des résultats..."})]})}),e[7]=g):g=e[7],g}let S,I,k,N,y,T,M,R,$,L,F,O,V,B,z,P,E;if(e[8]!==p||e[9]!==b||e[10]!==i||e[11]!==n){const g=p.images?.filter(pt)??[],ve=p.images?.filter(ht)??[],A=n??g[0]??null;e[29]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(ts,{...rs.result}),e[29]=F):F=e[29],L="min-h-screen bg-gradient-to-b from-background to-muted/30",R="container mx-auto px-4 py-8";let oe;e[30]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(fs,{className:"mr-2 h-4 w-4"}),e[30]=oe):oe=e[30];let K;e[31]!==b?(K=s.jsxs(G,{variant:"ghost",onClick:b,children:[oe,"Paramètres"]}),e[31]=b,e[32]=K):K=e[32];let ce;e[33]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsxs(G,{variant:"outline",onClick:h,children:[s.jsx(gs,{className:"mr-2 h-4 w-4"}),"Nouvelle conversion"]}),e[33]=ce):ce=e[33],e[34]!==K?($=s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[K,ce]}),e[34]=K,e[35]=$):$=e[35],T="mx-auto max-w-6xl space-y-8";let de;e[36]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx("h1",{className:"mb-2 text-3xl font-bold",children:"Conversion terminée !"}),e[36]=de):de=e[36],M=s.jsxs("div",{className:"text-center",children:[de,s.jsxs("p",{className:"text-muted-foreground",children:[g.length," image",g.length>1?"s":""," convertie",g.length>1?"s":""," avec succès"]})]}),I=Ee,z="export",P="w-full";let me;e[37]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsxs(q,{value:"export",className:"gap-2",children:[s.jsx(Ve,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Télécharger"})]}),e[37]=me):me=e[37];let xe;e[38]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsxs(q,{value:"seo",className:"gap-2",children:[s.jsx(js,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"SEO"})]}),e[38]=xe):xe=e[38];let ue;e[39]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsxs(q,{value:"code",className:"gap-2",children:[s.jsx(De,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Code"})]}),e[39]=ue):ue=e[39],e[40]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsxs(Ie,{className:"grid w-full grid-cols-4",children:[me,xe,ue,s.jsxs(q,{value:"performance",className:"gap-2",children:[s.jsx(se,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Performance"})]})]}),e[40]=E):E=e[40];let X;e[41]!==p?(X=s.jsx(Ks,{batch:p}),e[41]=p,e[42]=X):X=e[42];const be=g.length>0&&s.jsxs(j,{children:[s.jsx(C,{children:s.jsx(_,{children:"Images converties"})}),s.jsx(v,{children:s.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:g.map(ut)})})]}),Ne=ve.length>0&&s.jsxs(j,{className:"border-destructive/50",children:[s.jsx(C,{children:s.jsxs(_,{className:"text-destructive",children:["Images en échec (",ve.length,")"]})}),s.jsx(v,{children:s.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:ve.map(xt)})})]});e[43]!==X||e[44]!==be||e[45]!==Ne?(k=s.jsxs(W,{value:"export",className:"mt-6 space-y-6",children:[X,be,Ne]}),e[43]=X,e[44]=be,e[45]=Ne,e[46]=k):k=e[46];const ye=g.length>0&&s.jsxs(s.Fragment,{children:[g.length>1&&s.jsxs(j,{children:[s.jsx(C,{children:s.jsx(_,{className:"text-base",children:"Sélectionnez une image"})}),s.jsx(v,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(w=>s.jsx("button",{onClick:()=>m(w),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(n?.id??g[0]?.id)===w.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:s.jsx("img",{src:w.converted?.url??w.original.url??"",alt:w.seo.alt_text??"",className:"h-16 w-16 object-cover"})},w.id))})})]}),s.jsxs(j,{children:[s.jsx(C,{children:s.jsx(_,{children:"Métadonnées SEO générées"})}),s.jsx(v,{children:A&&s.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4",children:[s.jsx("p",{className:"mb-2 font-medium text-sm",children:A.seo.filename}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"alt:"})," ",s.jsxs("span",{className:"text-foreground",children:['"',A.seo.alt_text,'"']})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"title:"})," ",s.jsxs("span",{className:"text-foreground",children:['"',A.seo.title_text,'"']})]}),A.seo.meta_description&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"meta:"})," ",s.jsxs("span",{className:"text-foreground",children:['"',A.seo.meta_description,'"']})]})]})]})})]}),A&&s.jsx(mt,{image:A,isPro:i})]});e[47]!==ye?(N=s.jsx(W,{value:"seo",className:"mt-6 space-y-6",children:ye}),e[47]=ye,e[48]=N):N=e[48];const we=g.length>0&&s.jsxs(s.Fragment,{children:[g.length>1&&s.jsxs(j,{children:[s.jsx(C,{children:s.jsx(_,{className:"text-base",children:"Sélectionnez une image"})}),s.jsx(v,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(w=>s.jsx("button",{onClick:()=>m(w),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(n?.id??g[0]?.id)===w.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:s.jsx("img",{src:w.converted?.url??w.original.url??"",alt:w.seo.alt_text??"",className:"h-16 w-16 object-cover"})},w.id))})})]}),A&&s.jsx(Js,{image:A})]});e[49]!==we?(y=s.jsx(W,{value:"code",className:"mt-6 space-y-6",children:we}),e[49]=we,e[50]=y):y=e[50],S=W,O="performance",V="mt-6 space-y-6",B=g.length>0&&s.jsxs(s.Fragment,{children:[g.length>1&&s.jsxs(j,{children:[s.jsx(C,{children:s.jsx(_,{className:"text-base",children:"Sélectionnez une image"})}),s.jsx(v,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(w=>s.jsx("button",{onClick:()=>m(w),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(n?.id??g[0]?.id)===w.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:s.jsx("img",{src:w.converted?.url??w.original.url??"",alt:w.seo.alt_text??"",className:"h-16 w-16 object-cover"})},w.id))})})]}),A&&s.jsx(ct,{image:A}),A&&s.jsx(st,{image:A,isPro:i})]}),e[8]=p,e[9]=b,e[10]=i,e[11]=n,e[12]=S,e[13]=I,e[14]=k,e[15]=N,e[16]=y,e[17]=T,e[18]=M,e[19]=R,e[20]=$,e[21]=L,e[22]=F,e[23]=O,e[24]=V,e[25]=B,e[26]=z,e[27]=P,e[28]=E}else S=e[12],I=e[13],k=e[14],N=e[15],y=e[16],T=e[17],M=e[18],R=e[19],$=e[20],L=e[21],F=e[22],O=e[23],V=e[24],B=e[25],z=e[26],P=e[27],E=e[28];let D;e[51]!==S||e[52]!==O||e[53]!==V||e[54]!==B?(D=s.jsx(S,{value:O,className:V,children:B}),e[51]=S,e[52]=O,e[53]=V,e[54]=B,e[55]=D):D=e[55];let U;e[56]!==I||e[57]!==k||e[58]!==N||e[59]!==y||e[60]!==D||e[61]!==z||e[62]!==P||e[63]!==E?(U=s.jsxs(I,{defaultValue:z,className:P,children:[E,k,N,y,D]}),e[56]=I,e[57]=k,e[58]=N,e[59]=y,e[60]=D,e[61]=z,e[62]=P,e[63]=E,e[64]=U):U=e[64];let ne;e[65]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx("div",{className:"text-center",children:s.jsxs(G,{size:"lg",onClick:h,className:"gap-2",children:[s.jsx(Fe,{className:"h-5 w-5"}),"Convertir d'autres images"]})}),e[65]=ne):ne=e[65];let Z;e[66]!==T||e[67]!==M||e[68]!==U?(Z=s.jsxs("div",{className:T,children:[M,U,ne]}),e[66]=T,e[67]=M,e[68]=U,e[69]=Z):Z=e[69];let J;e[70]!==R||e[71]!==$||e[72]!==Z?(J=s.jsxs("div",{className:R,children:[$,Z]}),e[70]=R,e[71]=$,e[72]=Z,e[73]=J):J=e[73];let Q;e[74]!==L||e[75]!==J?(Q=s.jsx("div",{className:L,children:J}),e[74]=L,e[75]=J,e[76]=Q):Q=e[76];let ie;return e[77]!==F||e[78]!==Q?(ie=s.jsxs(s.Fragment,{children:[F,Q]}),e[77]=F,e[78]=Q,e[79]=ie):ie=e[79],ie}function xt(t){return s.jsx(Oe,{image:t},t.id)}function ut(t){return s.jsx(Oe,{image:t},t.id)}function ht(t){return t.status==="failed"}function pt(t){return t.status==="completed"}function ft(){Re.visit("/")}export{Wt as default};
