import{c as Pe,r as ve,j as s,L as pe,e as we,H as ze}from"./app-akdF0UQF.js";import{A as Ie}from"./app-layout-D-I8VZ2C.js";import{c as xe,a as he,d as fe,C as ue,b as je}from"./card-CDiYXeb9.js";import{c as Ee,B as l}from"./button-BdOT1yAC.js";import{P as Ce}from"./progress-DmsJ_EE7.js";import{B as be}from"./badge-DYF6X-zs.js";import{A as qe,a as De}from"./alert-Tus7UX5A.js";import{D as Le,a as He,b as Be,c as Ue,d as Oe,e as Me,f as Ve}from"./dialog-DJcMuMHX.js";import{u as $e}from"./useTranslation-C6fWKkAI.js";import{I as Se}from"./image-BdZwaCyV.js";import{S as Xe}from"./scissors-FNp1qvth.js";import{T as ke}from"./triangle-alert-CZs1nMlt.js";import{S as Ge}from"./settings-DIMWCOz3.js";import{R as Je}from"./refresh-cw-Cd8FkgG_.js";import{X as Ke}from"./x-DN597F1n.js";import{E as Qe}from"./external-link-DgmQcojT.js";import{A as We}from"./arrow-left-DlH8pV6o.js";import{T as Ye}from"./trending-up-B6MdyMiq.js";import{C as Ze}from"./credit-card-woI18zvf.js";import{F as es}from"./file-text-BYx2x2y0.js";import{D as ss}from"./download-BaJrsnO6.js";/* empty css            */import"./index-DWathVxY.js";import"./index-DYJll8sb.js";import"./index-D6SAxgfg.js";import"./index-Cnj7nTTh.js";import"./index-CwlvpiCt.js";import"./index-C91kYN7g.js";import"./index-CjOEJVw9.js";import"./dropdown-menu-u_F1iKCr.js";import"./index-Duuv9Igk.js";import"./index-D_gUAlRl.js";import"./index-CtrMaZOQ.js";import"./index-mbkb6Dy8.js";import"./shield-eVjY4jfl.js";const ts=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Fe=Ee("Package",ts);function Us(i){const e=Pe.c(143),{quota:a,subscription:r,history:Z,invoices:ee}=i,{t}=$e(),[ge,_e]=ve.useState(!1),[W,se]=ve.useState(!1);let n;e[0]!==t?(n=t("nav.dashboard"),e[0]=t,e[1]=n):n=e[1];let te;e[2]!==n?(te=[{title:n,href:"/dashboard"}],e[2]=n,e[3]=te):te=e[3];const Ne=te;let ae;e[4]===Symbol.for("react.memo_cache_sentinel")?(ae=()=>{se(!0),we.post("/subscription/cancel",{},{onFinish:()=>{se(!1),_e(!1)}})},e[4]=ae):ae=e[4];const Te=ae;let re;e[5]===Symbol.for("react.memo_cache_sentinel")?(re=()=>{se(!0),we.post("/subscription/resume",{},{onFinish:()=>se(!1)})},e[5]=re):re=e[5];const Ae=re,Y=is,Re=rs;let ie;e[6]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(ze,{title:"Dashboard"}),e[6]=ie):ie=e[6];let c;e[7]!==t?(c=t("dashboard.title"),e[7]=t,e[8]=c):c=e[8];let d;e[9]!==c?(d=s.jsx("h1",{className:"text-2xl font-bold",children:c}),e[9]=c,e[10]=d):d=e[10];let le;e[11]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx(We,{className:"mr-2 h-4 w-4"}),e[11]=le):le=e[11];let o;e[12]!==t?(o=t("dashboard.backToHome"),e[12]=t,e[13]=o):o=e[13];let m;e[14]!==o?(m=s.jsx(pe,{href:"/",children:s.jsxs(l,{variant:"outline",children:[le,o]})}),e[14]=o,e[15]=m):m=e[15];let p;e[16]!==m||e[17]!==d?(p=s.jsxs("div",{className:"flex items-center justify-between",children:[d,m]}),e[16]=m,e[17]=d,e[18]=p):p=e[18];let ne;e[19]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(Ye,{className:"h-5 w-5"}),e[19]=ne):ne=e[19];let x;e[20]!==t?(x=t("dashboard.quota.title"),e[20]=t,e[21]=x):x=e[21];let h;e[22]!==x?(h=s.jsxs(he,{className:"flex items-center gap-2",children:[ne,x]}),e[22]=x,e[23]=h):h=e[23];let f;e[24]!==a.plan||e[25]!==t?(f=a.plan==="pro"?t("dashboard.quota.descriptionPro"):t("dashboard.quota.descriptionFree"),e[24]=a.plan,e[25]=t,e[26]=f):f=e[26];let u;e[27]!==f?(u=s.jsx(fe,{children:f}),e[27]=f,e[28]=u):u=e[28];let j;e[29]!==h||e[30]!==u?(j=s.jsxs(ue,{children:[h,u]}),e[29]=h,e[30]=u,e[31]=j):j=e[31];let b;e[32]!==a.bg_percentage||e[33]!==a.bg_quota||e[34]!==a.bg_used||e[35]!==a.days_remaining||e[36]!==a.is_exceeded||e[37]!==a.is_warning||e[38]!==a.percentage||e[39]!==a.plan||e[40]!==a.quota||e[41]!==a.reset_date||e[42]!==a.surplus||e[43]!==a.surplus_cost||e[44]!==a.used||e[45]!==t?(b=s.jsx(xe,{className:"space-y-6",children:a.plan==="pro"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(Se,{className:"h-4 w-4"}),t("dashboard.quota.imageConversions")]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{children:[Y(a.used)," / ",Y(a.quota)]}),s.jsxs("span",{className:"font-medium",children:[a.percentage,"%"]})]}),s.jsx(Ce,{value:a.percentage,className:a.is_exceeded?"bg-red-100":a.is_warning?"bg-yellow-100":""})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(Xe,{className:"h-4 w-4"}),t("dashboard.quota.bgRemovals")]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{children:[Y(a.bg_used)," / ",Y(a.bg_quota)]}),s.jsxs("span",{className:"font-medium",children:[a.bg_percentage,"%"]})]}),s.jsx(Ce,{value:a.bg_percentage})]}),a.is_exceeded&&s.jsxs(qe,{variant:"destructive",children:[s.jsx(ke,{className:"h-4 w-4"}),s.jsx(De,{children:t("dashboard.quota.exceeded",{count:Y(a.surplus),cost:Re(a.surplus_cost)})})]}),a.is_warning&&!a.is_exceeded&&s.jsxs(qe,{children:[s.jsx(ke,{className:"h-4 w-4"}),s.jsx(De,{children:t("dashboard.quota.warning")})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground border-t pt-4",children:[s.jsx("span",{children:t("dashboard.quota.nextRenewal")}),s.jsxs("span",{children:[a.reset_date," (",t("dashboard.quota.days",{count:a.days_remaining}),")"]})]})]}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:t("dashboard.quota.freePlanInfo")}),s.jsx(pe,{href:"/billing",children:s.jsxs(l,{children:[s.jsx(Fe,{className:"mr-2 h-4 w-4"}),t("dashboard.quota.upgradeToPro")]})})]})}),e[32]=a.bg_percentage,e[33]=a.bg_quota,e[34]=a.bg_used,e[35]=a.days_remaining,e[36]=a.is_exceeded,e[37]=a.is_warning,e[38]=a.percentage,e[39]=a.plan,e[40]=a.quota,e[41]=a.reset_date,e[42]=a.surplus,e[43]=a.surplus_cost,e[44]=a.used,e[45]=t,e[46]=b):b=e[46];let g;e[47]!==j||e[48]!==b?(g=s.jsxs(je,{children:[j,b]}),e[47]=j,e[48]=b,e[49]=g):g=e[49];let ce;e[50]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(Ze,{className:"h-5 w-5"}),e[50]=ce):ce=e[50];let _;e[51]!==t?(_=t("dashboard.subscription.title"),e[51]=t,e[52]=_):_=e[52];let N;e[53]!==_?(N=s.jsxs(he,{className:"flex items-center gap-2",children:[ce,_]}),e[53]=_,e[54]=N):N=e[54];let y;e[55]!==t?(y=t("dashboard.subscription.description"),e[55]=t,e[56]=y):y=e[56];let v;e[57]!==y?(v=s.jsx(fe,{children:y}),e[57]=y,e[58]=v):v=e[58];let w;e[59]!==N||e[60]!==v?(w=s.jsxs(ue,{children:[N,v]}),e[59]=N,e[60]=v,e[61]=w):w=e[61];let C;e[62]!==t?(C=t("dashboard.subscription.currentPlan"),e[62]=t,e[63]=C):C=e[63];let q;e[64]!==C?(q=s.jsx("span",{className:"text-sm text-muted-foreground",children:C}),e[64]=C,e[65]=q):q=e[65];const ye=r.plan==="pro"?"default":"secondary";let D;e[66]!==r.plan||e[67]!==t?(D=r.plan==="pro"?t("common.pro"):t("common.free"),e[66]=r.plan,e[67]=t,e[68]=D):D=e[68];let S;e[69]!==ye||e[70]!==D?(S=s.jsx(be,{variant:ye,children:D}),e[69]=ye,e[70]=D,e[71]=S):S=e[71];let k;e[72]!==q||e[73]!==S?(k=s.jsxs("div",{className:"flex items-center justify-between",children:[q,S]}),e[72]=q,e[73]=S,e[74]=k):k=e[74];let F;e[75]!==ge||e[76]!==W||e[77]!==r.ends_at||e[78]!==r.is_on_grace_period||e[79]!==r.payment_method||e[80]!==r.plan||e[81]!==r.renews_at||e[82]!==r.started_at||e[83]!==r.status||e[84]!==t?(F=r.plan==="pro"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:t("dashboard.subscription.status")}),s.jsxs(be,{variant:r.status==="active"?"default":r.status==="canceling"?"outline":"destructive",children:[r.status==="active"&&t("dashboard.subscription.active"),r.status==="canceling"&&t("dashboard.subscription.canceling"),r.status==="canceled"&&t("dashboard.subscription.canceled"),r.status==="past_due"&&t("dashboard.subscription.pastDue")]})]}),r.started_at&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:t("dashboard.subscription.subscribedSince")}),s.jsx("span",{children:r.started_at})]}),r.renews_at&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:t("dashboard.subscription.nextRenewal")}),s.jsx("span",{children:r.renews_at})]}),r.ends_at&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:t("dashboard.subscription.endsAt")}),s.jsx("span",{children:r.ends_at})]}),r.payment_method&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:t("dashboard.subscription.card")}),s.jsxs("span",{className:"font-mono",children:[r.payment_method.brand.toUpperCase()," •••• ",r.payment_method.last4]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx(pe,{href:"/billing/portal",className:"flex-1",children:s.jsxs(l,{variant:"outline",className:"w-full",size:"sm",children:[s.jsx(Ge,{className:"mr-2 h-4 w-4"}),t("dashboard.subscription.manage")]})}),r.is_on_grace_period?s.jsxs(l,{onClick:Ae,disabled:W,size:"sm",className:"flex-1",children:[s.jsx(Je,{className:"mr-2 h-4 w-4"}),t("dashboard.subscription.resume")]}):r.status==="active"?s.jsxs(Le,{open:ge,onOpenChange:_e,children:[s.jsx(He,{asChild:!0,children:s.jsxs(l,{variant:"destructive",size:"sm",className:"flex-1",children:[s.jsx(Ke,{className:"mr-2 h-4 w-4"}),t("dashboard.subscription.cancelSubscription")]})}),s.jsxs(Be,{children:[s.jsxs(Ue,{children:[s.jsx(Oe,{children:t("dashboard.subscription.cancelTitle")}),s.jsx(Me,{children:t("dashboard.subscription.cancelDescription")})]}),s.jsxs(Ve,{children:[s.jsx(l,{variant:"outline",onClick:()=>_e(!1),children:t("dashboard.subscription.keepSubscription")}),s.jsx(l,{variant:"destructive",onClick:Te,disabled:W,children:t(W?"dashboard.subscription.canceling_":"dashboard.subscription.confirmCancel")})]})]})]}):null]})]}),e[75]=ge,e[76]=W,e[77]=r.ends_at,e[78]=r.is_on_grace_period,e[79]=r.payment_method,e[80]=r.plan,e[81]=r.renews_at,e[82]=r.started_at,e[83]=r.status,e[84]=t,e[85]=F):F=e[85];let T;e[86]!==r.plan||e[87]!==t?(T=r.plan==="free"&&s.jsx(pe,{href:"/billing",children:s.jsxs(l,{className:"w-full",children:[s.jsx(Fe,{className:"mr-2 h-4 w-4"}),t("dashboard.subscription.upgradePrice")]})}),e[86]=r.plan,e[87]=t,e[88]=T):T=e[88];let A;e[89]!==k||e[90]!==F||e[91]!==T?(A=s.jsxs(xe,{className:"space-y-4",children:[k,F,T]}),e[89]=k,e[90]=F,e[91]=T,e[92]=A):A=e[92];let R;e[93]!==w||e[94]!==A?(R=s.jsxs(je,{children:[w,A]}),e[93]=w,e[94]=A,e[95]=R):R=e[95];let de;e[96]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(Se,{className:"h-5 w-5"}),e[96]=de):de=e[96];let P;e[97]!==t?(P=t("dashboard.history.title"),e[97]=t,e[98]=P):P=e[98];let z;e[99]!==P?(z=s.jsxs(he,{className:"flex items-center gap-2",children:[de,P]}),e[99]=P,e[100]=z):z=e[100];let I;e[101]!==t?(I=t("dashboard.history.description"),e[101]=t,e[102]=I):I=e[102];let E;e[103]!==I?(E=s.jsx(fe,{children:I}),e[103]=I,e[104]=E):E=e[104];let L;e[105]!==z||e[106]!==E?(L=s.jsxs(ue,{children:[z,E]}),e[105]=z,e[106]=E,e[107]=L):L=e[107];let H;e[108]!==Z||e[109]!==t?(H=s.jsx(xe,{children:Z.length===0?s.jsx("p",{className:"text-center py-8 text-muted-foreground",children:t("dashboard.history.empty")}):s.jsx("div",{className:"space-y-2",children:Z.map(as)})}),e[108]=Z,e[109]=t,e[110]=H):H=e[110];let B;e[111]!==L||e[112]!==H?(B=s.jsxs(je,{children:[L,H]}),e[111]=L,e[112]=H,e[113]=B):B=e[113];let oe;e[114]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(es,{className:"h-5 w-5"}),e[114]=oe):oe=e[114];let U;e[115]!==t?(U=t("dashboard.invoices.title"),e[115]=t,e[116]=U):U=e[116];let O;e[117]!==U?(O=s.jsxs(he,{className:"flex items-center gap-2",children:[oe,U]}),e[117]=U,e[118]=O):O=e[118];let M;e[119]!==t?(M=t("dashboard.invoices.description"),e[119]=t,e[120]=M):M=e[120];let V;e[121]!==M?(V=s.jsx(fe,{children:M}),e[121]=M,e[122]=V):V=e[122];let $;e[123]!==O||e[124]!==V?($=s.jsxs(ue,{children:[O,V]}),e[123]=O,e[124]=V,e[125]=$):$=e[125];let X;e[126]!==ee||e[127]!==t?(X=s.jsx(xe,{children:ee.length===0?s.jsx("p",{className:"text-center py-8 text-muted-foreground",children:t("dashboard.invoices.empty")}):s.jsx("div",{className:"space-y-2",children:ee.map(Q=>s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm font-medium",children:Q.total}),s.jsx("span",{className:"text-xs text-muted-foreground",children:Q.date})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(be,{variant:Q.status==="paid"?"default":"secondary",children:Q.status==="paid"?t("dashboard.invoices.paid"):t("dashboard.invoices.pending")}),s.jsx("a",{href:Q.download_url,target:"_blank",rel:"noopener noreferrer",children:s.jsx(l,{size:"sm",variant:"ghost",children:s.jsx(Qe,{className:"h-4 w-4"})})})]})]},Q.id))})}),e[126]=ee,e[127]=t,e[128]=X):X=e[128];let G;e[129]!==$||e[130]!==X?(G=s.jsxs(je,{children:[$,X]}),e[129]=$,e[130]=X,e[131]=G):G=e[131];let J;e[132]!==g||e[133]!==R||e[134]!==B||e[135]!==G?(J=s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[g,R,B,G]}),e[132]=g,e[133]=R,e[134]=B,e[135]=G,e[136]=J):J=e[136];let K;e[137]!==p||e[138]!==J?(K=s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[p,J]}),e[137]=p,e[138]=J,e[139]=K):K=e[139];let me;return e[140]!==Ne||e[141]!==K?(me=s.jsxs(Ie,{breadcrumbs:Ne,children:[ie,K]}),e[140]=Ne,e[141]=K,e[142]=me):me=e[142],me}function as(i){return s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"text-sm font-medium",children:[i.images_count," image",i.images_count>1?"s":""," • ",i.output_format.toUpperCase()]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:i.date})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(be,{variant:"outline",className:"text-xs",children:i.status}),i.can_download&&s.jsx("a",{href:`/api/optiseo/export/${i.id}/zip`,children:s.jsx(l,{size:"sm",variant:"ghost",children:s.jsx(ss,{className:"h-4 w-4"})})})]})]},i.id)}function rs(i){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(i)}function is(i){return new Intl.NumberFormat("fr-FR").format(i)}export{Us as default};
