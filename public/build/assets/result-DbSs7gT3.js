import{r as u,j as s,c as te,h as Pe,f as es,e as Re}from"./app-K3ZVP2zp.js";import{c as H,d as ss,b as le,e as ts,B as G}from"./button-DHqJ9mov.js";import{S as rs,a as as}from"./seo-head-Bryk01Yk.js";import{b as v,C as S,a as k,d as ne,c as b}from"./card-IyXfRqj-.js";import{u as ls,c as Ce}from"./index-DT1ov4Dt.js";import{I as ns,R as is,c as Oe}from"./index-wrCcRyJy.js";import{P as os}from"./index-BIOpuWHr.js";import{u as cs}from"./index-BFXvoczR.js";import{u as ds}from"./index-h2M14YHr.js";import{I as Ve}from"./image-card-BiMpnIsi.js";import{B as se}from"./badge-4pdlkkgz.js";import{L as Me}from"./lock-CEnGUJu2.js";import{C as ms}from"./crown-D3SqTd5J.js";import{C as pe}from"./check-DSw9jy6l.js";import{D as Be}from"./download-CZXbgljr.js";import{P as Fe}from"./progress-BKqyTq_B.js";import{G as re,C as xs}from"./gauge-JnY16Jb1.js";import{Z as us}from"./zap-CuDJ61EZ.js";import{L as De}from"./loader-circle-BZZu1f1o.js";import{T as _e}from"./triangle-alert-ulffbloH.js";import{I as hs}from"./image--Uip1LCC.js";import{G as ps}from"./globe-BFLoMKgB.js";import{u as fs}from"./use-conversion-CzKgTxIn.js";import{R as ze}from"./refresh-cw-CJjz4LXO.js";import{A as gs}from"./arrow-left-qMMHfuc8.js";import{H as js}from"./house-Cc3GT85q.js";import{F as vs}from"./file-text-hQwfK9Dk.js";/* empty css            */import"./x-Dn6yn2yT.js";import"./index-D-0GpbBa.js";const bs=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],Ge=H("CodeXml",bs);const Ns=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],ys=H("Code",Ns);const ws=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],fe=H("Copy",ws);const Cs=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_s=H("EyeOff",Cs);const Ss=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ks=H("Eye",Ss);const Ts=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],ee=H("FileJson",Ts);const Ms=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Ps=H("FileSpreadsheet",Ms);const Es=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],Le=H("Palette",Es);const Is=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],$s=H("Twitter",Is);function Fs(t,e=[]){let a=[];function r(o,c){const i=u.createContext(c),n=a.length;a=[...a,c];const m=d=>{const{scope:p,children:N,...g}=d,x=p?.[t]?.[n]||i,f=u.useMemo(()=>g,Object.values(g));return s.jsx(x.Provider,{value:f,children:N})};m.displayName=o+"Provider";function h(d,p){const N=p?.[t]?.[n]||i,g=u.useContext(N);if(g)return g;if(c!==void 0)return c;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[m,h]}const l=()=>{const o=a.map(c=>u.createContext(c));return function(i){const n=i?.[t]||o;return u.useMemo(()=>({[`__scope${t}`]:{...i,[t]:n}}),[i,n])}};return l.scopeName=t,[r,zs(l,...e)]}function zs(...t){const e=t[0];if(t.length===1)return e;const a=()=>{const r=t.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(o){const c=r.reduce((i,{useScope:n,scopeName:m})=>{const d=n(o)[`__scope${m}`];return{...i,...d}},{});return u.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return a.scopeName=e.scopeName,a}function Ls(t){const e=As(t),a=u.forwardRef((r,l)=>{const{children:o,...c}=r,i=u.Children.toArray(o),n=i.find(Os);if(n){const m=n.props.children,h=i.map(d=>d===n?u.Children.count(m)>1?u.Children.only(null):u.isValidElement(m)?m.props.children:null:d);return s.jsx(e,{...c,ref:l,children:u.isValidElement(m)?u.cloneElement(m,void 0,h):null})}return s.jsx(e,{...c,ref:l,children:o})});return a.displayName=`${t}.Slot`,a}function As(t){const e=u.forwardRef((a,r)=>{const{children:l,...o}=a;if(u.isValidElement(l)){const c=Bs(l),i=Vs(o,l.props);return l.type!==u.Fragment&&(i.ref=r?ss(r,c):c),u.cloneElement(l,i)}return u.Children.count(l)>1?u.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Rs=Symbol("radix.slottable");function Os(t){return u.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Rs}function Vs(t,e){const a={...e};for(const r in e){const l=t[r],o=e[r];/^on[A-Z]/.test(r)?l&&o?a[r]=(...i)=>{const n=o(...i);return l(...i),n}:l&&(a[r]=l):r==="style"?a[r]={...l,...o}:r==="className"&&(a[r]=[l,o].filter(Boolean).join(" "))}return{...t,...a}}function Bs(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=e&&"isReactWarning"in e&&e.isReactWarning;return a?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=e&&"isReactWarning"in e&&e.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var Ds=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ge=Ds.reduce((t,e)=>{const a=Ls(`Primitive.${e}`),r=u.forwardRef((l,o)=>{const{asChild:c,...i}=l,n=c?a:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(n,{...i,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),je="Tabs",[Gs]=Fs(je,[Oe]),He=Oe(),[Hs,Ee]=Gs(je),qe=u.forwardRef((t,e)=>{const{__scopeTabs:a,value:r,onValueChange:l,defaultValue:o,orientation:c="horizontal",dir:i,activationMode:n="automatic",...m}=t,h=cs(i),[d,p]=ls({prop:r,onChange:l,defaultProp:o??"",caller:je});return s.jsx(Hs,{scope:a,baseId:ds(),value:d,onValueChange:p,orientation:c,dir:h,activationMode:n,children:s.jsx(ge.div,{dir:h,"data-orientation":c,...m,ref:e})})});qe.displayName=je;var We="TabsList",Ue=u.forwardRef((t,e)=>{const{__scopeTabs:a,loop:r=!0,...l}=t,o=Ee(We,a),c=He(a);return s.jsx(is,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:r,children:s.jsx(ge.div,{role:"tablist","aria-orientation":o.orientation,...l,ref:e})})});Ue.displayName=We;var Ze="TabsTrigger",Je=u.forwardRef((t,e)=>{const{__scopeTabs:a,value:r,disabled:l=!1,...o}=t,c=Ee(Ze,a),i=He(a),n=Xe(c.baseId,r),m=Ye(c.baseId,r),h=r===c.value;return s.jsx(ns,{asChild:!0,...i,focusable:!l,active:h,children:s.jsx(ge.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":m,"data-state":h?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:n,...o,ref:e,onMouseDown:Ce(t.onMouseDown,d=>{!l&&d.button===0&&d.ctrlKey===!1?c.onValueChange(r):d.preventDefault()}),onKeyDown:Ce(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&c.onValueChange(r)}),onFocus:Ce(t.onFocus,()=>{const d=c.activationMode!=="manual";!h&&!l&&d&&c.onValueChange(r)})})})});Je.displayName=Ze;var Qe="TabsContent",Ke=u.forwardRef((t,e)=>{const{__scopeTabs:a,value:r,forceMount:l,children:o,...c}=t,i=Ee(Qe,a),n=Xe(i.baseId,r),m=Ye(i.baseId,r),h=r===i.value,d=u.useRef(h);return u.useEffect(()=>{const p=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(p)},[]),s.jsx(os,{present:l||h,children:({present:p})=>s.jsx(ge.div,{"data-state":h?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":n,hidden:!p,id:m,tabIndex:0,...c,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:p&&o})})});Ke.displayName=Qe;function Xe(t,e){return`${t}-trigger-${e}`}function Ye(t,e){return`${t}-content-${e}`}var qs=qe,Ws=Ue,Us=Je,Zs=Ke;function Ie(t){const e=te.c(10);let a,r,l;e[0]!==t?({className:a,orientation:l,...r}=t,e[0]=t,e[1]=a,e[2]=r,e[3]=l):(a=e[1],r=e[2],l=e[3]);const o=l===void 0?"horizontal":l;let c;e[4]!==a?(c=le("group/tabs flex gap-2 data-[orientation=horizontal]:flex-col",a),e[4]=a,e[5]=c):c=e[5];let i;return e[6]!==o||e[7]!==r||e[8]!==c?(i=s.jsx(qs,{"data-slot":"tabs","data-orientation":o,orientation:o,className:c,...r}),e[6]=o,e[7]=r,e[8]=c,e[9]=i):i=e[9],i}const Js=ts("rounded-lg p-[3px] group-data-[orientation=horizontal]/tabs:h-9 data-[variant=line]:rounded-none group/tabs-list text-muted-foreground inline-flex w-fit items-center justify-center group-data-[orientation=vertical]/tabs:h-fit group-data-[orientation=vertical]/tabs:flex-col",{variants:{variant:{default:"bg-muted",line:"gap-1 bg-transparent"}},defaultVariants:{variant:"default"}});function $e(t){const e=te.c(11);let a,r,l;e[0]!==t?({className:a,variant:l,...r}=t,e[0]=t,e[1]=a,e[2]=r,e[3]=l):(a=e[1],r=e[2],l=e[3]);const o=l===void 0?"default":l;let c;e[4]!==a||e[5]!==o?(c=le(Js({variant:o}),a),e[4]=a,e[5]=o,e[6]=c):c=e[6];let i;return e[7]!==r||e[8]!==c||e[9]!==o?(i=s.jsx(Ws,{"data-slot":"tabs-list","data-variant":o,className:c,...r}),e[7]=r,e[8]=c,e[9]=o,e[10]=i):i=e[10],i}function W(t){const e=te.c(8);let a,r;e[0]!==t?({className:a,...r}=t,e[0]=t,e[1]=a,e[2]=r):(a=e[1],r=e[2]);let l;e[3]!==a?(l=le("focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring text-foreground/60 hover:text-foreground dark:text-muted-foreground dark:hover:text-foreground relative inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-all group-data-[orientation=vertical]/tabs:w-full group-data-[orientation=vertical]/tabs:justify-start focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 group-data-[variant=default]/tabs-list:data-[state=active]:shadow-sm group-data-[variant=line]/tabs-list:data-[state=active]:shadow-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4","group-data-[variant=line]/tabs-list:bg-transparent group-data-[variant=line]/tabs-list:data-[state=active]:bg-transparent dark:group-data-[variant=line]/tabs-list:data-[state=active]:border-transparent dark:group-data-[variant=line]/tabs-list:data-[state=active]:bg-transparent","data-[state=active]:bg-background dark:data-[state=active]:text-foreground dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 data-[state=active]:text-foreground","after:bg-foreground after:absolute after:opacity-0 after:transition-opacity group-data-[orientation=horizontal]/tabs:after:inset-x-0 group-data-[orientation=horizontal]/tabs:after:bottom-[-5px] group-data-[orientation=horizontal]/tabs:after:h-0.5 group-data-[orientation=vertical]/tabs:after:inset-y-0 group-data-[orientation=vertical]/tabs:after:-right-1 group-data-[orientation=vertical]/tabs:after:w-0.5 group-data-[variant=line]/tabs-list:data-[state=active]:after:opacity-100",a),e[3]=a,e[4]=l):l=e[4];let o;return e[5]!==r||e[6]!==l?(o=s.jsx(Us,{"data-slot":"tabs-trigger",className:l,...r}),e[5]=r,e[6]=l,e[7]=o):o=e[7],o}function U(t){const e=te.c(8);let a,r;e[0]!==t?({className:a,...r}=t,e[0]=t,e[1]=a,e[2]=r):(a=e[1],r=e[2]);let l;e[3]!==a?(l=le("flex-1 outline-none",a),e[3]=a,e[4]=l):l=e[4];let o;return e[5]!==r||e[6]!==l?(o=s.jsx(Zs,{"data-slot":"tabs-content",className:l,...r}),e[5]=r,e[6]=l,e[7]=o):o=e[7],o}const q={picture:{label:"<picture>",language:"html",description:"Tag HTML5 avec support AVIF, WebP et fallback",pro:!1},img:{label:"<img>",language:"html",description:"Tag img basique avec attributs SEO",pro:!1},img_srcset:{label:"srcset",language:"html",description:"Tag img avec images responsive",pro:!0},react:{label:"React",language:"jsx",description:"Composant React fonctionnel",pro:!0},vue:{label:"Vue",language:"vue",description:"Composant Vue 3 avec script setup",pro:!0},nextjs:{label:"Next.js",language:"jsx",description:"Composant next/image optimisé",pro:!0},css:{label:"CSS",language:"css",description:"Background-image avec image-set()",pro:!0},lazy:{label:"LQIP",language:"html",description:"Chargement progressif avec placeholder",pro:!0}};function Qs({image:t,isPro:e=!1,className:a}){const[r,l]=u.useState("picture"),[o,c]=u.useState({}),[i,n]=u.useState({}),[m,h]=u.useState(null),d=u.useCallback(async x=>{if(!(o[x]||i[x])&&!(q[x].pro&&!e)){n(f=>({...f,[x]:!0}));try{const f=await Pe.get(`/api/optiseo/images/${t.id}/code/${x}`);c(_=>({..._,[x]:f.data.code}))}catch(f){console.error("Failed to fetch code:",f)}finally{n(f=>({...f,[x]:!1}))}}},[t.id,o,i,e]),p=x=>{const f=x;l(f),d(f)},N=async x=>{const f=o[x];if(f)try{await navigator.clipboard.writeText(f),h(x),setTimeout(()=>h(null),2e3)}catch(_){console.error("Failed to copy:",_)}};u.useState(()=>{d("picture")});const g=x=>q[x].pro&&!e;return s.jsxs(v,{className:a,children:[s.jsxs(S,{children:[s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-5 w-5"}),"Génération de code"]}),s.jsx(ne,{children:"Copiez le code HTML, React, Vue ou CSS pour intégrer cette image"})]}),s.jsx(b,{children:s.jsxs(Ie,{value:r,onValueChange:p,children:[s.jsx($e,{className:"grid w-full grid-cols-4 lg:grid-cols-8",children:Object.keys(q).map(x=>s.jsxs(W,{value:x,className:"text-xs gap-1",disabled:g(x),children:[q[x].label,q[x].pro&&!e&&s.jsx(Me,{className:"h-3 w-3 text-muted-foreground"})]},x))}),Object.keys(q).map(x=>s.jsx(U,{value:x,className:"mt-4",children:g(x)?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(ms,{className:"mb-4 h-12 w-12 text-yellow-500"}),s.jsx("p",{className:"mb-2 font-medium",children:"Fonctionnalité Pro"}),s.jsxs("p",{className:"mb-4 text-sm text-muted-foreground",children:["La génération de code ",q[x].label," est réservée aux abonnés Pro"]}),s.jsxs(se,{variant:"secondary",className:"gap-1",children:[s.jsx(Me,{className:"h-3 w-3"}),"Passez à Pro pour débloquer"]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:q[x].description}),s.jsx(G,{variant:"outline",size:"sm",onClick:()=>N(x),disabled:!o[x],className:"gap-2",children:m===x?s.jsxs(s.Fragment,{children:[s.jsx(pe,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(fe,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("div",{className:"relative",children:i[x]?s.jsx("div",{className:"flex h-48 items-center justify-center rounded-lg border bg-muted",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"Génération en cours..."})}):o[x]?s.jsx("pre",{className:"max-h-96 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-sm whitespace-pre-wrap break-words",children:o[x]})}):s.jsx("div",{className:"flex h-48 items-center justify-center rounded-lg border bg-muted",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"Cliquez sur l'onglet pour générer le code"})})})]})},x))]})})]})}const Ks=[{format:"zip",label:"Archive ZIP",description:"Images converties + fichiers de métadonnées",icon:s.jsx(Be,{className:"h-5 w-5"})},{format:"csv",label:"Fichier CSV",description:"Métadonnées SEO au format tableur",icon:s.jsx(Ps,{className:"h-5 w-5"})},{format:"json",label:"Fichier JSON",description:"Données structurées pour intégration CMS",icon:s.jsx(ee,{className:"h-5 w-5"})},{format:"html",label:"Snippets HTML",description:"Balises <img> et <picture> prêtes à copier",icon:s.jsx(ys,{className:"h-5 w-5"})}];function Xs({batch:t,className:e}){const[a,r]=u.useState(null),l=u.useCallback(async i=>{r(i);try{const n=`/api/optiseo/export/${t.id}/${i}`;if(i!=="json"){const m=document.createElement("a");m.href=n,m.download=`optiseo-${t.id}.${i==="html"?"html":i}`,document.body.appendChild(m),m.click(),document.body.removeChild(m)}else window.open(n,"_blank")}catch(n){console.error("Export error:",n)}finally{r(null)}},[t.id]),o=t.images?.filter(i=>i.status==="completed").length??0,c=t.images?.reduce((i,n)=>n.size_saved&&n.size_saved>0?i+n.size_saved:i,0)??0;return s.jsxs("div",{className:le("space-y-6",e),children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[s.jsx(v,{children:s.jsxs(b,{className:"pt-4",children:[s.jsx("p",{className:"text-2xl font-bold",children:o}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Images converties"})]})}),s.jsx(v,{children:s.jsxs(b,{className:"pt-4",children:[s.jsx("p",{className:"text-2xl font-bold",children:c>0?Ys(c):"—"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Espace économisé"})]})}),s.jsx(v,{children:s.jsxs(b,{className:"pt-4",children:[s.jsx("p",{className:"text-2xl font-bold",children:t.settings?.format?.toUpperCase()??"—"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Format de sortie"})]})}),s.jsx(v,{children:s.jsxs(b,{className:"pt-4",children:[s.jsxs("p",{className:"text-2xl font-bold",children:[t.settings?.quality??80,"%"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Qualité"})]})})]}),s.jsxs(v,{children:[s.jsxs(S,{children:[s.jsx(k,{children:"Télécharger vos images"}),s.jsx(ne,{children:"Choisissez le format d'export adapté à vos besoins"})]}),s.jsx(b,{children:s.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Ks.map(i=>s.jsxs(G,{variant:"outline",className:"h-auto flex-col items-start gap-2 p-4 text-left",onClick:()=>l(i.format),disabled:a!==null,children:[s.jsxs("div",{className:"flex w-full items-center gap-3",children:[a===i.format?s.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-primary border-t-transparent"}):i.icon,s.jsx("span",{className:"font-medium",children:i.label})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:i.description})]},i.format))})})]}),t.keywords&&t.keywords.length>0&&s.jsxs(v,{children:[s.jsx(S,{children:s.jsx(k,{className:"text-base",children:"Mots-clés utilisés"})}),s.jsx(b,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:t.keywords.map((i,n)=>s.jsx("span",{className:"rounded-full bg-muted px-3 py-1 text-sm",children:i},n))})})]})]})}function Ys(t){if(t===0)return"0 B";const e=1024,a=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(1))+" "+a[r]}const et={excellent:"bg-green-500",good:"bg-green-400","needs-improvement":"bg-yellow-500",poor:"bg-red-500"},st={excellent:"Excellent",good:"Bon","needs-improvement":"À améliorer",poor:"Mauvais"};function tt({image:t,isPro:e=!1,className:a}){const[r,l]=u.useState(null),[o,c]=u.useState(!1),[i,n]=u.useState(null);return u.useEffect(()=>{if(!e)return;(async()=>{c(!0),n(null);try{const h=await Pe.get(`/api/optiseo/images/${t.id}/performance`);l(h.data.analysis)}catch(h){n(h.response?.data?.message||"Erreur lors de l'analyse")}finally{c(!1)}})()},[t.id,e]),e?o?s.jsxs(v,{className:a,children:[s.jsx(S,{children:s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(re,{className:"h-5 w-5"}),"Analyse de performance"]})}),s.jsx(b,{children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(De,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})]}):i||!r?s.jsxs(v,{className:a,children:[s.jsx(S,{children:s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(re,{className:"h-5 w-5"}),"Analyse de performance"]})}),s.jsx(b,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(_e,{className:"mb-4 h-12 w-12 text-destructive/50"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i||"Analyse non disponible"})]})})]}):s.jsxs(v,{className:a,children:[s.jsxs(S,{children:[s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(re,{className:"h-5 w-5"}),"Analyse de performance"]}),s.jsx(ne,{children:"Impact sur les Core Web Vitals et recommandations"})]}),s.jsxs(b,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"relative h-24 w-24",children:[s.jsxs("svg",{className:"h-24 w-24 -rotate-90 transform",children:[s.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-muted"}),s.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:`${r.score/100*251.2} 251.2`,className:r.score>=90?"text-green-500":r.score>=70?"text-green-400":r.score>=50?"text-yellow-500":"text-red-500"})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("span",{className:"text-2xl font-bold",children:r.score})})]}),s.jsxs("div",{children:[s.jsx(se,{variant:"secondary",className:`${et[r.rating]} text-white`,children:st[r.rating]}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Score de performance global basé sur la taille, le format et les optimisations"})]})]}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"LCP Impact"}),s.jsxs(se,{variant:"outline",className:r.lcp_impact.rating==="good"?"border-green-500 text-green-600":r.lcp_impact.rating==="needs-improvement"?"border-yellow-500 text-yellow-600":"border-red-500 text-red-600",children:[r.lcp_impact.estimated_ms," ms"]})]}),s.jsx(Fe,{value:Math.min(100,r.lcp_impact.estimated_ms/r.lcp_impact.threshold_poor*100),className:"h-2"}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:r.lcp_impact.rating==="good"?"Bon temps de chargement":r.lcp_impact.rating==="needs-improvement"?"Temps de chargement acceptable":"Temps de chargement trop long"})]}),s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"CLS Impact"}),s.jsx(se,{variant:"outline",className:r.cls_impact.rating==="good"?"border-green-500 text-green-600":"border-red-500 text-red-600",children:r.cls_impact.score.toFixed(2)})]}),s.jsx(Fe,{value:Math.min(100,r.cls_impact.score*400),className:"h-2"}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:r.cls_impact.reason})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-3 text-sm font-medium",children:"Temps de chargement estimé"}),s.jsx("div",{className:"grid gap-2 sm:grid-cols-3",children:Object.entries(r.load_times).map(([m,h])=>s.jsxs("div",{className:"flex items-center justify-between rounded-lg border px-3 py-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:h.label}),s.jsxs("span",{className:"text-sm font-medium",children:[h.time_ms," ms"]})]},m))})]}),r.recommendations.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"mb-3 text-sm font-medium",children:"Recommandations"}),s.jsx("div",{className:"space-y-2",children:r.recommendations.map((m,h)=>s.jsx("div",{className:`rounded-lg border p-3 ${m.priority==="high"?"border-red-200 bg-red-50 dark:border-red-900 dark:bg-red-950":m.priority==="medium"?"border-yellow-200 bg-yellow-50 dark:border-yellow-900 dark:bg-yellow-950":"border-muted bg-muted/30"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[m.priority==="high"?s.jsx(_e,{className:"mt-0.5 h-4 w-4 text-red-500"}):m.priority==="medium"?s.jsx(_e,{className:"mt-0.5 h-4 w-4 text-yellow-500"}):s.jsx(xs,{className:"mt-0.5 h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:m.title}),s.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:m.description})]})]})},h))})]})]})]}):s.jsxs(v,{className:a,children:[s.jsx(S,{children:s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(re,{className:"h-5 w-5"}),"Analyse de performance"]})}),s.jsx(b,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(us,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),s.jsx("p",{className:"mb-2 font-medium",children:"Fonctionnalité Pro"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"L'analyse de performance est réservée aux utilisateurs Pro"})]})})]})}var rt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],ae=t=>{let e=0;for(let a=0;a<t.length;a++){let r=t[a],l=rt.indexOf(r);e=e*83+l}return e},Se=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},ke=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},at=t=>t<0?-1:1,Te=(t,e)=>at(t)*Math.pow(Math.abs(t),e),Ae=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},lt=t=>{if(!t||t.length<6)throw new Ae("The blurhash string must be at least 6 characters");let e=ae(t[0]),a=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*a)throw new Ae(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*a}`)},nt=t=>{let e=t>>16,a=t>>8&255,r=t&255;return[Se(e),Se(a),Se(r)]},it=(t,e)=>{let a=Math.floor(t/361),r=Math.floor(t/19)%19,l=t%19;return[Te((a-9)/9,2)*e,Te((r-9)/9,2)*e,Te((l-9)/9,2)*e]},ot=(t,e,a,r)=>{lt(t),r=r|1;let l=ae(t[0]),o=Math.floor(l/9)+1,c=l%9+1,i=(ae(t[1])+1)/166,n=new Array(c*o);for(let d=0;d<n.length;d++)if(d===0){let p=ae(t.substring(2,6));n[d]=nt(p)}else{let p=ae(t.substring(4+d*2,6+d*2));n[d]=it(p,i*r)}let m=e*4,h=new Uint8ClampedArray(m*a);for(let d=0;d<a;d++)for(let p=0;p<e;p++){let N=0,g=0,x=0;for(let y=0;y<o;y++)for(let w=0;w<c;w++){let M=Math.cos(Math.PI*p*w/e)*Math.cos(Math.PI*d*y/a),P=n[w+y*c];N+=P[0]*M,g+=P[1]*M,x+=P[2]*M}let f=ke(N),_=ke(g),T=ke(x);h[4*p+0+d*m]=f,h[4*p+1+d*m]=_,h[4*p+2+d*m]=T,h[4*p+3+d*m]=255}return h},ct=ot;function dt(t){const e=te.c(55),{image:a,className:r}=t,[l,o]=u.useState(!1),[c,i]=u.useState(null),n=a.performance,m=n?.blur_hash||n?.dominant_color;let h;e[0]!==n?(h=()=>{if(n?.blur_hash)try{const z=ct(n.blur_hash,32,32),E=document.createElement("canvas");E.width=32,E.height=32;const I=E.getContext("2d");if(I){const D=I.createImageData(32,32);D.data.set(z),I.putImageData(D,0,0),i(E.toDataURL())}}catch(z){console.error("Failed to decode BlurHash:",z)}},e[0]=n,e[1]=h):h=e[1];const d=n?.blur_hash;let p;if(e[2]!==d?(p=[d],e[2]=d,e[3]=p):p=e[3],u.useEffect(h,p),!m){let z;e[4]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(S,{children:s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(Le,{className:"h-5 w-5"}),"Placeholders & Couleurs"]})}),e[4]=z):z=e[4];let E;e[5]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(b,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(hs,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les données de performance ne sont pas encore générées pour cette image"})]})}),e[5]=E):E=e[5];let I;return e[6]!==r?(I=s.jsxs(v,{className:r,children:[z,E]}),e[6]=r,e[7]=I):I=e[7],I}let N;e[8]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsxs(S,{children:[s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(Le,{className:"h-5 w-5"}),"Placeholders & Couleurs"]}),s.jsx(ne,{children:"Utilisez ces données pour améliorer le chargement perçu"})]}),e[8]=N):N=e[8];let g;e[9]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx("span",{className:"text-sm font-medium",children:"Comparaison"}),e[9]=g):g=e[9];let x;e[10]!==l?(x=()=>o(!l),e[10]=l,e[11]=x):x=e[11];let f;e[12]!==l?(f=l?s.jsxs(s.Fragment,{children:[s.jsx(_s,{className:"h-4 w-4"}),"Voir placeholder"]}):s.jsxs(s.Fragment,{children:[s.jsx(ks,{className:"h-4 w-4"}),"Voir original"]}),e[12]=l,e[13]=f):f=e[13];let _;e[14]!==x||e[15]!==f?(_=s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[g,s.jsx(G,{variant:"outline",size:"sm",onClick:x,className:"gap-2",children:f})]}),e[14]=x,e[15]=f,e[16]=_):_=e[16];let T;e[17]!==a.converted?.url||e[18]!==a.original||e[19]!==n||e[20]!==l?(T=n?.lqip_data_uri&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"LQIP (Low Quality Image Placeholder)"}),s.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg border bg-muted",children:s.jsx("img",{src:l?a.converted?.url??a.original.url??"":n.lqip_data_uri,alt:"LQIP preview",className:"h-full w-full object-cover",style:l?void 0:{filter:"blur(10px)",transform:"scale(1.1)"}})})]}),e[17]=a.converted?.url,e[18]=a.original,e[19]=n,e[20]=l,e[21]=T):T=e[21];let y;e[22]!==c||e[23]!==a.converted?.url||e[24]!==a.original||e[25]!==l?(y=c&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"BlurHash"}),s.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg border bg-muted",children:s.jsx("img",{src:l?a.converted?.url??a.original.url??"":c,alt:"BlurHash preview",className:"h-full w-full object-cover",style:l?void 0:{filter:"blur(0px)"}})})]}),e[22]=c,e[23]=a.converted?.url,e[24]=a.original,e[25]=l,e[26]=y):y=e[26];let w;e[27]!==y||e[28]!==T?(w=s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[T,y]}),e[27]=y,e[28]=T,e[29]=w):w=e[29];let M;e[30]!==w||e[31]!==_?(M=s.jsxs("div",{children:[_,w]}),e[30]=w,e[31]=_,e[32]=M):M=e[32];let P;e[33]!==n?(P=n?.blur_hash&&s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm font-medium",children:"BlurHash"}),s.jsx("code",{className:"block rounded-lg border bg-muted p-3 text-xs break-all",children:n.blur_hash})]}),e[33]=n,e[34]=P):P=e[34];let A;e[35]!==n?(A=n?.dominant_color&&s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm font-medium",children:"Couleur dominante"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg border shadow-sm",style:{backgroundColor:n.dominant_color}}),s.jsx("code",{className:"text-sm",children:n.dominant_color})]})]}),e[35]=n,e[36]=A):A=e[36];let $;e[37]!==n?($=n?.color_palette&&n.color_palette.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm font-medium",children:"Palette de couleurs"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.color_palette.map(mt)})]}),e[37]=n,e[38]=$):$=e[38];let R;e[39]!==n?.has_transparency?(R=n?.has_transparency&&s.jsx(se,{variant:"secondary",children:"Transparence"}),e[39]=n?.has_transparency,e[40]=R):R=e[40];let F;e[41]!==n?(F=n?.aspect_ratio&&s.jsxs(se,{variant:"outline",children:["Ratio: ",n.aspect_ratio]}),e[41]=n,e[42]=F):F=e[42];let O;e[43]!==R||e[44]!==F?(O=s.jsxs("div",{className:"flex flex-wrap gap-2",children:[R,F]}),e[43]=R,e[44]=F,e[45]=O):O=e[45];let V;e[46]!==M||e[47]!==P||e[48]!==A||e[49]!==$||e[50]!==O?(V=s.jsxs(b,{className:"space-y-6",children:[M,P,A,$,O]}),e[46]=M,e[47]=P,e[48]=A,e[49]=$,e[50]=O,e[51]=V):V=e[51];let B;return e[52]!==r||e[53]!==V?(B=s.jsxs(v,{className:r,children:[N,V]}),e[52]=r,e[53]=V,e[54]=B):B=e[54],B}function mt(t,e){return s.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-muted/50 px-2 py-1",children:[s.jsx("div",{className:"h-6 w-6 rounded border shadow-sm",style:{backgroundColor:t}}),s.jsx("code",{className:"text-xs",children:t})]},e)}function xt({image:t,isPro:e=!1,className:a}){const[r,l]=u.useState(null),[o,c]=u.useState(!1),[i,n]=u.useState(null),[m,h]=u.useState(null);u.useEffect(()=>{if(!e)return;(async()=>{c(!0),n(null);try{const N=await Pe.get(`/api/optiseo/images/${t.id}/schema`,{params:{base_url:window.location.origin}});l(N.data.schemas)}catch(N){n(N.response?.data?.message||"Erreur lors du chargement")}finally{c(!1)}})()},[t.id,e]);const d=u.useCallback(async(p,N)=>{try{await navigator.clipboard.writeText(p),h(N),setTimeout(()=>h(null),2e3)}catch(g){console.error("Failed to copy:",g)}},[]);return e?o?s.jsxs(v,{className:a,children:[s.jsx(S,{children:s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(ee,{className:"h-5 w-5"}),"Schema Markup"]})}),s.jsx(b,{children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(De,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})]}):i||!r?s.jsxs(v,{className:a,children:[s.jsx(S,{children:s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(ee,{className:"h-5 w-5"}),"Schema Markup"]})}),s.jsx(b,{children:s.jsx("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:i||"Schema non disponible"})})})]}):s.jsxs(v,{className:a,children:[s.jsxs(S,{children:[s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(ee,{className:"h-5 w-5"}),"Schema Markup"]}),s.jsx(ne,{children:"Données structurées pour les moteurs de recherche et réseaux sociaux"})]}),s.jsx(b,{children:s.jsxs(Ie,{defaultValue:"jsonld",children:[s.jsxs($e,{className:"grid w-full grid-cols-3",children:[s.jsxs(W,{value:"jsonld",className:"gap-2",children:[s.jsx(ee,{className:"h-4 w-4"}),"JSON-LD"]}),s.jsxs(W,{value:"opengraph",className:"gap-2",children:[s.jsx(ps,{className:"h-4 w-4"}),"Open Graph"]}),s.jsxs(W,{value:"twitter",className:"gap-2",children:[s.jsx($s,{className:"h-4 w-4"}),"Twitter"]})]}),s.jsxs(U,{value:"jsonld",className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez ce script dans le <head> de votre page"}),s.jsx(G,{variant:"outline",size:"sm",onClick:()=>d(r.json_ld_script,"jsonld"),className:"gap-2",children:m==="jsonld"?s.jsxs(s.Fragment,{children:[s.jsx(pe,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(fe,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(r.json_ld,null,2)})})]}),s.jsxs(U,{value:"opengraph",className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Meta tags Open Graph pour Facebook, LinkedIn, etc."}),s.jsx(G,{variant:"outline",size:"sm",onClick:()=>d(r.open_graph_html,"og"),className:"gap-2",children:m==="og"?s.jsxs(s.Fragment,{children:[s.jsx(pe,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(fe,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-xs whitespace-pre-wrap",children:r.open_graph_html})}),s.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4",children:[s.jsx("p",{className:"mb-2 text-xs font-medium text-muted-foreground",children:"Aperçu"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("img",{src:t.converted?.url??t.original.url??"",alt:t.seo.alt_text??"",className:"h-16 w-16 rounded object-cover"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"truncate text-sm font-medium",children:r.open_graph["og:image:alt"]||t.seo.alt_text}),s.jsx("p",{className:"truncate text-xs text-muted-foreground",children:t.converted?.url??t.original.url})]})]})]})]}),s.jsxs(U,{value:"twitter",className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Meta tags Twitter Card"}),s.jsx(G,{variant:"outline",size:"sm",onClick:()=>d(r.twitter_card_html,"twitter"),className:"gap-2",children:m==="twitter"?s.jsxs(s.Fragment,{children:[s.jsx(pe,{className:"h-4 w-4"}),"Copié !"]}):s.jsxs(s.Fragment,{children:[s.jsx(fe,{className:"h-4 w-4"}),"Copier"]})})]}),s.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border bg-muted p-4",children:s.jsx("code",{className:"text-xs whitespace-pre-wrap",children:r.twitter_card_html})})]})]})})]}):s.jsxs(v,{className:a,children:[s.jsx(S,{children:s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx(ee,{className:"h-5 w-5"}),"Schema Markup"]})}),s.jsx(b,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(Me,{className:"mb-4 h-12 w-12 text-muted-foreground/50"}),s.jsx("p",{className:"mb-2 font-medium",children:"Fonctionnalité Pro"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Le schema markup est réservé aux utilisateurs Pro"})]})})]})}function Zt(t){const e=te.c(80),{batchId:a,initialBatch:r}=t,{batch:l,pollProgress:o}=fs(),{auth:c}=es().props,i=c?.isPro??!1,[n,m]=u.useState(null);let h,d;e[0]!==a||e[1]!==r||e[2]!==o?(h=()=>{r||o(a)},d=[a,r,o],e[0]=a,e[1]=r,e[2]=o,e[3]=h,e[4]=d):(h=e[3],d=e[4]),u.useEffect(h,d);const p=l??r,N=gt;let g;e[5]!==a?(g=()=>{Re.visit(`/convert/${a}`)},e[5]=a,e[6]=g):g=e[6];const x=g;if(!p){let j;return e[7]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("div",{className:"flex min-h-screen items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ze,{className:"mx-auto h-8 w-8 animate-spin text-muted-foreground"}),s.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement des résultats..."})]})}),e[7]=j):j=e[7],j}let f,_,T,y,w,M,P,A,$,R,F,O,V,B,z,E,I;if(e[8]!==p||e[9]!==x||e[10]!==i||e[11]!==n){const j=p.images?.filter(ft)??[],ve=p.images?.filter(pt)??[],L=n??j[0]??null;e[29]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(rs,{...as.result}),e[29]=F):F=e[29],R="min-h-screen bg-gradient-to-b from-background to-muted/30",A="container mx-auto px-4 py-8";let ce;e[30]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(gs,{className:"mr-2 h-4 w-4"}),e[30]=ce):ce=e[30];let X;e[31]!==x?(X=s.jsxs(G,{variant:"ghost",onClick:x,children:[ce,"Paramètres"]}),e[31]=x,e[32]=X):X=e[32];let de;e[33]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsxs(G,{variant:"outline",onClick:N,children:[s.jsx(js,{className:"mr-2 h-4 w-4"}),"Nouvelle conversion"]}),e[33]=de):de=e[33],e[34]!==X?($=s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[X,de]}),e[34]=X,e[35]=$):$=e[35],M="mx-auto max-w-6xl space-y-8";let me;e[36]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx("h1",{className:"mb-2 text-3xl font-bold",children:"Conversion terminée !"}),e[36]=me):me=e[36],P=s.jsxs("div",{className:"text-center",children:[me,s.jsxs("p",{className:"text-muted-foreground",children:[j.length," image",j.length>1?"s":""," convertie",j.length>1?"s":""," avec succès"]})]}),_=Ie,z="export",E="w-full";let xe;e[37]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsxs(W,{value:"export",className:"gap-2",children:[s.jsx(Be,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Télécharger"})]}),e[37]=xe):xe=e[37];let ue;e[38]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsxs(W,{value:"seo",className:"gap-2",children:[s.jsx(vs,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"SEO"})]}),e[38]=ue):ue=e[38];let he;e[39]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsxs(W,{value:"code",className:"gap-2",children:[s.jsx(Ge,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Code"})]}),e[39]=he):he=e[39],e[40]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsxs($e,{className:"grid w-full grid-cols-4",children:[xe,ue,he,s.jsxs(W,{value:"performance",className:"gap-2",children:[s.jsx(re,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Performance"})]})]}),e[40]=I):I=e[40];let Y;e[41]!==p?(Y=s.jsx(Xs,{batch:p}),e[41]=p,e[42]=Y):Y=e[42];const be=j.length>0&&s.jsxs(v,{children:[s.jsx(S,{children:s.jsx(k,{children:"Images converties"})}),s.jsx(b,{children:s.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:j.map(ht)})})]}),Ne=ve.length>0&&s.jsxs(v,{className:"border-destructive/50",children:[s.jsx(S,{children:s.jsxs(k,{className:"text-destructive",children:["Images en échec (",ve.length,")"]})}),s.jsx(b,{children:s.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:ve.map(ut)})})]});e[43]!==Y||e[44]!==be||e[45]!==Ne?(T=s.jsxs(U,{value:"export",className:"mt-6 space-y-6",children:[Y,be,Ne]}),e[43]=Y,e[44]=be,e[45]=Ne,e[46]=T):T=e[46];const ye=j.length>0&&s.jsxs(s.Fragment,{children:[j.length>1&&s.jsxs(v,{children:[s.jsx(S,{children:s.jsx(k,{className:"text-base",children:"Sélectionnez une image"})}),s.jsx(b,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(C=>s.jsx("button",{onClick:()=>m(C),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(n?.id??j[0]?.id)===C.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:s.jsx("img",{src:C.converted?.url??C.original.url??"",alt:C.seo.alt_text??"",className:"h-16 w-16 object-cover"})},C.id))})})]}),s.jsxs(v,{children:[s.jsx(S,{children:s.jsx(k,{children:"Métadonnées SEO générées"})}),s.jsx(b,{children:L&&s.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4",children:[s.jsx("p",{className:"mb-2 font-medium text-sm",children:L.seo.filename}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"alt:"})," ",s.jsxs("span",{className:"text-foreground",children:['"',L.seo.alt_text,'"']})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"title:"})," ",s.jsxs("span",{className:"text-foreground",children:['"',L.seo.title_text,'"']})]}),L.seo.meta_description&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"meta:"})," ",s.jsxs("span",{className:"text-foreground",children:['"',L.seo.meta_description,'"']})]})]})]})})]}),L&&s.jsx(xt,{image:L,isPro:i})]});e[47]!==ye?(y=s.jsx(U,{value:"seo",className:"mt-6 space-y-6",children:ye}),e[47]=ye,e[48]=y):y=e[48];const we=j.length>0&&s.jsxs(s.Fragment,{children:[j.length>1&&s.jsxs(v,{children:[s.jsx(S,{children:s.jsx(k,{className:"text-base",children:"Sélectionnez une image"})}),s.jsx(b,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(C=>s.jsx("button",{onClick:()=>m(C),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(n?.id??j[0]?.id)===C.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:s.jsx("img",{src:C.converted?.url??C.original.url??"",alt:C.seo.alt_text??"",className:"h-16 w-16 object-cover"})},C.id))})})]}),L&&s.jsx(Qs,{image:L,isPro:i})]});e[49]!==we?(w=s.jsx(U,{value:"code",className:"mt-6 space-y-6",children:we}),e[49]=we,e[50]=w):w=e[50],f=U,O="performance",V="mt-6 space-y-6",B=j.length>0&&s.jsxs(s.Fragment,{children:[j.length>1&&s.jsxs(v,{children:[s.jsx(S,{children:s.jsx(k,{className:"text-base",children:"Sélectionnez une image"})}),s.jsx(b,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(C=>s.jsx("button",{onClick:()=>m(C),className:`relative overflow-hidden rounded-lg border-2 transition-all ${(n?.id??j[0]?.id)===C.id?"border-primary ring-2 ring-primary ring-offset-2":"border-muted hover:border-muted-foreground"}`,children:s.jsx("img",{src:C.converted?.url??C.original.url??"",alt:C.seo.alt_text??"",className:"h-16 w-16 object-cover"})},C.id))})})]}),L&&s.jsx(dt,{image:L}),L&&s.jsx(tt,{image:L,isPro:i})]}),e[8]=p,e[9]=x,e[10]=i,e[11]=n,e[12]=f,e[13]=_,e[14]=T,e[15]=y,e[16]=w,e[17]=M,e[18]=P,e[19]=A,e[20]=$,e[21]=R,e[22]=F,e[23]=O,e[24]=V,e[25]=B,e[26]=z,e[27]=E,e[28]=I}else f=e[12],_=e[13],T=e[14],y=e[15],w=e[16],M=e[17],P=e[18],A=e[19],$=e[20],R=e[21],F=e[22],O=e[23],V=e[24],B=e[25],z=e[26],E=e[27],I=e[28];let D;e[51]!==f||e[52]!==O||e[53]!==V||e[54]!==B?(D=s.jsx(f,{value:O,className:V,children:B}),e[51]=f,e[52]=O,e[53]=V,e[54]=B,e[55]=D):D=e[55];let Z;e[56]!==_||e[57]!==T||e[58]!==y||e[59]!==w||e[60]!==D||e[61]!==z||e[62]!==E||e[63]!==I?(Z=s.jsxs(_,{defaultValue:z,className:E,children:[I,T,y,w,D]}),e[56]=_,e[57]=T,e[58]=y,e[59]=w,e[60]=D,e[61]=z,e[62]=E,e[63]=I,e[64]=Z):Z=e[64];let ie;e[65]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx("div",{className:"text-center",children:s.jsxs(G,{size:"lg",onClick:N,className:"gap-2",children:[s.jsx(ze,{className:"h-5 w-5"}),"Convertir d'autres images"]})}),e[65]=ie):ie=e[65];let J;e[66]!==M||e[67]!==P||e[68]!==Z?(J=s.jsxs("div",{className:M,children:[P,Z,ie]}),e[66]=M,e[67]=P,e[68]=Z,e[69]=J):J=e[69];let Q;e[70]!==A||e[71]!==$||e[72]!==J?(Q=s.jsxs("div",{className:A,children:[$,J]}),e[70]=A,e[71]=$,e[72]=J,e[73]=Q):Q=e[73];let K;e[74]!==R||e[75]!==Q?(K=s.jsx("div",{className:R,children:Q}),e[74]=R,e[75]=Q,e[76]=K):K=e[76];let oe;return e[77]!==F||e[78]!==K?(oe=s.jsxs(s.Fragment,{children:[F,K]}),e[77]=F,e[78]=K,e[79]=oe):oe=e[79],oe}function ut(t){return s.jsx(Ve,{image:t},t.id)}function ht(t){return s.jsx(Ve,{image:t},t.id)}function pt(t){return t.status==="failed"}function ft(t){return t.status==="completed"}function gt(){Re.visit("/")}export{Zt as default};
