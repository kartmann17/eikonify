import{r as i,j as s,c as Q,f as fe,L as de,e as be}from"./app-DajP5S0m.js";import{c as Z,B as G,b as xe}from"./button-Dg4E0vYF.js";import{B as Y}from"./badge-Bqs-xZSL.js";import{a as le,d as ne,C as ie,c as K,b as X}from"./card-BKn2NzCB.js";import{a as oe,u as je,A as ve,K as Ne}from"./use-keyword-suggestions-DsyPWaLM.js";import{P as ye}from"./progress-Bfw2CeU7.js";import{r as we,I as Se}from"./image-card-zP9iwalj.js";import{C as ee}from"./crown-nyBeaiE9.js";import{S as ce}from"./scissors-Dk6wIQbR.js";import{L as me}from"./loader-circle-uo2uf195.js";import{I as te}from"./image-Cp6C9CmI.js";import{X as ke}from"./x-D-6iNh_c.js";import{R as Ce}from"./refresh-cw-ByTrOPNR.js";import{D as _e}from"./download-CcXgA4qv.js";import{C as J,G as Fe}from"./gauge-DIEOzGyc.js";import{d as Pe,e as Ee,c as Me,b as ze,D as Ae}from"./dialog-CNHPrZrn.js";import{Z as pe}from"./zap-B8wSxokW.js";import{C as ge}from"./check-Bo2tfiUN.js";import{N as Ie,F as Ue}from"./footer-Dk1MHZYW.js";import{S as ae}from"./sparkles-kaEtkgHj.js";import{S as Re}from"./search-D1_ui1GQ.js";import{C as De}from"./cookie-consent-DJPhYS-z.js";import{S as Le,a as qe}from"./seo-head-BMePOC5x.js";/* empty css            */import"./index-B-2XgYMT.js";import"./label-PwOxC4_U.js";import"./index-Vi4PfPsT.js";import"./lock-D3gqCcoH.js";import"./input-B4ApvBSE.js";import"./index-BGytivDr.js";import"./index-0rY9RSpX.js";import"./index-jYNIRHxE.js";import"./index-DUg-3UEC.js";import"./index-p5Z00z_K.js";import"./dropdown-menu-XIiWhTGI.js";import"./index-BnOjCCNm.js";import"./shield-Bga-HP7w.js";import"./user-CpPg78GC.js";import"./index-B2TjaFH4.js";import"./settings-0VdW8GDs.js";const $e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],he=Z("CircleAlert",$e);const Oe=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Te=Z("CloudUpload",Oe);const Be=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],Ge=Z("FileImage",Be);const He=[["path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21",key:"9csbqa"}],["path",{d:"m14 19 3 3v-5.5",key:"9ldu5r"}],["path",{d:"m17 22 3-3",key:"1nkfve"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],Ve=Z("ImageDown",He);const We=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],Ke=Z("MousePointerClick",We);const Xe=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Qe=Z("Upload",Xe);function Ze(){const[t,e]=i.useState(!1),[p,N]=i.useState(0),[n,x]=i.useState(null),[v,f]=i.useState(null),[c,d]=i.useState(null),u=i.useRef(null),a=i.useCallback(async()=>{try{const r=await fetch("/api/optiseo/bg-remove/usage",{credentials:"include",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}});if(r.ok){const h=await r.json();d(h)}}catch(r){console.error("Failed to fetch bg removal usage:",r)}},[]),m=i.useCallback(async()=>{try{const r=await fetch("/api/optiseo/bg-remove/increment",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}});if(r.ok)return await a(),!0;const h=await r.json();return x(h.message||"Quota dépassé"),!1}catch(r){return console.error("Failed to increment usage:",r),!1}},[a]),S=i.useCallback(async r=>{if(e(!0),N(0),x(null),f(null),u.current&&(URL.revokeObjectURL(u.current),u.current=null),!await m())return e(!1),null;try{const C=await we(r,{progress:(A,I,z)=>{if(z>0){const w=Math.round(I/z*100);N(w)}},output:{format:"image/png",quality:1}}),g=URL.createObjectURL(C);u.current=g;const F=`${r.name.replace(/\.[^/.]+$/,"")}-no-bg.png`,M={url:g,filename:F,blob:C};return f(M),M}catch(y){const C=y instanceof Error?y.message:"Erreur lors du traitement";return x(C),null}finally{e(!1),N(100)}},[m]),j=i.useCallback(()=>{e(!1),N(0),x(null),f(null),u.current&&(URL.revokeObjectURL(u.current),u.current=null)},[]);return{isProcessing:t,progress:p,error:n,result:v,usage:c,removeBackground:S,fetchUsage:a,incrementUsage:m,reset:j}}function Je({originalSrc:t,processedSrc:e,originalAlt:p="Image originale",processedAlt:N="Arriere-plan supprime",className:n=""}){const[x,v]=i.useState(50),f=i.useRef(null),c=i.useRef(!1),d=i.useCallback(r=>{if(!f.current)return;const h=f.current.getBoundingClientRect(),y=r-h.left,C=Math.max(0,Math.min(100,y/h.width*100));v(C)},[]),u=i.useCallback(()=>{c.current=!0},[]),a=i.useCallback(()=>{c.current=!1},[]),m=i.useCallback(r=>{c.current&&d(r.clientX)},[d]),S=i.useCallback(r=>{r.touches.length>0&&d(r.touches[0].clientX)},[d]),j=i.useCallback(r=>{v(Number(r.target.value))},[]);return s.jsxs("div",{ref:f,className:`relative overflow-hidden rounded-lg select-none ${n}`,onMouseMove:m,onMouseUp:a,onMouseLeave:a,onTouchMove:S,onTouchEnd:a,children:[s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
                        linear-gradient(45deg, #e0e0e0 25%, transparent 25%),
                        linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),
                        linear-gradient(45deg, transparent 75%, #e0e0e0 75%),
                        linear-gradient(-45deg, transparent 75%, #e0e0e0 75%)
                    `,backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px"}}),s.jsx("img",{src:e,alt:N,className:"relative w-full h-auto block",draggable:!1}),s.jsx("div",{className:"absolute inset-0 overflow-hidden",style:{width:`${x}%`},children:s.jsx("img",{src:t,alt:p,className:"w-full h-full object-cover",style:{width:f.current?.offsetWidth||"100%",maxWidth:"none"},draggable:!1})}),s.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white shadow-lg",style:{left:`${x}%`,transform:"translateX(-50%)"},children:s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center cursor-ew-resize border-2 border-gray-200 hover:border-primary transition-colors",onMouseDown:u,onTouchStart:u,children:s.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})})}),s.jsx("input",{type:"range",min:"0",max:"100",step:"0.1",value:x,onChange:j,className:"absolute inset-0 w-full h-full opacity-0 cursor-ew-resize","aria-label":"Comparaison avant/apres"}),s.jsx("div",{className:"absolute top-3 left-3 px-2 py-1 bg-black/60 text-white text-xs rounded backdrop-blur-sm",children:"Avant"}),s.jsx("div",{className:"absolute top-3 right-3 px-2 py-1 bg-black/60 text-white text-xs rounded backdrop-blur-sm",children:"Apres"})]})}function Ye(){const t=Q.c(62),{auth:e}=fe().props,p=e?.isPro??!1,N=i.useRef(null),[n,x]=i.useState(null),[v,f]=i.useState(null),{isProcessing:c,progress:d,error:u,result:a,usage:m,removeBackground:S,fetchUsage:j,reset:r}=Ze();let h,y;t[0]!==j?(h=()=>{j()},y=[j],t[0]=j,t[1]=h,t[2]=y):(h=t[1],y=t[2]),i.useEffect(h,y);let C;t[3]!==r?(C=q=>{const D=q.target.files?.[0];D&&(x(D),f(URL.createObjectURL(D)),r())},t[3]=r,t[4]=C):C=t[4];const g=C;let _;t[5]!==r?(_=q=>{q.preventDefault();const D=q.dataTransfer.files[0];D&&D.type.startsWith("image/")&&(x(D),f(URL.createObjectURL(D)),r())},t[5]=r,t[6]=_):_=t[6];const F=_;let M;t[7]!==S||t[8]!==n?(M=async()=>{n&&await S(n)},t[7]=S,t[8]=n,t[9]=M):M=t[9];const A=M;let I;t[10]!==r?(I=()=>{x(null),f(null),r(),N.current&&(N.current.value="")},t[10]=r,t[11]=I):I=t[11];const z=I;let w;t[12]!==a?(w=()=>{if(a?.blob){const q=URL.createObjectURL(a.blob),D=document.createElement("a");D.href=q,D.download=a.filename,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(q)}},t[12]=a,t[13]=w):w=t[13];const l=w,o=(m?.remaining??0)<=0;let k;t[14]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsxs("div",{children:[s.jsxs(le,{className:"flex items-center gap-2",children:[s.jsx(ce,{className:"h-5 w-5"}),"Suppression d'arrière-plan"]}),s.jsx(ne,{className:"mt-1.5",children:"Supprimez l'arrière-plan de vos images en un clic"})]}),t[14]=k):k=t[14];let E;t[15]!==p||t[16]!==m?(E=m&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(Y,{variant:p?"default":"secondary",children:p?"Pro":"Gratuit"})}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[m.remaining,"/",m.quota," restant",m.remaining>1?"s":"",m.period==="day"?" aujourd'hui":" ce mois"]})]}),t[15]=p,t[16]=m,t[17]=E):E=t[17];let U;t[18]!==E?(U=s.jsx(ie,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[k,E]})}),t[18]=E,t[19]=U):U=t[19];let P;t[20]!==p||t[21]!==o||t[22]!==m?.period?(P=o&&s.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-900 dark:bg-amber-950",children:[s.jsx(he,{className:"h-5 w-5 text-amber-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:["Quota ",m?.period==="day"?"journalier":"mensuel"," atteint"]}),s.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:p?"Votre quota sera réinitialisé le mois prochain.":"Passez au plan Pro pour 500 suppressions par mois."})]}),!p&&s.jsx(de,{href:"/billing",children:s.jsxs(G,{size:"sm",className:"gap-1",children:[s.jsx(ee,{className:"h-4 w-4"}),"Pro"]})})]}),t[20]=p,t[21]=o,t[22]=m?.period,t[23]=P):P=t[23];let R;t[24]!==F||t[25]!==g||t[26]!==o||t[27]!==a||t[28]!==n?(R=!n&&!a&&s.jsxs("div",{onClick:()=>!o&&N.current?.click(),onDrop:F,onDragOver:es,className:`relative flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8 transition-colors ${o?"cursor-not-allowed border-muted bg-muted/50":"cursor-pointer border-muted-foreground/25 hover:border-primary/50 hover:bg-muted/50"}`,children:[s.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:g,className:"hidden",disabled:o}),s.jsx(Qe,{className:"h-10 w-10 text-muted-foreground mb-3"}),s.jsx("p",{className:"text-sm font-medium",children:"Glissez une image ou cliquez pour sélectionner"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG, WebP jusqu'à 25 Mo"})]}),t[24]=F,t[25]=g,t[26]=o,t[27]=a,t[28]=n,t[29]=R):R=t[29];let L;t[30]!==c||t[31]!==v||t[32]!==d||t[33]!==a||t[34]!==n?(L=n&&!a&&s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium",children:"Original"}),s.jsx("div",{className:"relative aspect-square overflow-hidden rounded-lg border bg-muted",children:v&&s.jsx("img",{src:v,alt:"Original",className:"h-full w-full object-contain"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium",children:"Sans arriere-plan"}),s.jsxs("div",{className:"relative aspect-square overflow-hidden rounded-lg border",style:{backgroundImage:`linear-gradient(45deg, #e5e7eb 25%, transparent 25%),
                                            linear-gradient(-45deg, #e5e7eb 25%, transparent 25%),
                                            linear-gradient(45deg, transparent 75%, #e5e7eb 75%),
                                            linear-gradient(-45deg, transparent 75%, #e5e7eb 75%)`,backgroundSize:"16px 16px",backgroundPosition:"0 0, 0 8px, 8px -8px, -8px 0px"},children:[c&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80",children:s.jsxs("div",{className:"text-center w-full px-6",children:[s.jsx(me,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:d<30?"Chargement du modele IA...":d<90?"Analyse de l'image...":"Finalisation..."}),s.jsx(ye,{value:d,className:"mt-3 h-2"}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[d,"%"]})]})}),!c&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(te,{className:"h-10 w-10 text-muted-foreground/50"})})]})]})]}),t[30]=c,t[31]=v,t[32]=d,t[33]=a,t[34]=n,t[35]=L):L=t[35];let H;t[36]!==v||t[37]!==a?(H=a&&v&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm font-medium text-center text-muted-foreground",children:"Faites glisser le curseur pour comparer"}),s.jsx(Je,{originalSrc:v,processedSrc:a.url,originalAlt:"Image originale",processedAlt:"Arriere-plan supprime",className:"max-w-lg mx-auto"})]}),t[36]=v,t[37]=a,t[38]=H):H=t[38];let O;t[39]!==u?(O=u&&s.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-destructive/50 bg-destructive/10 p-3",children:[s.jsx(he,{className:"h-4 w-4 text-destructive"}),s.jsx("p",{className:"text-sm text-destructive",children:u})]}),t[39]=u,t[40]=O):O=t[40];let T;t[41]!==z||t[42]!==l||t[43]!==A||t[44]!==c||t[45]!==o||t[46]!==a||t[47]!==n?(T=n&&s.jsx("div",{className:"flex justify-center gap-3",children:a?s.jsxs(s.Fragment,{children:[s.jsxs(G,{variant:"outline",onClick:z,children:[s.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Nouvelle image"]}),s.jsxs(G,{onClick:l,children:[s.jsx(_e,{className:"mr-2 h-4 w-4"}),"Telecharger PNG"]})]}):s.jsxs(s.Fragment,{children:[s.jsxs(G,{variant:"outline",onClick:z,children:[s.jsx(ke,{className:"mr-2 h-4 w-4"}),"Annuler"]}),s.jsx(G,{onClick:A,disabled:c||o,children:c?s.jsxs(s.Fragment,{children:[s.jsx(me,{className:"mr-2 h-4 w-4 animate-spin"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ce,{className:"mr-2 h-4 w-4"}),"Supprimer l'arriere-plan"]})})]})}),t[41]=z,t[42]=l,t[43]=A,t[44]=c,t[45]=o,t[46]=a,t[47]=n,t[48]=T):T=t[48];let B;t[49]!==a?(B=a&&s.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-green-200 bg-green-50 p-3 dark:border-green-900 dark:bg-green-950",children:[s.jsx(J,{className:"h-4 w-4 text-green-600"}),s.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Arrière-plan supprimé avec succès"})]}),t[49]=a,t[50]=B):B=t[50];let W;t[51]!==P||t[52]!==R||t[53]!==L||t[54]!==H||t[55]!==O||t[56]!==T||t[57]!==B?(W=s.jsx(K,{children:s.jsxs("div",{className:"space-y-4",children:[P,R,L,H,O,T,B]})}),t[51]=P,t[52]=R,t[53]=L,t[54]=H,t[55]=O,t[56]=T,t[57]=B,t[58]=W):W=t[58];let V;return t[59]!==W||t[60]!==U?(V=s.jsxs(X,{children:[U,W]}),t[59]=W,t[60]=U,t[61]=V):V=t[61],V}function es(t){return t.preventDefault()}const ss=[".jpg",".jpeg",".png",".gif",".webp",".bmp",".tiff",".svg"],ts=5,as=10;function rs(t){const e=Q.c(52),{onFilesAdded:p,acceptedFormats:N,maxFiles:n,maxFileSizeMb:x,disabled:v,className:f}=t,c=N===void 0?ss:N,d=n===void 0?ts:n,u=x===void 0?as:x,a=v===void 0?!1:v,[m,S]=i.useState(!1);let j;e[0]!==a?(j=$=>{$.preventDefault(),$.stopPropagation(),a||S(!0)},e[0]=a,e[1]=j):j=e[1];const r=j;let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=$=>{$.preventDefault(),$.stopPropagation(),S(!1)},e[2]=h):h=e[2];const y=h,C=ns;let g;e[3]!==a||e[4]!==p?(g=$=>{if($.preventDefault(),$.stopPropagation(),S(!1),a)return;const ue=Array.from($.dataTransfer.files);ue.length>0&&p(ue)},e[3]=a,e[4]=p,e[5]=g):g=e[5];const _=g;let F;e[6]!==p?(F=$=>{$.target.files&&$.target.files.length>0&&(p(Array.from($.target.files)),$.target.value="")},e[6]=p,e[7]=F):F=e[7];const M=F;let A;e[8]!==u?(A=()=>`${u} Mo`,e[8]=u,e[9]=A):A=e[9];const I=A,z=m?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-muted-foreground/50",w=a&&"cursor-not-allowed opacity-50";let l;e[10]!==f||e[11]!==z||e[12]!==w?(l=xe("relative rounded-lg border-2 border-dashed transition-colors",z,w,f),e[10]=f,e[11]=z,e[12]=w,e[13]=l):l=e[13];let b;e[14]!==c?(b=c.join(","),e[14]=c,e[15]=b):b=e[15];let o;e[16]!==a||e[17]!==M||e[18]!==b?(o=s.jsx("input",{type:"file",multiple:!0,accept:b,onChange:M,disabled:a,className:"absolute inset-0 cursor-pointer opacity-0 disabled:cursor-not-allowed"}),e[16]=a,e[17]=M,e[18]=b,e[19]=o):o=e[19];const k=m?"bg-primary/10":"bg-muted";let E;e[20]!==k?(E=xe("mb-4 rounded-full p-4",k),e[20]=k,e[21]=E):E=e[21];let U;e[22]!==m?(U=m?s.jsx(Te,{className:"h-10 w-10 text-primary"}):s.jsx(te,{className:"h-10 w-10 text-muted-foreground"}),e[22]=m,e[23]=U):U=e[23];let P;e[24]!==E||e[25]!==U?(P=s.jsx("div",{className:E,children:U}),e[24]=E,e[25]=U,e[26]=P):P=e[26];const R=m?"Déposez vos images ici":"Glissez-déposez vos images";let L;e[27]!==R?(L=s.jsx("h3",{className:"mb-2 text-lg font-semibold",children:R}),e[27]=R,e[28]=L):L=e[28];let H;e[29]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"ou cliquez pour sélectionner des fichiers"}),e[29]=H):H=e[29];let O;e[30]!==c?(O=c.map(ls).join(", "),e[30]=c,e[31]=O):O=e[31];let T;e[32]!==O?(T=s.jsx("span",{className:"rounded-full bg-muted px-2 py-1",children:O}),e[32]=O,e[33]=T):T=e[33];let B;e[34]!==d?(B=s.jsxs("span",{className:"rounded-full bg-muted px-2 py-1",children:["Max ",d," fichiers"]}),e[34]=d,e[35]=B):B=e[35];const W=I();let V;e[36]!==W?(V=s.jsxs("span",{className:"rounded-full bg-muted px-2 py-1",children:["Max ",W," par fichier"]}),e[36]=W,e[37]=V):V=e[37];let q;e[38]!==T||e[39]!==B||e[40]!==V?(q=s.jsxs("div",{className:"flex flex-wrap justify-center gap-2 text-xs text-muted-foreground",children:[T,B,V]}),e[38]=T,e[39]=B,e[40]=V,e[41]=q):q=e[41];let D;e[42]!==P||e[43]!==L||e[44]!==q?(D=s.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-12 text-center",children:[P,L,H,q]}),e[42]=P,e[43]=L,e[44]=q,e[45]=D):D=e[45];let se;return e[46]!==r||e[47]!==_||e[48]!==l||e[49]!==o||e[50]!==D?(se=s.jsxs("div",{className:l,onDragEnter:r,onDragLeave:y,onDragOver:C,onDrop:_,children:[o,D]}),e[46]=r,e[47]=_,e[48]=l,e[49]=o,e[50]=D,e[51]=se):se=e[51],se}function ls(t){return t.replace(".","").toUpperCase()}function ns(t){t.preventDefault(),t.stopPropagation()}const is=["5 images par jour","3 suppressions d'arrière-plan par jour","Conversion WebP/AVIF","SEO basique","Export ZIP uniquement","Fichiers conservés 1h"],os=["500 images par mois","500 suppressions d'arrière-plan par mois","Conversion WebP/AVIF","Suggestions IA personnalisées","Historique des conversions","Export ZIP, CSV, JSON, HTML","Fichiers conservés 24h","Dimensions max 8192×8192","Support prioritaire"];function cs(t){const e=Q.c(26),{open:p,onOpenChange:N,trigger:n,featureName:x}=t,v=n===void 0?"quota":n;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx(pe,{className:"h-6 w-6 text-amber-500"}),e[0]=f):f=e[0];const c=v==="quota"?"Quota journalier atteint":`Débloquez ${x||"cette fonctionnalité"}`;let d;e[1]!==c?(d=s.jsxs(Pe,{className:"flex items-center gap-2 text-xl",children:[f,c]}),e[1]=c,e[2]=d):d=e[2];const u=v==="quota"?"Vous avez utilisé vos 5 conversions gratuites aujourd'hui. Passez au plan Pro pour continuer sans limite !":"Cette fonctionnalité est réservée aux abonnés Pro.";let a;e[3]!==u?(a=s.jsx(Ee,{children:u}),e[3]=u,e[4]=a):a=e[4];let m;e[5]!==d||e[6]!==a?(m=s.jsxs(Me,{children:[d,a]}),e[5]=d,e[6]=a,e[7]=m):m=e[7];let S;e[8]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold",children:"Gratuit"}),s.jsx(Y,{variant:"secondary",children:"Actuel"})]}),e[8]=S):S=e[8];let j;e[9]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsxs("p",{className:"mb-4 text-2xl font-bold",children:["0€",s.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/mois"})]}),e[9]=j):j=e[9];let r;e[10]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsxs("div",{className:"rounded-lg border p-4",children:[S,j,s.jsx("ul",{className:"space-y-2 text-sm",children:is.map(ds)})]}),e[10]=r):r=e[10];let h;e[11]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsxs("h3",{className:"flex items-center gap-1 font-semibold",children:[s.jsx(ee,{className:"h-4 w-4 text-amber-500"}),"Pro"]}),s.jsx(Y,{className:"bg-amber-500 hover:bg-amber-600",children:"Recommandé"})]}),e[11]=h):h=e[11];let y;e[12]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsxs("p",{className:"mb-4 text-2xl font-bold",children:["9,99€",s.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/mois"})]}),e[12]=y):y=e[12];let C;e[13]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsxs("div",{className:"grid gap-4 py-4 sm:grid-cols-2",children:[r,s.jsxs("div",{className:"rounded-lg border-2 border-primary bg-primary/5 p-4",children:[h,y,s.jsx("ul",{className:"space-y-2 text-sm",children:os.map(ms)})]})]}),e[13]=C):C=e[13];let g;e[14]!==N?(g=s.jsx(G,{variant:"outline",onClick:()=>N(!1),children:"Plus tard"}),e[14]=N,e[15]=g):g=e[15];let _;e[16]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(de,{href:"/billing",children:s.jsxs(G,{className:"w-full gap-2 sm:w-auto",children:[s.jsx(ee,{className:"h-4 w-4"}),"Passer au Pro"]})}),e[16]=_):_=e[16];let F;e[17]!==g?(F=s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end",children:[g,_]}),e[17]=g,e[18]=F):F=e[18];let M;e[19]!==F||e[20]!==m?(M=s.jsxs(ze,{className:"sm:max-w-[500px]",children:[m,C,F]}),e[19]=F,e[20]=m,e[21]=M):M=e[21];let A;return e[22]!==N||e[23]!==p||e[24]!==M?(A=s.jsx(Ae,{open:p,onOpenChange:N,children:M}),e[22]=N,e[23]=p,e[24]=M,e[25]=A):A=e[25],A}function ms(t,e){return s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(ge,{className:"mt-0.5 h-4 w-4 shrink-0 text-primary"}),s.jsx("span",{children:t})]},e)}function ds(t,e){return s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(ge,{className:"mt-0.5 h-4 w-4 shrink-0 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:t})]},e)}function re(t){const e=Q.c(9),{end:p,duration:N,suffix:n,prefix:x}=t,v=N===void 0?2e3:N,f=n===void 0?"":n,c=x===void 0?"":x,[d,u]=i.useState(0),[a,m]=i.useState(!1),S=i.useRef(null);let j,r;e[0]!==v||e[1]!==p||e[2]!==a?(j=()=>{const y=new IntersectionObserver(C=>{if(C[0].isIntersecting&&!a){m(!0);let g=0;const _=p/(v/16),F=setInterval(()=>{g=g+_,g>=p?(u(p),clearInterval(F)):u(Math.floor(g))},16)}},{threshold:.5});return S.current&&y.observe(S.current),()=>y.disconnect()},r=[p,v,a],e[0]=v,e[1]=p,e[2]=a,e[3]=j,e[4]=r):(j=e[3],r=e[4]),i.useEffect(j,r);let h;return e[5]!==d||e[6]!==c||e[7]!==f?(h=s.jsxs("span",{ref:S,children:[c,d,f]}),e[5]=d,e[6]=c,e[7]=f,e[8]=h):h=e[8],h}function us(){const t=Q.c(48),[e,p]=i.useState(0);let N,n;t[0]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{const L=setInterval(()=>{p(hs)},2500);return()=>clearInterval(L)},n=[],t[0]=N,t[1]=n):(N=t[0],n=t[1]),i.useEffect(N,n);let x;t[2]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`
                            linear-gradient(to right, rgba(255,255,255,0.1) 1px, transparent 1px),
                            linear-gradient(to bottom, rgba(255,255,255,0.1) 1px, transparent 1px)
                        `,backgroundSize:"20px 20px"}}),t[2]=x):x=t[2];const v=`absolute transition-all duration-700 ease-out ${e>=1?"scale-75 -translate-x-16 opacity-50":"scale-100 translate-x-0 opacity-100"}`;let f;t[3]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"w-32 h-40 rounded-xl bg-gradient-to-br from-orange-500 to-red-600 flex flex-col items-center justify-center shadow-lg shadow-orange-500/30",children:[s.jsx(Ge,{className:"w-12 h-12 text-white/90 mb-2"}),s.jsx("span",{className:"text-white font-bold text-sm",children:".JPEG"}),s.jsx("span",{className:"text-white/70 text-xs mt-1",children:"2.4 Mo"})]}),s.jsx("div",{className:"absolute inset-0 rounded-xl bg-orange-500/20 blur-xl -z-10"})]}),t[3]=f):f=t[3];let c;t[4]!==v?(c=s.jsx("div",{className:v,children:f}),t[4]=v,t[5]=c):c=t[5];let d;t[6]!==e?(d=e>=1&&e<3&&s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(12)].map(xs)}),t[6]=e,t[7]=d):d=t[7];let u;t[8]!==e?(u=e>=1&&s.jsx("div",{className:`transition-all duration-500 ${e>=2?"opacity-100":"opacity-50"}`,children:s.jsxs("div",{className:"relative",children:[s.jsx(ae,{className:`w-8 h-8 text-violet-400 ${e===1||e===2?"animate-spin":""}`}),s.jsx("div",{className:"absolute inset-0 bg-violet-500/30 blur-xl"})]})}),t[8]=e,t[9]=u):u=t[9];const a=`absolute transition-all duration-700 ease-out ${e>=2?"scale-100 translate-x-16 opacity-100":"scale-50 translate-x-8 opacity-0"}`;let m;t[10]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsxs("div",{className:"w-32 h-40 rounded-xl bg-gradient-to-br from-emerald-500 to-cyan-500 flex flex-col items-center justify-center shadow-lg shadow-emerald-500/30",children:[s.jsx(Ve,{className:"w-12 h-12 text-white/90 mb-2"}),s.jsx("span",{className:"text-white font-bold text-sm",children:".WebP"}),s.jsx("span",{className:"text-white/70 text-xs mt-1",children:"680 Ko"})]}),t[10]=m):m=t[10];let S;t[11]!==e?(S=e>=3&&s.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center animate-bounce shadow-lg",children:s.jsx(J,{className:"w-5 h-5 text-white"})}),t[11]=e,t[12]=S):S=t[12];let j;t[13]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("div",{className:"absolute inset-0 rounded-xl bg-emerald-500/20 blur-xl -z-10"}),t[13]=j):j=t[13];let r;t[14]!==S?(r=s.jsxs("div",{className:"relative",children:[m,S,j]}),t[14]=S,t[15]=r):r=t[15];let h;t[16]!==r||t[17]!==a?(h=s.jsx("div",{className:a,children:r}),t[16]=r,t[17]=a,t[18]=h):h=t[18];let y;t[19]!==h||t[20]!==c||t[21]!==d||t[22]!==u?(y=s.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[c,d,u,h]}),t[19]=h,t[20]=c,t[21]=d,t[22]=u,t[23]=y):y=t[23];const C=`w-2 h-2 rounded-full ${e>=3?"bg-emerald-500":"bg-amber-500 animate-pulse"}`;let g;t[24]!==C?(g=s.jsx("div",{className:C}),t[24]=C,t[25]=g):g=t[25];const _=e===0&&"Prêt à convertir",F=e===1&&"Analyse en cours...",M=e===2&&"Conversion WebP...",A=e===3&&"Conversion terminée!";let I;t[26]!==_||t[27]!==F||t[28]!==M||t[29]!==A?(I=s.jsxs("span",{className:"text-white/70",children:[_,F,M,A]}),t[26]=_,t[27]=F,t[28]=M,t[29]=A,t[30]=I):I=t[30];let z;t[31]!==g||t[32]!==I?(z=s.jsxs("div",{className:"flex items-center gap-2",children:[g,I]}),t[31]=g,t[32]=I,t[33]=z):z=t[33];const w=`font-mono font-bold ${e>=3?"text-emerald-400":"text-white/50"}`,l=e>=3?"-72%":"...";let b;t[34]!==w||t[35]!==l?(b=s.jsx("span",{className:w,children:l}),t[34]=w,t[35]=l,t[36]=b):b=t[36];let o;t[37]!==z||t[38]!==b?(o=s.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-black/50 backdrop-blur-sm border-t border-white/10 p-4",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[z,b]})}),t[37]=z,t[38]=b,t[39]=o):o=t[39];let k;t[40]!==y||t[41]!==o?(k=s.jsxs("div",{className:"relative aspect-square rounded-3xl overflow-hidden bg-gradient-to-br from-slate-900 to-slate-800 border border-white/10 shadow-2xl",children:[x,y,o]}),t[40]=y,t[41]=o,t[42]=k):k=t[42];let E;t[43]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx("div",{className:"absolute -left-4 top-1/4 animate-float",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-full px-3 py-1.5 border border-white/20 flex items-center gap-2 shadow-xl",children:[s.jsx(Fe,{className:"w-4 h-4 text-cyan-400"}),s.jsx("span",{className:"text-white text-xs font-medium",children:"Ultra rapide"})]})}),t[43]=E):E=t[43];let U;t[44]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx("div",{className:"absolute -right-4 top-1/3 animate-float-delayed",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-full px-3 py-1.5 border border-white/20 flex items-center gap-2 shadow-xl",children:[s.jsx(Re,{className:"w-4 h-4 text-violet-400"}),s.jsx("span",{className:"text-white text-xs font-medium",children:"SEO optimisé"})]})}),t[44]=U):U=t[44];let P;t[45]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx("div",{className:"absolute -left-8 bottom-1/4 animate-float-slow",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-full px-3 py-1.5 border border-white/20 flex items-center gap-2 shadow-xl",children:[s.jsx(ae,{className:"w-4 h-4 text-amber-400"}),s.jsx("span",{className:"text-white text-xs font-medium",children:"IA intégrée"})]})}),t[45]=P):P=t[45];let R;return t[46]!==k?(R=s.jsxs("div",{className:"relative w-full max-w-md mx-auto",children:[k,E,U,P]}),t[46]=k,t[47]=R):R=t[47],R}function xs(t,e){return s.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-gradient-to-r from-violet-500 to-cyan-500 animate-ping",style:{left:`${30+Math.random()*40}%`,top:`${30+Math.random()*40}%`,animationDelay:`${e*100}ms`,animationDuration:"1s"}},e)}function hs(t){return(t+1)%4}function fs(t){const e=Q.c(40),{onScrollToUpload:p}=t;let N,n,x,v;e[0]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-background to-background"}),n=s.jsx("div",{className:"absolute top-0 left-1/4 w-[600px] h-[600px] bg-violet-600/20 rounded-full blur-[128px] animate-pulse"}),x=s.jsx("div",{className:"absolute bottom-0 right-1/4 w-[500px] h-[500px] bg-cyan-600/15 rounded-full blur-[100px] animate-pulse delay-1000"}),v=s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[400px] bg-violet-500/10 rounded-full blur-[120px]"}),e[0]=N,e[1]=n,e[2]=x,e[3]=v):(N=e[0],n=e[1],x=e[2],v=e[3]);let f;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsxs("div",{className:"absolute inset-0 -z-10",children:[N,n,x,v,s.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E")`}})]}),e[4]=f):f=e[4];let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsxs("div",{className:"inline-flex items-center gap-2 mb-6",children:[s.jsxs(Y,{variant:"outline",className:"border-violet-500/50 text-violet-400 bg-violet-500/10 px-3 py-1",children:[s.jsx(pe,{className:"w-3 h-3 mr-1"}),"Nouveau"]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Optimisation SEO par IA"})]}),e[5]=c):c=e[5];let d,u;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx("span",{className:"text-foreground",children:"Vos images,"}),u=s.jsx("br",{}),e[6]=d,e[7]=u):(d=e[6],u=e[7]);let a;e[8]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("span",{className:"bg-gradient-to-r from-violet-500 via-purple-500 to-cyan-500 bg-clip-text text-transparent",children:"transformées"}),e[8]=a):a=e[8];let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-bold tracking-tight mb-6",children:[d,u,s.jsxs("span",{className:"relative",children:[a,s.jsx("svg",{className:"absolute -bottom-2 left-0 w-full h-3 text-violet-500/30",viewBox:"0 0 200 12",preserveAspectRatio:"none",children:s.jsx("path",{d:"M0 10 Q 50 0, 100 10 T 200 10",fill:"none",stroke:"currentColor",strokeWidth:"4"})})]}),s.jsx("br",{}),s.jsx("span",{className:"text-foreground",children:"pour le web"})]}),e[9]=m):m=e[9];let S;e[10]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx("span",{className:"text-foreground font-medium",children:"WebP"}),e[10]=S):S=e[10];let j;e[11]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("span",{className:"text-foreground font-medium",children:"AVIF"}),e[11]=j):j=e[11];let r;e[12]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("span",{className:"text-emerald-500 font-bold",children:"72%"}),e[12]=r):r=e[12];let h;e[13]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsxs("p",{className:"text-lg sm:text-xl text-muted-foreground mb-8 max-w-xl mx-auto lg:mx-0",children:["Convertissez en ",S," & ",j,", compressez jusqu'à ",r,", et générez automatiquement vos ",s.jsx("span",{className:"text-foreground font-medium",children:"alt text"})," par IA."]}),e[13]=h):h=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsxs("div",{className:"text-center lg:text-left",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:s.jsx(re,{end:72,suffix:"%",prefix:"-"})}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Compression"})]}),e[14]=y):y=e[14];let C;e[15]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsxs("div",{className:"text-center lg:text-left",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:s.jsx(re,{end:500,suffix:"+"})}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Utilisateurs"})]}),e[15]=C):C=e[15];let g;e[16]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8 max-w-lg mx-auto lg:mx-0",children:[y,C,s.jsxs("div",{className:"text-center lg:text-left",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:s.jsx(re,{end:100,suffix:"%"})}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Gratuit"})]})]}),e[16]=g):g=e[16];let _;e[17]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(Ke,{className:"w-5 h-5"}),e[17]=_):_=e[17];let F,M;e[18]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[_,"Convertir mes images",s.jsx(oe,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]}),M=s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"}),e[18]=F,e[19]=M):(F=e[18],M=e[19]);let A;e[20]!==p?(A=s.jsxs(G,{size:"lg",onClick:p,className:"group relative overflow-hidden bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white border-0 shadow-lg shadow-violet-500/25 hover:shadow-xl hover:shadow-violet-500/30 transition-all duration-300",children:[F,M]}),e[20]=p,e[21]=A):A=e[21];let I;e[22]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(G,{asChild:!0,size:"lg",variant:"outline",className:"border-white/20 hover:bg-white/5",children:s.jsx(de,{href:"/tarifs",children:"Voir les plans Pro"})}),e[22]=I):I=e[22];let z;e[23]!==A?(z=s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start mb-8",children:[A,I]}),e[23]=A,e[24]=z):z=e[24];let w;e[25]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(J,{className:"w-4 h-4 text-emerald-500"}),s.jsx("span",{children:"Aucune inscription"})]}),e[25]=w):w=e[25];let l;e[26]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(J,{className:"w-4 h-4 text-emerald-500"}),s.jsx("span",{children:"5 images/jour gratuites"})]}),e[26]=l):l=e[26];let b;e[27]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsxs("div",{className:"flex flex-wrap items-center justify-center lg:justify-start gap-x-6 gap-y-2 text-sm text-muted-foreground",children:[w,l,s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(J,{className:"w-4 h-4 text-emerald-500"}),s.jsx("span",{children:"Données sécurisées"})]})]}),e[27]=b):b=e[27];let o;e[28]!==z?(o=s.jsxs("div",{className:"text-center lg:text-left order-2 lg:order-1",children:[c,m,h,g,z,b]}),e[28]=z,e[29]=o):o=e[29];let k;e[30]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx("div",{className:"order-1 lg:order-2",children:s.jsx(us,{})}),e[30]=k):k=e[30];let E;e[31]!==o?(E=s.jsx("div",{className:"container mx-auto px-4 py-16",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[o,k]})}),e[31]=o,e[32]=E):E=e[32];let U;e[33]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx("span",{className:"text-xs",children:"Défilez pour commencer"}),e[33]=U):U=e[33];let P;e[34]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx("div",{className:"w-6 h-10 rounded-full border-2 border-current flex items-start justify-center p-1",children:s.jsx("div",{className:"w-1.5 h-3 bg-current rounded-full animate-bounce"})}),e[34]=P):P=e[34];let R;e[35]!==p?(R=s.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2",children:s.jsxs("button",{onClick:p,className:"flex flex-col items-center gap-2 text-muted-foreground hover:text-foreground transition-colors group",children:[U,P]})}),e[35]=p,e[36]=R):R=e[36];let L;return e[37]!==E||e[38]!==R?(L=s.jsxs("section",{className:"relative min-h-[90vh] flex items-center overflow-hidden",children:[f,E,R]}),e[37]=E,e[38]=R,e[39]=L):L=e[39],L}const ps={maxFilesPerBatch:5,maxFileSizeMb:10,maxBatchSizeMb:25,maxWidth:4096,maxHeight:4096},gs={maxFilesPerBatch:20,maxFileSizeMb:10,maxBatchSizeMb:100,maxWidth:8192,maxHeight:8192},bs=["image/jpeg","image/png","image/gif","image/bmp","image/tiff","image/svg+xml","image/webp"];function js(t={}){const{isPro:e=!1,limits:p}=t,n={...e?gs:ps,...p},x=n.maxFileSizeMb*1024*1024,v=n.maxBatchSizeMb*1024*1024,[f,c]=i.useState([]),[d,u]=i.useState([]),[a,m]=i.useState(!1),[S,j]=i.useState(0),[r,h]=i.useState([]),[y,C]=i.useState(null),g=f.reduce((l,b)=>l+b.size,0),_=i.useCallback((l,b)=>bs.includes(l.type)?l.size>x?`Fichier trop volumineux: ${l.name} (max ${n.maxFileSizeMb} Mo)`:b+l.size>v?`Taille totale du lot dépassée (max ${n.maxBatchSizeMb} Mo)`:null:`Format non supporté: ${l.name}`,[x,v,n.maxFileSizeMb,n.maxBatchSizeMb]),F=i.useCallback(l=>({file:l,preview:URL.createObjectURL(l),name:l.name,size:l.size,type:l.type}),[]),M=i.useCallback(l=>{const b=Array.from(l),o=[],k=[];let E=g;b.forEach(P=>{if(f.length+k.length>=n.maxFilesPerBatch){o.push(`Nombre maximum de fichiers atteint (${n.maxFilesPerBatch})`);return}const R=_(P,E);R?o.push(R):(k.push(P),E+=P.size)});const U=[...new Set(o)];U.length>0&&h(P=>[...P,...U]),k.length>0&&(c(P=>[...P,...k]),u(P=>[...P,...k.map(F)]))},[f.length,g,n.maxFilesPerBatch,_,F]),A=i.useCallback(l=>{c(b=>b.filter((o,k)=>k!==l)),u(b=>(URL.revokeObjectURL(b[l].preview),b.filter((o,k)=>k!==l)))},[]),I=i.useCallback(()=>{d.forEach(l=>URL.revokeObjectURL(l.preview)),c([]),u([]),h([])},[d]),z=i.useCallback(async(l=[])=>{if(f.length===0)throw new Error("Aucun fichier à uploader");m(!0),j(0),h([]);const b=new FormData;f.forEach(o=>{b.append("images[]",o)}),l.forEach(o=>{b.append("keywords[]",o)});try{const o=await fetch("/api/optiseo/images/upload",{method:"POST",credentials:"include",body:b,headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}});if(!o.ok){const E=await o.json();throw new Error(E.message||"Erreur lors de l'upload")}const k=await o.json();return C(k.batch),j(100),k.batch}catch(o){const k=o instanceof Error?o.message:"Erreur inconnue";throw h(E=>[...E,k]),o}finally{m(!1)}},[f]),w=i.useCallback(()=>{I(),C(null),j(0)},[I]);return{files:f,previews:d,isUploading:a,progress:S,errors:r,batch:y,limits:n,totalSize:g,addFiles:M,removeFile:A,clearFiles:I,upload:z,reset:w}}function nt(){const{auth:t}=fe().props,e=t?.isPro??!1,p=i.useRef(null),[N,n]=i.useState(!1),[x,v]=i.useState(null),f=i.useCallback(()=>{p.current?.scrollIntoView({behavior:"smooth"})},[]),{files:c,previews:d,isUploading:u,errors:a,limits:m,totalSize:S,addFiles:j,removeFile:r,clearFiles:h,upload:y}=js({isPro:e}),{suggestions:C,fetchSuggestions:g}=je(),[_,F]=i.useState([]);i.useEffect(()=>{(async()=>{try{const l=await fetch("/api/optiseo/usage",{credentials:"include",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}});if(l.ok){const b=await l.json();v(b)}}catch(l){console.error("Failed to fetch usage:",l)}})()},[]),i.useEffect(()=>{!e&&x&&x.remaining<=0&&n(!0)},[e,x]),i.useEffect(()=>{a.some(l=>l.toLowerCase().includes("quota")||l.toLowerCase().includes("limite")||l.toLowerCase().includes("dépassé"))&&!e&&n(!0)},[a,e]);const M=i.useCallback(()=>{const w=c[0]?.name;g(w,_)},[c,_,g]),A=i.useCallback(w=>{F(l=>{const b=[...l];return w.forEach(o=>{b.includes(o)||b.push(o)}),b})},[]),I=i.useCallback(async()=>{if(!e&&x&&x.remaining<=0){n(!0);return}try{const w=await y(_);be.visit(`/convert/${w.id}`)}catch(w){(w?.message?.toLowerCase().includes("quota")||w?.message?.toLowerCase().includes("limite"))&&n(!0),console.error("Upload error:",w)}},[y,_,e,x]),z=!e&&x&&x.remaining<=0;return s.jsxs(s.Fragment,{children:[s.jsx(Le,{...qe.home}),s.jsx(cs,{open:N,onOpenChange:n,trigger:"quota"}),s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/30",children:[s.jsx(Ie,{}),s.jsx(fs,{onScrollToUpload:f}),s.jsxs("div",{ref:p,className:"container mx-auto px-4 py-12",children:[x&&!e&&s.jsx("div",{className:"mx-auto mb-8 max-w-4xl",children:s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-muted px-4 py-2 text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:[x.remaining,"/",x.quota," conversions restantes aujourd'hui"]}),x.remaining<=2&&s.jsx(Y,{variant:"outline",className:"border-amber-500 text-amber-600",children:x.remaining===0?"Épuisé":"Bientôt épuisé"})]}),!e&&s.jsxs(G,{variant:"outline",size:"sm",onClick:()=>n(!0),className:"gap-1",children:[s.jsx(ee,{className:"h-4 w-4 text-amber-500"}),"Passer Pro"]})]})}),s.jsxs("div",{className:"mx-auto max-w-4xl space-y-8",children:[s.jsxs(X,{className:z?"opacity-60":"",children:[s.jsxs(ie,{children:[s.jsxs(le,{className:"flex items-center gap-2",children:[s.jsx(te,{className:"h-5 w-5"}),"1. Sélectionnez vos images"]}),s.jsx(ne,{children:"Glissez-déposez vos images ou cliquez pour parcourir vos fichiers"})]}),s.jsxs(K,{children:[s.jsx(rs,{onFilesAdded:j,disabled:u||z,maxFiles:m.maxFilesPerBatch,maxFileSizeMb:m.maxFileSizeMb}),z&&s.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-900 dark:bg-amber-950",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Quota journalier atteint"}),s.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Revenez demain ou passez au plan Pro pour 500 images/mois"})]}),s.jsxs(G,{onClick:()=>n(!0),className:"gap-1",children:[s.jsx(ee,{className:"h-4 w-4"}),"Voir le plan Pro"]})]}),a.length>0&&s.jsx("div",{className:"mt-4 rounded-lg border border-destructive/50 bg-destructive/10 p-3",children:a.map((w,l)=>s.jsx("p",{className:"text-sm text-destructive",children:w},l))}),d.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm font-medium",children:[d.length,"/",m.maxFilesPerBatch," image",d.length>1?"s":"",s.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",(S/1024/1024).toFixed(1),"/",m.maxBatchSizeMb," Mo)"]})]}),s.jsx(G,{variant:"ghost",size:"sm",onClick:h,disabled:u,children:"Tout supprimer"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:d.map((w,l)=>s.jsx(Se,{preview:w,onRemove:()=>r(l)},l))})]})]})]}),c.length>0&&s.jsxs(X,{children:[s.jsx(ie,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(le,{className:"flex items-center gap-2",children:[s.jsx(ae,{className:"h-5 w-5"}),"2. Ajoutez vos mots-clés SEO"]}),s.jsx(ne,{className:"mt-1.5",children:"Ces mots-clés seront utilisés pour générer les noms de fichiers et les attributs alt/title"})]}),s.jsx(ve,{onKeywordsGenerated:A,disabled:u,isPro:e})]})}),s.jsx(K,{children:s.jsx(Ne,{keywords:_,onChange:F,suggestions:C,onFetchSuggestions:M,disabled:u})})]}),c.length>0&&s.jsx("div",{className:"flex justify-center",children:s.jsx(G,{size:"lg",onClick:I,disabled:u||c.length===0,className:"gap-2",children:u?s.jsxs(s.Fragment,{children:[s.jsx(me,{className:"h-5 w-5 animate-spin"}),"Upload en cours..."]}):s.jsxs(s.Fragment,{children:["Continuer vers les paramètres",s.jsx(oe,{className:"h-5 w-5"})]})})}),s.jsx(Ye,{})]}),s.jsxs("div",{className:"mx-auto mt-16 max-w-4xl",children:[s.jsx("h2",{className:"mb-8 text-center text-2xl font-bold",children:"Pourquoi utiliser Eikonify ?"}),s.jsxs("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(X,{children:s.jsxs(K,{className:"pt-6",children:[s.jsx("div",{className:"mb-4 inline-flex rounded-lg bg-primary/10 p-3",children:s.jsx(te,{className:"h-6 w-6 text-primary"})}),s.jsx("h3",{className:"mb-2 font-semibold",children:"Conversion WebP/AVIF"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e?"500 images/mois, 20 par lot":"5 images/jour, 5 par lot"})]})}),s.jsx(X,{children:s.jsxs(K,{className:"pt-6",children:[s.jsx("div",{className:"mb-4 inline-flex rounded-lg bg-primary/10 p-3",children:s.jsx(ce,{className:"h-6 w-6 text-primary"})}),s.jsx("h3",{className:"mb-2 font-semibold",children:"Suppression arrière-plan"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e?"500/mois par IA":"3/jour par IA"})]})}),s.jsx(X,{children:s.jsxs(K,{className:"pt-6",children:[s.jsx("div",{className:"mb-4 inline-flex rounded-lg bg-primary/10 p-3",children:s.jsx(ae,{className:"h-6 w-6 text-primary"})}),s.jsx("h3",{className:"mb-2 font-semibold",children:"SEO automatique"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e?"IA + suggestions personnalisées":"Génération basique"})]})}),s.jsx(X,{children:s.jsxs(K,{className:"pt-6",children:[s.jsx("div",{className:"mb-4 inline-flex rounded-lg bg-primary/10 p-3",children:s.jsx(oe,{className:"h-6 w-6 text-primary"})}),s.jsx("h3",{className:"mb-2 font-semibold",children:"Export complet"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e?"ZIP, CSV, JSON, HTML":"ZIP uniquement"})]})})]})]})]}),s.jsx(Ue,{})]}),s.jsx(De,{})]})}export{nt as default};
