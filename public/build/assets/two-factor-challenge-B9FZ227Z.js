import{c as w,r as E,u as S,j as t,H as k}from"./app-K3ZVP2zp.js";import{c as I,B as R}from"./button-DHqJ9mov.js";import{I as b}from"./input-Ct7GE1z0.js";import{L as C}from"./label-BposPEoT.js";import{I as L}from"./input-error-VfwnKXuV.js";import{A}from"./auth-layout-DFCtBoUs.js";import{S as U}from"./shield-ZLhQT0Cv.js";import{L as z}from"./loader-circle-BZZu1f1o.js";/* empty css            */import"./index-ua2eo9TF.js";import"./index-D-0GpbBa.js";import"./index-mbkb6Dy8.js";const B=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],D=I("Key",B);function W(){const e=w.c(31),[o,F]=E.useState(!1);let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={code:"",recovery_code:""},e[0]=f):f=e[0];const{data:r,setData:x,post:j,processing:s,errors:c,reset:a}=S(f);let h;e[1]!==j||e[2]!==a?(h=p=>{p.preventDefault(),j("/two-factor-challenge",{onFinish:()=>a()})},e[1]=j,e[2]=a,e[3]=h):h=e[3];const g=h,_=o?"Entrez un de vos codes de récupération pour accéder à votre compte.":"Entrez le code de votre application d'authentification pour continuer.";let v;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx(k,{title:"Authentification à deux facteurs"}),e[4]=v):v=e[4];let i;e[5]!==r.code||e[6]!==r.recovery_code||e[7]!==c.code||e[8]!==c.recovery_code||e[9]!==x||e[10]!==o?(i=o?t.jsxs("div",{className:"grid gap-2",children:[t.jsx(C,{htmlFor:"recovery_code",children:"Code de récupération"}),t.jsxs("div",{className:"relative",children:[t.jsx(D,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t.jsx(b,{id:"recovery_code",type:"text",value:r.recovery_code,onChange:p=>x("recovery_code",p.target.value),placeholder:"xxxxx-xxxxx",className:"pl-10",autoComplete:"one-time-code",autoFocus:!0})]}),t.jsx(L,{message:c.recovery_code})]}):t.jsxs("div",{className:"grid gap-2",children:[t.jsx(C,{htmlFor:"code",children:"Code d'authentification"}),t.jsxs("div",{className:"relative",children:[t.jsx(U,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t.jsx(b,{id:"code",type:"text",inputMode:"numeric",value:r.code,onChange:p=>x("code",p.target.value),placeholder:"000000",maxLength:6,className:"pl-10",autoComplete:"one-time-code",autoFocus:!0})]}),t.jsx(L,{message:c.code})]}),e[5]=r.code,e[6]=r.recovery_code,e[7]=c.code,e[8]=c.recovery_code,e[9]=x,e[10]=o,e[11]=i):i=e[11];let l;e[12]!==s?(l=s&&t.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}),e[12]=s,e[13]=l):l=e[13];let d;e[14]!==s||e[15]!==l?(d=t.jsxs(R,{type:"submit",className:"w-full",disabled:s,children:[l,"Vérifier"]}),e[14]=s,e[15]=l,e[16]=d):d=e[16];let n;e[17]!==a||e[18]!==o?(n=()=>{F(!o),a()},e[17]=a,e[18]=o,e[19]=n):n=e[19];const N=o?"Utiliser le code d'authentification":"Utiliser un code de récupération";let m;e[20]!==n||e[21]!==N?(m=t.jsx("button",{type:"button",onClick:n,className:"text-sm text-muted-foreground hover:text-foreground underline-offset-4 hover:underline",children:N}),e[20]=n,e[21]=N,e[22]=m):m=e[22];let u;e[23]!==g||e[24]!==i||e[25]!==d||e[26]!==m?(u=t.jsxs("form",{onSubmit:g,className:"flex flex-col gap-6",children:[i,d,m]}),e[23]=g,e[24]=i,e[25]=d,e[26]=m,e[27]=u):u=e[27];let y;return e[28]!==u||e[29]!==_?(y=t.jsxs(A,{title:"Vérification en deux étapes",description:_,children:[v,u]}),e[28]=u,e[29]=_,e[30]=y):y=e[30],y}export{W as default};
